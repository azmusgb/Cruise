<!DOCTYPE html>
<html lang="en" data-theme="light" data-theme-mode="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#cfeaff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="manifest" href="manifest.json?v=2">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="icon" type="image/svg+xml" href="icons/icon-192.svg">
  <title>Dining | Adventure of the Seas</title>
  <meta name="description" content="Dining overview, specialty picks, and reservations in a clean, light layout.">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/base.css?v=3">
  <link rel="stylesheet" href="css/utilities.css?v=3">
  <link rel="stylesheet" href="css/components.css?v=3">

  <style>
    .dining-page {
      --type-title-xl: clamp(2.4rem, 4.6vw, 3.2rem);
      --type-title-lg: clamp(1.5rem, 2.7vw, 2rem);
      --type-subtitle: clamp(1rem, 1.8vw, 1.12rem);
      --space-section: 24px;
      background: linear-gradient(180deg, #eef8ff 0%, #def1ff 52%, #cfeaff 78%, #c3e7fd 100%);
    }

    .dining-page .deck-hero {
      background: linear-gradient(180deg, #eaf6ff 0%, #cfeaff 50%, #bde5ff 100%);
      box-shadow: 0 12px 24px rgba(0, 40, 80, 0.12);
      color: #0a2a4a;
    }

    .dining-page .deck-hero__eyebrow {
      color: #1f6b97;
    }

    .dining-page .deck-hero__title {
      font-size: var(--type-title-xl);
      line-height: 1.07;
      letter-spacing: -0.01em;
      color: #08395f;
      text-shadow: none;
    }

    .dining-page .deck-hero__subtitle {
      font-size: var(--type-subtitle);
      color: rgba(12, 74, 110, 0.92);
    }

    .dining-page .deck-hero__tag {
      background: rgba(255, 255, 255, 0.56);
      border: 1px solid rgba(16, 122, 170, 0.18);
      color: #0a4d77;
      box-shadow: none;
    }

    .dining-page .page-spine__label {
      color: #0d4067;
    }

    .dining-page .page-spine__meta {
      color: #2d6f97;
    }

    .dining-page .deck-hero__actions .btn {
      background: #fff;
      color: #0c4d75;
      box-shadow: 0 6px 14px rgba(0, 83, 126, 0.1);
    }

    .dining-page .deck-hero__actions .btn--primary {
      box-shadow: 0 8px 20px rgba(255, 180, 70, 0.28);
    }

    .dining-page .deck-hero__actions .btn--secondary {
      background: rgba(255, 255, 255, 0.72);
      color: #0b547d;
    }

    .dining-page .dining-spine__item {
      background: rgba(255, 255, 255, 0.72);
      border: 1px solid rgba(8, 89, 136, 0.14);
      box-shadow: 0 6px 14px rgba(0, 73, 112, 0.08);
      border-radius: 14px;
    }

    .dining-page .main-navigation__filters .pill-btn {
      cursor: pointer;
    }

    .dining-page .main-navigation__filters .pill-btn.is-active {
      background: linear-gradient(120deg, #00a4d8, #5cccf2);
      border-color: transparent;
      color: #fff;
      box-shadow: 0 6px 14px rgba(0, 134, 185, 0.2);
    }

    .dining-page .search-status {
      width: 100%;
      margin: 4px 0 0;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--royal-navy);
    }

    .dining-page .search-status.is-loading {
      opacity: 0.72;
    }

    .dining-page .reservation-panel {
      background: rgba(255, 255, 255, 0.96);
      border: 1px solid var(--royal-border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 12px 24px rgba(0, 59, 117, 0.1);
      margin-bottom: var(--space-section);
    }

    .dining-page .dining-spotlight {
      margin: 0 0 var(--space-section);
      border-radius: 18px;
      border: 1px solid rgba(255, 201, 58, 0.58);
      background: linear-gradient(120deg, rgba(255, 201, 58, 0.22), rgba(255, 255, 255, 0.98) 44%, rgba(25, 194, 255, 0.1) 100%);
      box-shadow: 0 10px 22px rgba(11, 79, 144, 0.12);
      padding: 16px;
      display: grid;
      gap: 10px;
    }

    .dining-page .dining-spotlight__eyebrow {
      margin: 0;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: #123e65;
      font-weight: 800;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      font-size: 0.75rem;
    }

    .dining-page .dining-spotlight__title {
      margin: 0;
      color: #0b416f;
      font-size: clamp(1.28rem, 2.2vw, 1.6rem);
      line-height: 1.25;
      letter-spacing: -0.01em;
    }

    .dining-page .dining-spotlight__body {
      margin: 0;
      color: #1c4f75;
      font-size: 0.95rem;
      opacity: 0.95;
    }

    .dining-page .dining-spotlight__action {
      justify-self: start;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      border-radius: 999px;
      border: 1px solid rgba(0, 82, 165, 0.24);
      color: #0a4e8e;
      font-weight: 800;
      font-size: 0.86rem;
      padding: 8px 14px;
      background: #fff;
    }

    .dining-page .dining-spotlight__action:hover {
      border-color: rgba(0, 82, 165, 0.4);
      background: #f5fbff;
    }

    .dining-page .reservation-panel__header h2 {
      margin: 0 0 4px;
      color: var(--royal-navy);
      font-size: var(--type-title-lg);
      line-height: 1.15;
      letter-spacing: -0.01em;
    }

    .dining-page .reservation-panel__header p {
      margin: 0 0 14px;
      color: var(--royal-ink);
      opacity: 0.92;
    }

    .dining-page .reservation-slots {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
    }

    .dining-page .reservation-slot {
      border: 1px solid var(--royal-border);
      border-radius: 12px;
      background: var(--royal-foam);
      padding: 12px;
    }

    .dining-page .reservation-slot h3 {
      margin: 0 0 4px;
      color: var(--royal-navy);
      font-size: 0.98rem;
    }

    .dining-page .reservation-slot p {
      margin: 0 0 8px;
      color: var(--royal-ink);
      font-size: 0.9rem;
    }

    .dining-page .reservation-slot a {
      font-weight: 700;
      color: var(--royal-blue);
      text-decoration: none;
      font-size: 0.9rem;
    }

    .dining-page .deck-group {
      margin-bottom: var(--space-section);
    }

    .dining-page .deck-grid__title {
      font-size: var(--type-title-lg);
      line-height: 1.15;
      letter-spacing: -0.01em;
    }

    .dining-page .deck-card {
      position: relative;
    }

    .dining-page .venue-type {
      position: absolute;
      top: 12px;
      right: 12px;
      z-index: 2;
      border-radius: 999px;
      padding: 4px 9px;
      font-size: 0.7rem;
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #fff;
      background: #2f7d62;
      box-shadow: 0 6px 16px rgba(47, 125, 98, 0.35);
    }

    .dining-page .venue-type--specialty {
      background: #d73f4a;
      box-shadow: 0 6px 16px rgba(215, 63, 74, 0.35);
    }

    .dining-page .search-empty {
      margin-top: 12px;
      background: rgba(255, 255, 255, 0.96);
      border: 1px dashed var(--royal-border);
      border-radius: 12px;
      padding: 14px 16px;
      font-size: 0.95rem;
      color: var(--royal-ink);
    }

    .dining-page .pill-btn:focus-visible,
    .dining-page .deck-card__cta:focus-visible,
    .dining-page .main-navigation__search input:focus-visible,
    .dining-page .reservation-slot a:focus-visible {
      outline: 3px solid rgba(0, 168, 232, 0.35);
      outline-offset: 2px;
    }

    .dining-page .dining-context {
      margin: 0 0 14px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(0, 82, 165, 0.2);
      background: linear-gradient(130deg, rgba(0, 164, 216, 0.14), rgba(255, 255, 255, 0.96));
      color: #0d4067;
      display: grid;
      gap: 8px;
      box-shadow: 0 10px 18px rgba(0, 59, 117, 0.08);
    }

    .dining-page .dining-context__title {
      margin: 0;
      font-size: 1rem;
      font-weight: 800;
      letter-spacing: 0.01em;
    }

    .dining-page .dining-context__body {
      margin: 0;
      color: #2d6f97;
      font-size: 0.91rem;
    }

    .dining-page .dining-context__action {
      justify-self: start;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-decoration: none;
      border-radius: 999px;
      border: 1px solid rgba(0, 82, 165, 0.3);
      color: #0a4e8e;
      font-weight: 700;
      font-size: 0.84rem;
      padding: 7px 12px;
      background: #fff;
    }

    .dining-page .dining-context__action:hover {
      background: #f0f7ff;
    }

    .dining-page .deck-card--context-pick {
      border-color: rgba(255, 201, 58, 0.65) !important;
      box-shadow: 0 10px 20px rgba(11, 79, 144, 0.12), inset 0 0 0 2px rgba(255, 201, 58, 0.32);
    }

    .dining-page .bottom-nav {
      background: rgba(241, 250, 255, 0.92);
      border-top: 1px solid rgba(8, 89, 136, 0.18);
      backdrop-filter: blur(18px);
    }

    .dining-page .bottom-nav__item {
      color: #1f567c;
    }

    .dining-page .bottom-nav__item.active,
    .dining-page .bottom-nav__item[aria-current="page"] {
      background: rgba(255, 190, 92, 0.2);
      color: #0f4f76;
      box-shadow: 0 6px 12px rgba(0, 121, 180, 0.1);
    }

  </style>
  <link rel="stylesheet" href="css/mobile-first.css?v=3">
  <script src="js/shared-layout.js?v=17" defer></script>
</head>

<body class="app-theme-rcc decks-shell page-shell dining-page">
  <a href="#main" class="skip-link">Skip to main content</a>
  <div id="sharedHeader" data-page="dining"></div>

  <main id="main" aria-label="Dining">
    <section class="deck-hero">
      <div class="container">
        <div class="deck-hero__eyebrow">Adventure of the Seas · Feb 14–20, 2026</div>
        <h1 class="deck-hero__title">Dining Planner</h1>
        <p class="deck-hero__subtitle">Compare included and specialty venues, then lock tonight's reservations in one pass.</p>
        <div class="deck-hero__highlights" aria-label="Dining highlights">
          <span class="deck-hero__tag"><i class="fas fa-utensils" aria-hidden="true"></i> Included plus specialty split</span>
          <span class="deck-hero__tag"><i class="fas fa-calendar-check" aria-hidden="true"></i> Reservation pressure points</span>
          <span class="deck-hero__tag"><i class="fas fa-wine-glass" aria-hidden="true"></i> Date-night and quick-bite picks</span>
        </div>

        <div class="page-spine" aria-label="Dining decision guide">
          <div class="page-spine__item">
            <span class="page-spine__label">Included dining</span>
            <span class="page-spine__meta">Main Dining, Windjammer, Cafe Promenade</span>
          </div>
          <div class="page-spine__item">
            <span class="page-spine__label">Specialty dining</span>
            <span class="page-spine__meta">Steakhouse, Italian, sushi venues</span>
          </div>
          <div class="page-spine__item">
            <span class="page-spine__label">Reservations tonight</span>
            <span class="page-spine__meta">Book the best slot quickly</span>
          </div>
        </div>
        <div class="deck-hero__actions">
          <a class="btn btn--primary" href="#reservations">Book tonight</a>
          <a class="btn btn--secondary" href="#included-group">Compare included venues</a>
        </div>
      </div>
    </section>

    <section class="main-navigation" aria-label="Quick navigation">
      <div class="container main-navigation__inner">
        <div class="main-navigation__search" role="search">
          <i class="fas fa-search" aria-hidden="true"></i>
          <input id="diningSearchInput" type="search" placeholder="Search restaurants, cuisines, hours, or deck" aria-label="Search dining venues and details" />
          <span class="main-navigation__hint">Press / to focus</span>
        </div>
        <div class="main-navigation__filters" aria-label="Shortcuts" data-filter-group="diningType" role="radiogroup">
          <button class="pill-btn is-active" type="button" data-filter="all" data-filter-option data-filter-value="all" role="radio" aria-checked="true">All</button>
          <button class="pill-btn" type="button" data-filter="included" data-filter-option data-filter-value="included" role="radio" aria-checked="false">Included</button>
          <button class="pill-btn" type="button" data-filter="specialty" data-filter-option data-filter-value="specialty" role="radio" aria-checked="false">Specialty</button>
          <a class="pill-btn" href="#reservations">Reservations</a>
        </div>
        <p id="diningSearchStatus" class="search-status" role="status" aria-live="polite">Showing 6 of 6 venues</p>
      </div>
    </section>

    <section class="container dining-context" id="diningContext" aria-live="polite">
      <h2 class="dining-context__title" id="diningContextTitle">Dining Focus</h2>
      <p class="dining-context__body" id="diningContextBody">Loading recommendations for your current cruise day and time.</p>
      <a class="dining-context__action" id="diningContextAction" href="#reservations">
        <i class="fas fa-arrow-right" aria-hidden="true"></i>
        <span id="diningContextActionText">Open reservations</span>
      </a>
    </section>

    <section id="reservations" class="container reservation-panel" aria-label="Tonight reservation snapshot">
      <div class="reservation-panel__header">
        <h2>Tonight Reservation Snapshot</h2>
        <p>Fast booking choices with the next useful action for each dining style.</p>
      </div>
      <div class="reservation-slots">
        <article class="reservation-slot">
          <h3>Earliest table</h3>
          <p>6:15 PM · Main Dining Room</p>
          <a href="#venue-main-dining">Review included options</a>
        </article>
        <article class="reservation-slot">
          <h3>Most requested</h3>
          <p>Chops Grille · Limited seats after 7:00 PM</p>
          <a href="#venue-chops">Book specialty dining</a>
        </article>
        <article class="reservation-slot">
          <h3>Last practical slot</h3>
          <p>8:45 PM · Specialty venues</p>
          <a href="#specialty-group">See late options</a>
        </article>
      </div>
    </section>

    <section class="container dining-spotlight" aria-label="Promoted dining recommendation">
      <p class="dining-spotlight__eyebrow"><i class="fas fa-star" aria-hidden="true"></i>Featured dining call</p>
      <h2 class="dining-spotlight__title" id="diningSpotlightTitle">Tonight's Pick</h2>
      <p class="dining-spotlight__body" id="diningSpotlightBody">Chops Grille has the best premium window tonight. Lock your table before peak demand hits.</p>
      <a class="dining-spotlight__action" id="diningSpotlightAction" href="#venue-chops">
        <i class="fas fa-arrow-right" aria-hidden="true"></i>
        <span id="diningSpotlightActionText">Open tonight's venue</span>
      </a>
    </section>

    <section class="deck-grid container" aria-label="Dining options" id="dining-grid">
      <div class="deck-grid__header">
        <div>
          <h2 class="deck-grid__title">Dining Overview</h2>
          <p class="deck-grid__subtitle">Tap a venue to see hours and reservation options.</p>
        </div>
        <div class="deck-grid__counts">
          <div class="count-chip"><span>6</span> venues</div>
        </div>
      </div>
      <div id="included-group" class="deck-group" aria-label="Included dining">
        <div class="deck-group__header">
          <h3>Included dining</h3>
          <p>Quick, no-reservation options for every meal.</p>
        </div>
        <div class="deck-cards" role="list">
          <article id="venue-main-dining" class="deck-card" role="listitem" data-venue-type="included" data-search="main dining room included traditional seating decks 3 4 formal night family friendly 5:30 pm">
            <span class="venue-type">Included</span>
            <div class="deck-visual">
              <span class="deck-number">1</span>
              <img src="deck-plans/deck-12.png" alt="Main Dining Room" />
            </div>
            <div class="deck-info">
              <div class="deck-info__heading">
                <h3>Main Dining Room</h3>
                <div class="deck-meta">
                  <span class="deck-meta__item">Included</span>
                  <span class="deck-meta__item">Traditional seating</span>
                  <span class="deck-meta__item">Decks 3–4</span>
                </div>
              </div>
              <div class="deck-highlights">
                <span>5:30 PM seating</span>
                <span>Formal night</span>
                <span>Family friendly</span>
                <span>Price: Included</span>
                <span>Allergens: Notify host stand</span>
              </div>
              <a class="deck-card__cta" href="itinerary.html">View menu timing</a>
            </div>
          </article>

          <article id="venue-windjammer" class="deck-card" role="listitem" data-venue-type="included" data-search="windjammer marketplace included buffet deck 11 breakfast dinner kids varied cuisines">
            <span class="venue-type">Included</span>
            <div class="deck-visual">
              <span class="deck-number">2</span>
              <img src="deck-plans/deck-12.png" alt="Windjammer" />
            </div>
            <div class="deck-info">
              <div class="deck-info__heading">
                <h3>Windjammer Marketplace</h3>
                <div class="deck-meta">
                  <span class="deck-meta__item">Included</span>
                  <span class="deck-meta__item">Buffet</span>
                  <span class="deck-meta__item">Deck 11</span>
                </div>
              </div>
              <div class="deck-highlights">
                <span>Breakfast–Dinner</span>
                <span>Kids friendly</span>
                <span>Varied cuisines</span>
                <span>Price: Included</span>
                <span>Allergens: Label checks advised</span>
              </div>
              <a class="deck-card__cta" href="itinerary.html">See service hours</a>
            </div>
          </article>

          <article id="venue-cafe" class="deck-card" role="listitem" data-venue-type="included" data-search="cafe promenade included snacks coffee promenade 24 7 grab and go">
            <span class="venue-type">Included</span>
            <div class="deck-visual">
              <span class="deck-number">3</span>
              <img src="deck-plans/deck-12.png" alt="Café Promenade" />
            </div>
            <div class="deck-info">
              <div class="deck-info__heading">
                <h3>Café Promenade</h3>
                <div class="deck-meta">
                  <span class="deck-meta__item">Included</span>
                  <span class="deck-meta__item">Snacks & coffee</span>
                  <span class="deck-meta__item">Promenade</span>
                </div>
              </div>
              <div class="deck-highlights">
                <span>24/7 snacks</span>
                <span>Specialty coffee</span>
                <span>Grab & go</span>
                <span>Price: Included</span>
                <span>Allergens: Ask ingredient list</span>
              </div>
              <a class="deck-card__cta" href="itinerary.html">View late-night options</a>
            </div>
          </article>
        </div>
      </div>

      <div id="specialty-group" class="deck-group" aria-label="Specialty dining">
        <div class="deck-group__header">
          <h3>Specialty dining</h3>
          <p>Reservation-friendly venues for a night out.</p>
        </div>
        <div class="deck-cards" role="list">
          <article id="venue-chops" class="deck-card" role="listitem" data-venue-type="specialty" data-search="chops grille specialty steakhouse reservations dressy casual wine pairings prime cuts">
            <span class="venue-type venue-type--specialty">Specialty</span>
            <div class="deck-visual">
              <span class="deck-number">4</span>
              <img src="deck-plans/deck-12.png" alt="Chops Grille" />
            </div>
            <div class="deck-info">
              <div class="deck-info__heading">
                <h3>Chops Grille</h3>
                <div class="deck-meta">
                  <span class="deck-meta__item">Specialty</span>
                  <span class="deck-meta__item">Steakhouse</span>
                  <span class="deck-meta__item">Reservations</span>
                </div>
              </div>
              <div class="deck-highlights">
                <span>Dressy casual</span>
                <span>Wine pairings</span>
                <span>Prime cuts</span>
                <span>Price: $$$ cover charge</span>
                <span>Cancellation: Before 2 PM</span>
              </div>
              <a class="deck-card__cta" href="#reservations">Book tonight</a>
            </div>
          </article>

          <article id="venue-giovanni" class="deck-card" role="listitem" data-venue-type="specialty" data-search="giovanni specialty italian trattoria reservations family style wine list house pastas">
            <span class="venue-type venue-type--specialty">Specialty</span>
            <div class="deck-visual">
              <span class="deck-number">5</span>
              <img src="deck-plans/deck-12.png" alt="Giovanni’s" />
            </div>
            <div class="deck-info">
              <div class="deck-info__heading">
                <h3>Giovanni’s</h3>
                <div class="deck-meta">
                  <span class="deck-meta__item">Specialty</span>
                  <span class="deck-meta__item">Italian trattoria</span>
                  <span class="deck-meta__item">Reservations</span>
                </div>
              </div>
              <div class="deck-highlights">
                <span>Family style</span>
                <span>Wine list</span>
                <span>House pastas</span>
                <span>Price: $$ cover charge</span>
                <span>Cancellation: Before 2 PM</span>
              </div>
              <a class="deck-card__cta" href="#reservations">Book tonight</a>
            </div>
          </article>

          <article id="venue-izumi" class="deck-card" role="listitem" data-venue-type="specialty" data-search="izumi specialty sushi hibachi reservations hibachi show sushi bar omakase">
            <span class="venue-type venue-type--specialty">Specialty</span>
            <div class="deck-visual">
              <span class="deck-number">6</span>
              <img src="deck-plans/deck-12.png" alt="Izumi" />
            </div>
            <div class="deck-info">
              <div class="deck-info__heading">
                <h3>Izumi</h3>
                <div class="deck-meta">
                  <span class="deck-meta__item">Specialty</span>
                  <span class="deck-meta__item">Sushi & hibachi</span>
                  <span class="deck-meta__item">Reservations</span>
                </div>
              </div>
              <div class="deck-highlights">
                <span>Hibachi show</span>
                <span>Sushi bar</span>
                <span>Omakase</span>
                <span>Price: $$-$$$ by experience</span>
                <span>Cancellation: Before 2 PM</span>
              </div>
              <a class="deck-card__cta" href="#reservations">Book tonight</a>
            </div>
          </article>
        </div>
      </div>
      <p id="diningSearchEmpty" class="search-empty" hidden>No dining venues match that search or filter yet.</p>
    </section>

    <section class="deck-grid container" aria-label="Dining policies">
      <div class="deck-grid__header">
        <div>
          <h2 class="deck-grid__title">Dining Policies</h2>
          <p class="deck-grid__subtitle">Quick policy checks before booking or modifying reservations.</p>
        </div>
      </div>
      <div class="deck-cards" role="list">
        <article class="deck-card" role="listitem">
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Specialty cancellation</h3>
            </div>
            <div class="deck-highlights">
              <span>Cancel before 2:00 PM to avoid fee</span>
              <span>No-show charges apply after cutoff</span>
            </div>
          </div>
        </article>
        <article class="deck-card" role="listitem">
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Dietary and allergy notes</h3>
            </div>
            <div class="deck-highlights">
              <span>Add notes while booking</span>
              <span>Reconfirm with host on arrival</span>
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <div id="sharedFooter"></div>
  <div id="sharedBottomNav" data-page="dining"></div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const searchInput = document.getElementById('diningSearchInput');
      const searchStatus = document.getElementById('diningSearchStatus');
      const emptyState = document.getElementById('diningSearchEmpty');
      const cards = Array.from(document.querySelectorAll('.deck-card[data-venue-type]'));
      const filterButtons = Array.from(document.querySelectorAll('.main-navigation__filters button[data-filter]'));
      const countChipValue = document.querySelector('.count-chip span');
      const contextCard = document.getElementById('diningContext');
      const contextTitle = document.getElementById('diningContextTitle');
      const contextBody = document.getElementById('diningContextBody');
      const contextAction = document.getElementById('diningContextAction');
      const contextActionText = document.getElementById('diningContextActionText');
      const spotlightTitle = document.getElementById('diningSpotlightTitle');
      const spotlightBody = document.getElementById('diningSpotlightBody');
      const spotlightAction = document.getElementById('diningSpotlightAction');
      const spotlightActionText = document.getElementById('diningSpotlightActionText');
      const total = cards.length;
      let activeFilter = 'all';
      let searchTimer;
      const SEARCH_DELAY_MS = 120;
      const deepLinkPick = new URLSearchParams(window.location.search).get('pick');

      if (!searchInput || !searchStatus || !emptyState || total === 0) {
        return;
      }

      function getCruiseContext() {
        const shared = window.RCCLModeContext;
        const now = new Date();
        const hour = now.getHours();
        const sharedDay = shared && typeof shared.day === 'number' ? shared.day : 1;

        if (shared?.mode === 'before') {
          return {
            title: 'Pre-Cruise Dining Setup',
            body: 'Start with specialty reservations before sail day to secure premium evening windows.',
            target: '#venue-chops',
            actionLabel: 'Open Chops Grille'
          };
        }

        if (shared?.mode === 'post') {
          return {
            title: 'Post-Cruise Recap',
            body: 'Save your favorite dining picks for the next sailing plan.',
            target: '#specialty-group',
            actionLabel: 'Review specialty venues'
          };
        }

        if (hour >= 16 && hour <= 21) {
          return {
            title: `Tonight's Pick · Day ${sharedDay}`,
            body: 'Dinner booking window is active. Specialty tables tighten quickly after 7:00 PM.',
            target: '#venue-chops',
            actionLabel: 'Book Chops tonight'
          };
        }

        if (shared?.mode === 'port') {
          return {
            title: `Port Day Fuel Plan · Day ${sharedDay}`,
            body: 'Favor quick service before and after shore time to avoid missing all-aboard buffers.',
            target: '#venue-cafe',
            actionLabel: 'Open Café Promenade'
          };
        }

        return {
          title: `${shared?.mode === 'boarding' ? 'Boarding Day Dining Rhythm' : `Sea Day Dining Rhythm · Day ${sharedDay}`}`,
          body: 'Use Windjammer earlier in the day, then lock a dinner slot before evening venue peaks.',
          target: '#venue-windjammer',
          actionLabel: 'Open Windjammer'
        };
      }

      function applyDiningContext() {
        if (!contextCard || !contextTitle || !contextBody || !contextAction || !contextActionText) return;
        const context = getCruiseContext();
        contextTitle.textContent = context.title;
        contextBody.textContent = context.body;
        contextAction.setAttribute('href', context.target);
        contextActionText.textContent = context.actionLabel;
        if (spotlightTitle && spotlightBody && spotlightAction && spotlightActionText) {
          spotlightTitle.textContent = context.title;
          spotlightBody.textContent = context.body;
          spotlightAction.setAttribute('href', context.target);
          spotlightActionText.textContent = context.actionLabel;
        }

        cards.forEach((card) => card.classList.remove('deck-card--context-pick'));
        const targetCard = document.querySelector(context.target);
        targetCard?.classList.add('deck-card--context-pick');
      }

      function applyPickFromDeepLink() {
        if (!deepLinkPick) return;
        const pickMap = {
          chops: '#venue-chops',
          windjammer: '#venue-windjammer',
          cafe: '#venue-cafe',
          giovanni: '#venue-giovanni',
          izumi: '#venue-izumi',
          'main-dining': '#venue-main-dining',
        };
        const targetSelector = pickMap[deepLinkPick.toLowerCase()];
        if (!targetSelector) return;
        const target = document.querySelector(targetSelector);
        if (!target) return;

        const targetType = target.dataset.venueType || 'all';
        activeFilter = targetType;
        filterButtons.forEach((button) => {
          const isActive = (button.dataset.filter || '') === activeFilter;
          button.classList.toggle('is-active', isActive);
          button.setAttribute('aria-checked', String(isActive));
        });

        searchInput.value = '';
        updateDiningView();
        cards.forEach((card) => card.classList.remove('deck-card--context-pick'));
        target.classList.add('deck-card--context-pick');

        if (contextTitle && contextBody && contextAction && contextActionText) {
          contextTitle.textContent = "Tonight's Pick from Home";
          contextBody.textContent = 'Opened from dashboard shortcut with this venue preselected.';
          contextAction.setAttribute('href', targetSelector);
          contextActionText.textContent = `Jump to ${target.querySelector('h3')?.textContent || 'venue'}`;
        }

        window.requestAnimationFrame(() => {
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
      }

      function updateDiningView() {
        const term = searchInput.value.toLowerCase().trim();
        let visible = 0;

        searchStatus.classList.add('is-loading');
        searchStatus.textContent = 'Filtering dining options...';
        clearTimeout(searchTimer);
        searchTimer = window.setTimeout(() => {
          cards.forEach((card) => {
            const venueType = card.dataset.venueType || '';
            const searchableText = `${card.dataset.search || ''} ${card.textContent || ''}`.toLowerCase();
            const matchesFilter = activeFilter === 'all' || venueType === activeFilter;
            const matchesSearch = !term || searchableText.includes(term);
            const shouldShow = matchesFilter && matchesSearch;

            card.hidden = !shouldShow;
            card.style.display = shouldShow ? 'flex' : 'none';
            if (shouldShow) visible += 1;
          });

          searchStatus.textContent = `Showing ${visible} of ${total} venues`;
          searchStatus.classList.remove('is-loading');
          emptyState.hidden = visible !== 0;
          if (countChipValue) {
            countChipValue.textContent = String(visible);
          }
        }, SEARCH_DELAY_MS);
      }

      document.addEventListener('rccl:filter-change', function (event) {
        if (!event.detail || event.detail.group !== 'diningType') return;
        activeFilter = event.detail.value || 'all';
        filterButtons.forEach((item) => {
          item.classList.toggle('is-active', (item.dataset.filter || '') === activeFilter);
        });
        updateDiningView();
      });

      searchInput.addEventListener('input', updateDiningView);

      document.addEventListener('keydown', function (e) {
        if (e.key === '/' && e.target !== searchInput) {
          e.preventDefault();
          searchInput.focus();
        }
      });

      updateDiningView();
      applyDiningContext();
      applyPickFromDeepLink();

      document.addEventListener('rccl:mode-change', function () {
        applyDiningContext();
        if (deepLinkPick) applyPickFromDeepLink();
      });
    });
  </script>
</body>
</html>
