<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0">
  <meta name="theme-color" content="#49b5db">
  <title>Dining · Adventure of the Seas</title>

  <!-- Fonts + Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link rel="stylesheet" href="css/tokens.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/utilities.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/features.css">
  <link rel="stylesheet" href="css/mobile-first.css">
</head>
<body class="app-theme-rcc page-dining">
  <canvas id="ocean" width="375" height="609"></canvas>
  <div class="vignette" aria-hidden="true"></div>

  <!-- Header (same as index) -->
  <header>
    <div class="header-inner">
      <div class="brand" title="Cruise Hub">
        <i class="fas fa-crown" aria-hidden="true"></i>
        <div class="brand-text">
          <div class="brand-title">Adventure of the Seas</div>
          <div class="brand-sub">Rahe Family & Friends · Dining</div>
        </div>
      </div>
      <div class="spacer"></div>
      <span class="hdr-pill" id="sailPill" aria-label="Sail dates">
        <i class="fas fa-calendar-alt" aria-hidden="true"></i>
        Feb 14–20, 2026
      </span>
      <button class="hdr-iconbtn" id="menuBtn" type="button" aria-label="Open menu">
        <i class="fas fa-bars" aria-hidden="true"></i>
      </button>
    </div>
  </header>

  <!-- Main content -->
  <main>
    <!-- Hero -->
    <section class="dining-hero">
      <div class="dining-hero__eyebrow">Adventure of the Seas · Feb 14–20, 2026</div>
      <h1 class="dining-hero__title">Dining Planner</h1>
      <p class="dining-hero__subtitle">Compare included and specialty venues, then lock tonight's reservations in one pass.</p>
      <div>
        <span class="dining-hero__tag"><i class="fas fa-utensils"></i> Included plus specialty split</span>
        <span class="dining-hero__tag"><i class="fas fa-calendar-check"></i> Reservation pressure points</span>
        <span class="dining-hero__tag"><i class="fas fa-wine-glass"></i> Date-night and quick-bite picks</span>
      </div>
      <div class="dining-hero__actions">
        <a class="btn btn--primary" href="#reservations">Book tonight</a>
        <a class="btn" href="#included-group">Compare included venues</a>
      </div>
    </section>

    <!-- Search / filter bar -->
    <section class="dining-nav">
      <div class="dining-nav__inner">
        <div class="dining-nav__search">
          <label for="diningSearchInput" class="sr-only">Search dining venues</label>
          <i class="fas fa-search"></i>
          <input id="diningSearchInput" type="search" placeholder="Search restaurants, cuisines, hours, or deck">
          <span class="search-field-hint">Search by venue, cuisine, or deck</span>
        </div>
        <div class="dining-nav__filters">
          <button class="pill-btn is-active" data-filter="all">All</button>
          <button class="pill-btn" data-filter="included">Included</button>
          <button class="pill-btn" data-filter="specialty">Specialty</button>
          <a class="pill-btn" href="#reservations">Reservations</a>
        </div>
      </div>
      <p id="diningSearchStatus" class="search-status" role="status" aria-live="polite">Showing 6 of 6 venues</p>
    </section>

    <!-- Dynamic context panel (will be updated by JS) -->
    <section class="dining-context" id="diningContext">
      <div>
        <h2 class="dining-context__title" id="diningContextTitle">Boarding Day Dining Rhythm</h2>
        <p class="dining-context__body" id="diningContextBody">Use Windjammer earlier in the day, then lock a dinner slot before evening venue peaks.</p>
      </div>
      <a class="dining-context__action" id="diningContextAction" href="#venue-windjammer">
        <i class="fas fa-arrow-right"></i>
        <span id="diningContextActionText">Open Windjammer</span>
      </a>
    </section>

    <!-- Reservation snapshot -->
    <section id="reservations" class="reservation-panel">
      <div class="reservation-panel__header">
        <h2>Tonight Reservation Snapshot</h2>
        <p>Fast booking choices with the next useful action for each dining style.</p>
      </div>
      <div class="reservation-slots">
        <div class="reservation-slot">
          <h3>Earliest table</h3>
          <p>6:15 PM · Main Dining Room</p>
          <a href="#venue-main-dining">Review included options</a>
        </div>
        <div class="reservation-slot">
          <h3>Most requested</h3>
          <p>Chops Grille · Limited seats after 7:00 PM</p>
          <a href="#venue-chops">Book specialty dining</a>
        </div>
        <div class="reservation-slot">
          <h3>Last practical slot</h3>
          <p>8:45 PM · Specialty venues</p>
          <a href="#specialty-group">See late options</a>
        </div>
      </div>
    </section>

    <!-- Spotlight (will be updated by JS) -->
    <section class="dining-spotlight" id="diningSpotlight">
      <span class="dining-spotlight__eyebrow"><i class="fas fa-star"></i> Featured dining call</span>
      <h2 class="dining-spotlight__title" id="diningSpotlightTitle">Boarding Day Dining Rhythm</h2>
      <p class="dining-spotlight__body" id="diningSpotlightBody">Use Windjammer earlier in the day, then lock a dinner slot before evening venue peaks.</p>
      <a class="dining-spotlight__action" id="diningSpotlightAction" href="#venue-windjammer">
        <i class="fas fa-arrow-right"></i>
        <span id="diningSpotlightActionText">Open Windjammer</span>
      </a>
    </section>

    <!-- Dining venues grid -->
    <section class="deck-grid">
      <div class="deck-grid__header">
        <h2 class="deck-grid__title">Dining Overview</h2>
        <p class="deck-grid__subtitle">Tap a venue to see hours and reservation options.</p>
      </div>

      <div id="included-group" class="deck-group">
        <div class="deck-group__header">
          <h3>Included dining</h3>
          <p>Quick, no-reservation options for every meal.</p>
        </div>
        <div class="deck-cards" id="included-cards">
          <!-- Cards will be populated by JS, but we'll keep static structure for now -->
          <article id="venue-main-dining" class="deck-card" data-venue-type="included" data-search="main dining room included traditional seating decks 3 4 formal night family friendly 5:30 pm">
            <span class="venue-type">Included</span>
            <div class="deck-visual">
              <span class="deck-number">1</span>
              <img src="deck-plans/deck-12.png" alt="Main Dining Room" loading="lazy">
            </div>
            <div class="deck-info">
              <h3>Main Dining Room</h3>
              <div class="deck-meta">
                <span>Included</span>
                <span>Traditional seating</span>
                <span>Decks 3–4</span>
              </div>
              <div class="deck-highlights">
                <span>5:30 PM seating</span>
                <span>Formal night</span>
                <span>Family friendly</span>
                <span>Price: Included</span>
                <span>Allergens: Notify host stand</span>
              </div>
              <a class="deck-card__cta" href="itinerary.html">View menu timing</a>
            </div>
          </article>

          <article id="venue-windjammer" class="deck-card" data-venue-type="included" data-search="windjammer marketplace included buffet deck 11 breakfast dinner kids varied cuisines">
            <span class="venue-type">Included</span>
            <div class="deck-visual">
              <span class="deck-number">2</span>
              <img src="deck-plans/deck-12.png" alt="Windjammer" loading="lazy">
            </div>
            <div class="deck-info">
              <h3>Windjammer Marketplace</h3>
              <div class="deck-meta">
                <span>Included</span>
                <span>Buffet</span>
                <span>Deck 11</span>
              </div>
              <div class="deck-highlights">
                <span>Breakfast–Dinner</span>
                <span>Kids friendly</span>
                <span>Varied cuisines</span>
                <span>Price: Included</span>
                <span>Allergens: Label checks advised</span>
              </div>
              <a class="deck-card__cta" href="itinerary.html">See service hours</a>
            </div>
          </article>

          <article id="venue-cafe" class="deck-card" data-venue-type="included" data-search="cafe promenade included snacks coffee promenade 24 7 grab and go">
            <span class="venue-type">Included</span>
            <div class="deck-visual">
              <span class="deck-number">3</span>
              <img src="deck-plans/deck-12.png" alt="Café Promenade" loading="lazy">
            </div>
            <div class="deck-info">
              <h3>Café Promenade</h3>
              <div class="deck-meta">
                <span>Included</span>
                <span>Snacks & coffee</span>
                <span>Promenade</span>
              </div>
              <div class="deck-highlights">
                <span>24/7 snacks</span>
                <span>Specialty coffee</span>
                <span>Grab & go</span>
                <span>Price: Included</span>
                <span>Allergens: Ask ingredient list</span>
              </div>
              <a class="deck-card__cta" href="itinerary.html">View late-night options</a>
            </div>
          </article>
        </div>
      </div>

      <div id="specialty-group" class="deck-group">
        <div class="deck-group__header">
          <h3>Specialty dining</h3>
          <p>Reservation-friendly venues for a night out.</p>
        </div>
        <div class="deck-cards" id="specialty-cards">
          <article id="venue-chops" class="deck-card" data-venue-type="specialty" data-search="chops grille specialty steakhouse reservations dressy casual wine pairings prime cuts">
            <span class="venue-type venue-type--specialty">Specialty</span>
            <div class="deck-visual">
              <span class="deck-number">4</span>
              <img src="deck-plans/deck-12.png" alt="Chops Grille" loading="lazy">
            </div>
            <div class="deck-info">
              <h3>Chops Grille</h3>
              <div class="deck-meta">
                <span>Specialty</span>
                <span>Steakhouse</span>
                <span>Reservations</span>
              </div>
              <div class="deck-highlights">
                <span>Dressy casual</span>
                <span>Wine pairings</span>
                <span>Prime cuts</span>
                <span>Price: $$$ cover charge</span>
                <span>Cancellation: Before 2 PM</span>
              </div>
              <a class="deck-card__cta" href="#reservations">Book tonight</a>
            </div>
          </article>

          <article id="venue-giovanni" class="deck-card" data-venue-type="specialty" data-search="giovanni specialty italian trattoria reservations family style wine list house pastas">
            <span class="venue-type venue-type--specialty">Specialty</span>
            <div class="deck-visual">
              <span class="deck-number">5</span>
              <img src="deck-plans/deck-12.png" alt="Giovanni’s" loading="lazy">
            </div>
            <div class="deck-info">
              <h3>Giovanni’s</h3>
              <div class="deck-meta">
                <span>Specialty</span>
                <span>Italian trattoria</span>
                <span>Reservations</span>
              </div>
              <div class="deck-highlights">
                <span>Family style</span>
                <span>Wine list</span>
                <span>House pastas</span>
                <span>Price: $$ cover charge</span>
                <span>Cancellation: Before 2 PM</span>
              </div>
              <a class="deck-card__cta" href="#reservations">Book tonight</a>
            </div>
          </article>

          <article id="venue-izumi" class="deck-card" data-venue-type="specialty" data-search="izumi specialty sushi hibachi reservations hibachi show sushi bar omakase">
            <span class="venue-type venue-type--specialty">Specialty</span>
            <div class="deck-visual">
              <span class="deck-number">6</span>
              <img src="deck-plans/deck-12.png" alt="Izumi" loading="lazy">
            </div>
            <div class="deck-info">
              <h3>Izumi</h3>
              <div class="deck-meta">
                <span>Specialty</span>
                <span>Sushi & hibachi</span>
                <span>Reservations</span>
              </div>
              <div class="deck-highlights">
                <span>Hibachi show</span>
                <span>Sushi bar</span>
                <span>Omakase</span>
                <span>Price: $$-$$$ by experience</span>
                <span>Cancellation: Before 2 PM</span>
              </div>
              <a class="deck-card__cta" href="#reservations">Book tonight</a>
            </div>
          </article>
        </div>
      </div>

      <p id="diningSearchEmpty" class="search-empty" hidden>No dining venues match that search or filter yet.</p>
    </section>

    <!-- Policies cards -->
    <section class="deck-grid">
      <div class="deck-grid__header">
        <h2 class="deck-grid__title">Dining Policies</h2>
      </div>
      <div class="deck-cards">
        <article class="deck-card">
          <div class="deck-info">
            <h3>Specialty cancellation</h3>
            <div class="deck-highlights">
              <span>Cancel before 2:00 PM to avoid fee</span>
              <span>No-show charges apply after cutoff</span>
            </div>
          </div>
        </article>
        <article class="deck-card">
          <div class="deck-info">
            <h3>Dietary and allergy notes</h3>
            <div class="deck-highlights">
              <span>Add notes while booking</span>
              <span>Reconfirm with host on arrival</span>
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <!-- Back to top -->
  <button class="back-to-top" id="backToTop" aria-label="Back to top"><i class="fas fa-arrow-up"></i></button>

  <!-- Drawer menu -->
  <div class="drawer-backdrop" id="drawerBackdrop" aria-hidden="true">
    <aside class="drawer" role="dialog" aria-modal="true" aria-label="Menu">
      <div class="drawer-head">
        <h3>Navigate</h3>
        <button class="hdr-iconbtn" id="closeDrawerBtn" type="button" aria-label="Close menu">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <nav class="nav" aria-label="Primary navigation">
        <a href="index.html"><i class="fas fa-home"></i> Dashboard</a>
        <a href="itinerary.html"><i class="fas fa-route"></i> Itinerary</a>
        <a href="rooms.html"><i class="fas fa-bed"></i> Rooms</a>
        <a href="decks.html"><i class="fas fa-layer-group"></i> Decks</a>
        <a href="contacts.html"><i class="fas fa-phone"></i> Contacts</a>
        <a href="dining.html" class="active"><i class="fas fa-utensils"></i> Dining</a>
        <a href="operations.html"><i class="fas fa-list-check"></i> Checklist</a>
        <a href="tips.html"><i class="fas fa-lightbulb"></i> Tips</a>
      </nav>
    </aside>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite">
    <i class="fas fa-circle-check"></i>
    <span id="toastText">Copied</span>
  </div>

  <!-- Bottom nav (mobile) -->
  <div class="bottom-nav">
    <a href="index.html" class="bottom-nav__item"><i class="fas fa-home"></i><span>Home</span></a>
    <a href="itinerary.html" class="bottom-nav__item"><i class="fas fa-route"></i><span>Plan</span></a>
    <a href="rooms.html" class="bottom-nav__item"><i class="fas fa-bed"></i><span>Rooms</span></a>
    <a href="decks.html" class="bottom-nav__item"><i class="fas fa-ship"></i><span>Map</span></a>
    <button class="bottom-nav__item" id="moreBtnMobile"><i class="fas fa-ellipsis"></i><span>More</span></button>
  </div>

  <script>
    (function() {
      'use strict';

      // ---------- DOM elements ----------
      const menuBtn = document.getElementById('menuBtn');
      const drawerBackdrop = document.getElementById('drawerBackdrop');
      const closeDrawerBtn = document.getElementById('closeDrawerBtn');
      const backToTop = document.getElementById('backToTop');
      const toast = document.getElementById('toast');
      const toastText = document.getElementById('toastText');
      const moreBtnMobile = document.getElementById('moreBtnMobile');

      // ---------- Drawer ----------
      let lastFocus = null;
      function openDrawer() {
        lastFocus = document.activeElement;
        drawerBackdrop.classList.add('open');
        drawerBackdrop.setAttribute('aria-hidden', 'false');
        closeDrawerBtn.focus();
        document.body.style.overflow = 'hidden';
      }
      function closeDrawer() {
        drawerBackdrop.classList.remove('open');
        drawerBackdrop.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        if (lastFocus && typeof lastFocus.focus === 'function') lastFocus.focus();
      }
      menuBtn.addEventListener('click', openDrawer);
      closeDrawerBtn.addEventListener('click', closeDrawer);
      drawerBackdrop.addEventListener('click', (e) => {
        if (e.target === drawerBackdrop) closeDrawer();
      });

      // Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && drawerBackdrop.classList.contains('open')) closeDrawer();
      });

      // ---------- Back to top ----------
      window.addEventListener('scroll', () => {
        backToTop.classList.toggle('show', window.scrollY > 400);
      });
      backToTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

      // ---------- Mobile "More" button ----------
      moreBtnMobile.addEventListener('click', openDrawer);

      // ---------- Dining-specific JS (search, filter, context) ----------
      const searchInput = document.getElementById('diningSearchInput');
      const searchStatus = document.getElementById('diningSearchStatus');
      const emptyState = document.getElementById('diningSearchEmpty');
      const cards = Array.from(document.querySelectorAll('.deck-card[data-venue-type]'));
      const filterButtons = Array.from(document.querySelectorAll('.dining-nav__filters button[data-filter]'));
      const contextTitle = document.getElementById('diningContextTitle');
      const contextBody = document.getElementById('diningContextBody');
      const contextAction = document.getElementById('diningContextAction');
      const contextActionText = document.getElementById('diningContextActionText');
      const spotlightTitle = document.getElementById('diningSpotlightTitle');
      const spotlightBody = document.getElementById('diningSpotlightBody');
      const spotlightAction = document.getElementById('diningSpotlightAction');
      const spotlightActionText = document.getElementById('diningSpotlightActionText');
      const total = cards.length;
      let activeFilter = 'all';
      let searchTimer;
      const SEARCH_DELAY_MS = 120;

      // Context helper (simplified version of original)
      function getCruiseContext() {
        // In a real app you might read from global state; for demo we return static.
        return {
          title: 'Boarding Day Dining Rhythm',
          body: 'Use Windjammer earlier in the day, then lock a dinner slot before evening venue peaks.',
          target: '#venue-windjammer',
          actionLabel: 'Open Windjammer'
        };
      }

      function applyDiningContext() {
        const ctx = getCruiseContext();
        contextTitle.textContent = ctx.title;
        contextBody.textContent = ctx.body;
        contextAction.setAttribute('href', ctx.target);
        contextActionText.textContent = ctx.actionLabel;

        spotlightTitle.textContent = ctx.title;
        spotlightBody.textContent = ctx.body;
        spotlightAction.setAttribute('href', ctx.target);
        spotlightActionText.textContent = ctx.actionLabel;

        cards.forEach(c => c.classList.remove('deck-card--context-pick'));
        const target = document.querySelector(ctx.target);
        if (target) target.classList.add('deck-card--context-pick');
      }

      function updateDiningView() {
        const term = searchInput.value.toLowerCase().trim();
        let visible = 0;

        searchStatus.classList.add('is-loading');
        searchStatus.textContent = 'Filtering dining options...';
        clearTimeout(searchTimer);
        searchTimer = setTimeout(() => {
          cards.forEach(card => {
            const venueType = card.dataset.venueType || '';
            const searchableText = (card.dataset.search || '') + ' ' + card.textContent;
            const matchesFilter = activeFilter === 'all' || venueType === activeFilter;
            const matchesSearch = !term || searchableText.toLowerCase().includes(term);
            const shouldShow = matchesFilter && matchesSearch;

            card.hidden = !shouldShow;
            card.style.display = shouldShow ? 'flex' : 'none';
            if (shouldShow) visible += 1;
          });

          searchStatus.textContent = `Showing ${visible} of ${total} venues`;
          searchStatus.classList.remove('is-loading');
          if (emptyState) emptyState.hidden = visible !== 0;
        }, SEARCH_DELAY_MS);
      }

      // Filter buttons
      filterButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          filterButtons.forEach(b => {
            b.classList.remove('is-active');
            b.setAttribute('aria-checked', 'false');
          });
          btn.classList.add('is-active');
          btn.setAttribute('aria-checked', 'true');
          activeFilter = btn.dataset.filter || 'all';
          updateDiningView();
        });
      });

      // Search input
      searchInput.addEventListener('input', updateDiningView);

      // Keyboard shortcut: / to focus search
      document.addEventListener('keydown', (e) => {
        if (e.key === '/' && document.activeElement !== searchInput) {
          e.preventDefault();
          searchInput.focus();
        }
      });

      // Initial updates
      updateDiningView();
      applyDiningContext();

      // ---------- Ocean background (rich version from index) ----------
      const ocean = document.getElementById('ocean');
      const octx = ocean.getContext('2d');
      function resizeOcean() {
        ocean.width = window.innerWidth;
        ocean.height = window.innerHeight;
      }
      resizeOcean();
      window.addEventListener('resize', resizeOcean);

      let t = 0;
      function drawOcean() {
        octx.clearRect(0, 0, ocean.width, ocean.height);
        octx.fillStyle = '#071a2c';
        octx.fillRect(0, 0, ocean.width, ocean.height);

        // depth gradient
        const grad = octx.createLinearGradient(0, 0, 0, ocean.height);
        grad.addColorStop(0, 'rgba(10,46,74,.08)');
        grad.addColorStop(1, 'rgba(0,0,0,.22)');
        octx.fillStyle = grad;
        octx.fillRect(0, 0, ocean.width, ocean.height);

        // waves
        const waves = [
          { amp: 22, len: 0.010, y: 0.46, alpha: 0.11 },
          { amp: 30, len: 0.008, y: 0.54, alpha: 0.09 },
          { amp: 38, len: 0.006, y: 0.62, alpha: 0.07 },
        ];
        for (let i = 0; i < waves.length; i++) {
          const w = waves[i];
          octx.beginPath();
          const baseY = ocean.height * w.y;
          octx.moveTo(0, baseY);
          for (let x = 0; x <= ocean.width; x += 8) {
            const y = baseY + Math.sin(x * w.len + t * (0.8 + i * 0.15)) * w.amp;
            octx.lineTo(x, y);
          }
          octx.lineTo(ocean.width, ocean.height);
          octx.lineTo(0, ocean.height);
          octx.closePath();
          octx.fillStyle = `rgba(0,180,230,${w.alpha})`;
          octx.fill();

          // gold shimmer
          octx.beginPath();
          octx.moveTo(0, baseY - 16);
          for (let x = 0; x <= ocean.width; x += 10) {
            const y = (baseY - 16) + Math.sin(x * (w.len * 1.2) + t * (1.2 + i * 0.2)) * (w.amp * 0.22);
            octx.lineTo(x, y);
          }
          octx.strokeStyle = `rgba(255,215,64,${w.alpha * 0.38})`;
          octx.lineWidth = 1.2;
          octx.stroke();
        }
        t += 0.012;
        requestAnimationFrame(drawOcean);
      }
      drawOcean();
    })();
  </script>

  <noscript>
    <div style="padding:1rem; text-align:center; background:#ffd740; color:#0d2236; font-weight:900;">
      This page needs JavaScript enabled.
    </div>
  </noscript>

  <script src="js/global.js" defer></script>
  <script src="js/shared-layout.js" defer></script>
  <script src="js/decks.js" defer></script>
</body>
</html>