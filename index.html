<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  <meta name="theme-color" content="#0f172a">
  <title>üö¢ Cruise Companion</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --primary: #3b82f6;
      --primary-dark: #2563eb;
      --secondary: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --bg: #0f172a;
      --bg-alt: #111c33;
      --bg-card: #1e293b;
      --text: #f1f5f9;
      --text-muted: #94a3b8;
      --border: #334155;
      --shadow: rgba(0, 0, 0, 0.35);
      --radius: 14px;
      --radius-sm: 10px;
      --glass: rgba(15, 23, 42, 0.55);
      --glass-strong: rgba(15, 23, 42, 0.85);
      --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      font-size: clamp(14px, 1.6vw, 16px);
      overflow-x: hidden;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Loading */
    .loading {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.98);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      z-index: 999;
      transition: opacity 0.4s ease, visibility 0.4s ease;
    }

    .loading.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .spinner {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      border: 3px solid rgba(255, 255, 255, 0.2);
      border-top-color: var(--primary);
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Header */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(17, 28, 51, 0.96);
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: clamp(12px, 2vw, 18px) clamp(14px, 3vw, 24px);
      gap: 12px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: clamp(18px, 2.4vw, 22px);
      font-weight: 700;
    }

    .logo-icon {
      font-size: clamp(22px, 3vw, 28px);
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .header-chip {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.15);
      color: var(--primary);
      border: 1px solid rgba(59, 130, 246, 0.4);
      font-weight: 600;
      transition: var(--transition);
    }

    .header-chip:hover {
      transform: scale(1.05);
      background: rgba(59, 130, 246, 0.25);
    }

    /* Tabs */
    .tabs {
      display: flex;
      overflow-x: auto;
      padding: 0 clamp(12px, 3vw, 24px) 4px;
      gap: clamp(6px, 1.5vw, 10px);
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }

    .tabs::-webkit-scrollbar {
      display: none;
    }

    .tab {
      flex-shrink: 0;
      padding: clamp(10px, 1.6vw, 14px) clamp(12px, 2.2vw, 20px);
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: clamp(13px, 1.4vw, 15px);
      font-weight: 600;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: var(--transition);
      white-space: nowrap;
      position: relative;
      overflow: hidden;
    }

    .tab::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: var(--transition);
      transform: translateX(-50%);
    }

    .tab:hover::after {
      width: 100%;
    }

    .tab.active {
      color: var(--primary);
    }

    .tab.active::after {
      width: 100%;
    }

    .tab:focus-visible,
    .btn:focus-visible,
    .toc-item:focus-visible,
    .check-item:focus-visible {
      outline: 2px solid rgba(59, 130, 246, 0.7);
      outline-offset: 2px;
      border-radius: var(--radius-sm);
    }

    /* Layout */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: clamp(14px, 2.4vw, 28px);
    }

    .hero {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.18), rgba(139, 92, 246, 0.18));
      border: 1px solid rgba(59, 130, 246, 0.4);
      border-radius: var(--radius);
      padding: clamp(16px, 2.6vw, 26px);
      box-shadow: 0 20px 40px var(--shadow);
      animation: fadeInUp 0.6s ease-out;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .hero h1 {
      font-size: clamp(22px, 3vw, 32px);
      margin-bottom: 8px;
      line-height: 1.2;
    }

    .hero p {
      color: var(--text-muted);
      font-size: clamp(13px, 1.6vw, 16px);
      margin-bottom: 4px;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 20px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 12px 20px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      box-shadow: 0 12px 24px rgba(59, 130, 246, 0.35);
    }

    .btn-secondary {
      background: rgba(59, 130, 246, 0.15);
      color: var(--text);
      border: 1px solid rgba(59, 130, 246, 0.4);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      border: 1px dashed rgba(148, 163, 184, 0.4);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 32px rgba(15, 23, 42, 0.4);
    }

    .status-bar {
      margin-top: 24px;
      background: var(--glass);
      border: 1px solid rgba(59, 130, 246, 0.4);
      border-radius: var(--radius);
      padding: clamp(14px, 2vw, 20px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
      box-shadow: 0 16px 32px var(--shadow);
      animation: fadeInUp 0.6s ease-out 0.1s both;
    }

    .status-title {
      font-size: clamp(15px, 2vw, 18px);
      font-weight: 600;
      margin-bottom: 8px;
    }

    .status-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 8px;
      min-width: 180px;
    }

    .status-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      background: rgba(16, 185, 129, 0.18);
      color: #6ee7b7;
      border: 1px solid rgba(16, 185, 129, 0.45);
    }

    .info-grid {
      display: grid;
      gap: clamp(12px, 2vw, 20px);
      margin-top: 24px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    .info-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: clamp(16px, 2vw, 24px);
      box-shadow: 0 12px 24px var(--shadow);
      transition: var(--transition);
    }

    .info-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 40px var(--shadow);
      border-color: rgba(59, 130, 246, 0.6);
    }

    .info-card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .info-icon {
      width: clamp(36px, 5vw, 44px);
      height: clamp(36px, 5vw, 44px);
      border-radius: 12px;
      background: rgba(59, 130, 246, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(18px, 2.2vw, 22px);
      transition: var(--transition);
    }

    .info-card:hover .info-icon {
      transform: scale(1.1) rotate(5deg);
    }

    .info-value {
      font-size: clamp(18px, 2.2vw, 22px);
      font-weight: 700;
      margin-bottom: 4px;
    }

    .info-subtitle {
      color: var(--text-muted);
      font-size: clamp(13px, 1.4vw, 15px);
      line-height: 1.4;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: clamp(12px, 2vw, 20px);
      margin: 28px 0 16px;
    }

    .stat-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: clamp(16px, 2vw, 24px);
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: var(--transition);
    }

    .stat-card:hover {
      transform: translateY(-2px);
      border-color: rgba(59, 130, 246, 0.6);
    }

    .stat-value {
      font-size: clamp(24px, 2.8vw, 32px);
      font-weight: 700;
      color: var(--primary);
    }

    .stat-label {
      font-size: clamp(12px, 1.3vw, 14px);
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .section-title {
      margin: 32px 0 20px;
      font-size: clamp(20px, 2.4vw, 26px);
      display: flex;
      align-items: center;
      gap: 12px;
      padding-bottom: 12px;
      border-bottom: 2px solid rgba(59, 130, 246, 0.2);
    }

    .content-section {
      margin-bottom: 32px;
      animation: fadeInUp 0.4s ease-out;
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(10px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    .content-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: clamp(18px, 2vw, 24px);
      margin-bottom: 20px;
      box-shadow: 0 14px 30px var(--shadow);
      transition: var(--transition);
    }

    .content-card:hover {
      box-shadow: 0 20px 40px var(--shadow);
    }

    .content-card h3 {
      font-size: clamp(16px, 2vw, 20px);
      margin-bottom: 12px;
      color: var(--primary);
    }

    .content-card p {
      color: var(--text-muted);
      font-size: clamp(14px, 1.6vw, 16px);
      margin-bottom: 12px;
      line-height: 1.6;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 600;
      background: rgba(59, 130, 246, 0.18);
      color: var(--primary);
      border: 1px solid rgba(59, 130, 246, 0.4);
      transition: var(--transition);
    }

    .pill.critical {
      background: rgba(239, 68, 68, 0.18);
      color: #fca5a5;
      border-color: rgba(239, 68, 68, 0.45);
    }

    .pill.warn {
      background: rgba(245, 158, 11, 0.18);
      color: #facc15;
      border-color: rgba(245, 158, 11, 0.4);
    }

    .pill.info {
      background: rgba(16, 185, 129, 0.18);
      color: #6ee7b7;
      border-color: rgba(16, 185, 129, 0.4);
    }

    .toc-list {
      display: grid;
      gap: 12px;
      margin-top: 16px;
    }

    .toc-item {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: clamp(14px, 1.6vw, 18px) clamp(16px, 2vw, 20px);
      font-size: clamp(14px, 1.6vw, 16px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      cursor: pointer;
      transition: var(--transition);
      text-align: left;
      color: inherit;
      font-family: inherit;
      position: relative;
      overflow: hidden;
    }

    .toc-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 4px;
      height: 100%;
      background: var(--primary);
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }

    .toc-item:hover::before {
      transform: scaleY(1);
    }

    .toc-item:hover {
      border-color: rgba(59, 130, 246, 0.6);
      background: rgba(30, 41, 59, 0.8);
      transform: translateX(4px);
    }

    .toc-item span {
      color: var(--text-muted);
      font-size: clamp(12px, 1.3vw, 14px);
      text-align: right;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: clamp(13px, 1.4vw, 15px);
      margin-top: 16px;
    }

    .data-table th,
    .data-table td {
      border-bottom: 1px solid var(--border);
      padding: 14px 12px;
      text-align: left;
      vertical-align: middle;
    }

    .data-table tr:last-child td {
      border-bottom: none;
    }

    .data-table th {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      font-weight: 600;
      background: rgba(30, 41, 59, 0.5);
    }

    .data-table tr:hover {
      background: rgba(59, 130, 246, 0.05);
    }

    .timeline {
      display: grid;
      gap: clamp(12px, 2vw, 20px);
    }

    .timeline-item {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: clamp(16px, 2vw, 24px);
      position: relative;
      transition: var(--transition);
    }

    .timeline-item:hover {
      border-color: var(--primary);
      transform: translateX(4px);
    }

    .timeline-item.active {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2), 0 20px 40px var(--shadow);
    }

    .timeline-item.active::before {
      content: '';
      position: absolute;
      left: -6px;
      top: 50%;
      transform: translateY(-50%);
      width: 12px;
      height: 12px;
      background: var(--primary);
      border-radius: 50%;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
    }

    .timeline-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .timeline-day {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .day-badge {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .timeline-status {
      font-size: 13px;
      color: var(--text-muted);
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .timeline-port {
      font-size: clamp(16px, 2vw, 20px);
      font-weight: 600;
      margin-bottom: 8px;
    }

    .timeline-time {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: clamp(13px, 1.4vw, 15px);
      color: var(--text-muted);
      margin-top: 8px;
    }

    .badge-grid {
      display: grid;
      gap: clamp(10px, 1.6vw, 16px);
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    .badge-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: clamp(12px, 1.6vw, 16px) clamp(14px, 2vw, 20px);
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(30, 41, 59, 0.5);
      font-size: clamp(13px, 1.4vw, 15px);
      transition: var(--transition);
    }

    .badge-row:hover {
      border-color: rgba(59, 130, 246, 0.6);
      background: rgba(30, 41, 59, 0.7);
      transform: translateY(-1px);
    }

    .paths-grid {
      display: grid;
      gap: clamp(12px, 2vw, 20px);
      margin-top: 16px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    .path-card {
      background: rgba(15, 23, 42, 0.65);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: clamp(14px, 2vw, 20px);
      font-size: clamp(13px, 1.4vw, 15px);
      transition: var(--transition);
      height: 100%;
    }

    .path-card:hover {
      border-color: rgba(59, 130, 246, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 12px 24px var(--shadow);
    }

    .path-card h4 {
      margin-bottom: 10px;
      font-size: clamp(14px, 1.7vw, 16px);
      color: var(--primary);
      font-weight: 600;
    }

    .callout {
      padding: clamp(16px, 2vw, 24px);
      border-radius: 12px;
      border: 1px solid rgba(59, 130, 246, 0.4);
      background: rgba(59, 130, 246, 0.15);
      font-size: clamp(14px, 1.6vw, 16px);
      color: var(--text);
      margin-top: 24px;
      position: relative;
      overflow: hidden;
    }

    .callout::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(59, 130, 246, 0.1), transparent);
    }

    .legend {
      display: grid;
      gap: clamp(10px, 1.4vw, 16px);
      margin-top: 16px;
      font-size: clamp(13px, 1.4vw, 15px);
    }

    .legend-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      border-radius: 10px;
      background: rgba(30, 41, 59, 0.3);
    }

    .overview-grid {
      display: grid;
      gap: clamp(12px, 2vw, 24px);
      margin-top: 24px;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    .action-card {
      background: var(--glass-strong);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: 180px;
      box-shadow: 0 12px 24px var(--shadow);
      transition: var(--transition);
      height: 100%;
    }

    .action-card:hover {
      border-color: rgba(59, 130, 246, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 20px 40px var(--shadow);
    }

    .action-card h3 {
      font-size: clamp(16px, 2vw, 20px);
      color: var(--primary);
    }

    .action-card p {
      color: var(--text-muted);
      font-size: clamp(13px, 1.4vw, 15px);
      line-height: 1.5;
      flex-grow: 1;
    }

    .checklist {
      display: grid;
      gap: 12px;
      margin-top: 8px;
    }

    .check-item {
      display: flex;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 12px;
      border: 1px solid rgba(59, 130, 246, 0.25);
      background: rgba(15, 23, 42, 0.55);
      align-items: flex-start;
      transition: var(--transition);
    }

    .check-item[data-action] {
      cursor: pointer;
    }

    .check-item[data-action]:hover {
      transform: translateY(-2px);
      border-color: rgba(59, 130, 246, 0.6);
      background: rgba(15, 23, 42, 0.75);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .check-icon {
      width: 32px;
      height: 32px;
      border-radius: 10px;
      background: rgba(59, 130, 246, 0.2);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
      transition: var(--transition);
    }

    .check-item:hover .check-icon {
      transform: scale(1.1);
      background: rgba(59, 130, 246, 0.3);
    }

    .check-text {
      flex-grow: 1;
    }

    .check-text small {
      display: block;
      color: var(--text-muted);
      font-size: 12px;
      margin-top: 4px;
      line-height: 1.4;
    }

    .quick-jump {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--primary);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      padding: 8px 12px;
      border-radius: 8px;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid transparent;
    }

    .quick-jump:hover {
      background: rgba(59, 130, 246, 0.2);
      border-color: rgba(59, 130, 246, 0.3);
      transform: translateX(4px);
    }

    .quick-jump::after {
      content: '‚Üí';
      transition: transform 0.2s ease;
    }

    .quick-jump:hover::after {
      transform: translateX(4px);
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      .hero-actions {
        flex-direction: column;
        align-items: stretch;
      }
      
      .btn {
        justify-content: center;
        width: 100%;
      }
      
      .status-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .status-meta {
        align-items: stretch;
        text-align: left;
      }
      
      .toc-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      
      .toc-item span {
        text-align: left;
      }
      
      .data-table {
        display: block;
        overflow-x: auto;
      }
      
      .timeline-item.active::before {
        display: none;
      }
    }

    /* Print styles */
    @media print {
      .hero-actions,
      .tabs,
      .loading {
        display: none !important;
      }
      
      .tab-content {
        display: block !important;
      }
      
      body {
        background: white;
        color: black;
      }
      
      .content-card {
        break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <div class="loading" id="loading">
    <div class="spinner"></div>
    <div>Loading your cruise manual...</div>
  </div>

  <header class="header">
    <div class="header-top">
      <div class="logo">
        <span class="logo-icon">üö¢</span>
        <span>Cruise Companion</span>
      </div>
      <div class="header-chip">Adventure of the Seas</div>
    </div>
    <div class="tabs" role="tablist" aria-label="Cruise sections">
      <button class="tab active" id="tab-overview" data-tab="overview" role="tab" aria-selected="true" aria-controls="overview-content" tabindex="0">
        <i class="fas fa-home"></i> Overview
      </button>
      <button class="tab" id="tab-manual" data-tab="manual" role="tab" aria-selected="false" aria-controls="manual-content" tabindex="-1">
        <i class="fas fa-book"></i> Manual
      </button>
      <button class="tab" id="tab-itinerary" data-tab="itinerary" role="tab" aria-selected="false" aria-controls="itinerary-content" tabindex="-1">
        <i class="fas fa-calendar-alt"></i> Itinerary
      </button>
      <button class="tab" id="tab-addendum" data-tab="addendum" role="tab" aria-selected="false" aria-controls="addendum-content" tabindex="-1">
        <i class="fas fa-file-alt"></i> Addendum
      </button>
    </div>
  </header>

  <div class="container">
    <div class="tab-content active" id="overview-content" role="tabpanel" aria-labelledby="tab-overview">
      <div class="hero">
        <h1>The Family and Friends Cruise Companion: Unabridged Operations Manual</h1>
        <p>Adventure of the Seas ‚Ä¢ February 14‚Äì20, 2026 ‚Ä¢ Western Caribbean & Perfect Day</p>
        <div class="hero-actions">
          <button class="btn btn-primary" data-action="manual">
            <i class="fas fa-clipboard-list"></i> Open the manual
          </button>
          <button class="btn btn-secondary" data-action="itinerary">
            <i class="fas fa-route"></i> View itinerary
          </button>
          <button class="btn btn-ghost" data-action="addendum">
            <i class="fas fa-shield-heart"></i> Emergency addendum
          </button>
        </div>
      </div>

      <div class="status-bar">
        <div>
          <div class="status-title">Next critical moment</div>
          <p>Online check-in opens ~45 days before sailing. Target the earliest arrival window for smooth embarkation.</p>
        </div>
        <div class="status-meta">
          <span class="status-chip">Action window</span>
          <strong>Mid-Dec 2025</strong>
          <button class="quick-jump" data-action="manual">Prep docs & photo IDs early</button>
        </div>
      </div>

      <div class="info-grid">
        <div class="info-card">
          <div class="info-card-header">
            <div class="info-icon">üõ≥Ô∏è</div>
            <div>Your Ship</div>
          </div>
          <div class="info-value">Adventure of the Seas</div>
          <div class="info-subtitle">Primary hub: Deck 6 Aft (Staterooms 6650, 6651)</div>
        </div>
        <div class="info-card">
          <div class="info-card-header">
            <div class="info-icon">üìç</div>
            <div>Route</div>
          </div>
          <div class="info-value">Western Caribbean Loop</div>
          <div class="info-subtitle">Grand Cayman, Falmouth & Perfect Day at CocoCay</div>
        </div>
      </div>

      <div class="stats">
        <div class="stat-card">
          <div class="stat-value" id="days-until">0</div>
          <div class="stat-label">Days Until Cruise</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">6</div>
          <div class="stat-label">Total Guests</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">3</div>
          <div class="stat-label">Linked Bookings</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">2</div>
          <div class="stat-label">Muster Stations</div>
        </div>
      </div>

      <div class="overview-grid" id="overview-actions" aria-live="polite"></div>

      <template id="overview-action-template">
        <div class="action-card">
          <h3></h3>
          <p></p>
          <div class="checklist"></div>
        </div>
      </template>

      <h2 class="section-title"><i class="fas fa-compass"></i> Table of Contents</h2>
      <div class="toc-list">
        <button class="toc-item" data-target="pre-cruise">
          Pre-Cruise Command Center 
          <span>Guest manifest, itinerary, tasks</span>
        </button>
        <button class="toc-item" data-target="embarkation">
          Embarkation Day: Golden Hour 
          <span>Minute-by-minute protocol</span>
        </button>
        <button class="toc-item" data-target="fundamentals">
          Ship Fundamentals & Daily Rhythm 
          <span>Deck strategy + daily beat</span>
        </button>
        <button class="toc-item" data-target="navigator">
          The Daily Navigator 
          <span>Flexible paths for each day</span>
        </button>
        <button class="toc-item" data-target="ports">
          Port Playbook 
          <span>Grand Cayman, Falmouth, CocoCay</span>
        </button>
        <button class="toc-item" data-target="dining">
          Dining & Specialty Strategy 
          <span>3-night plan + venues</span>
        </button>
        <button class="toc-item" data-target="logistics">
          Finance, Communication & Logistics 
          <span>Money, Wi-Fi, luggage</span>
        </button>
        <button class="toc-item" data-target="debarkation">
          Debarkation & Return to Reality 
          <span>Final night + morning</span>
        </button>
        <button class="toc-item" data-target="addendum-section">
          Addendum X 
          <span>Failure modes & contingencies</span>
        </button>
      </div>

      <h2 class="section-title"><i class="fas fa-bolt"></i> Emoji Legend</h2>
      <div class="content-card">
        <div class="legend">
          <div class="legend-item">
            <span class="pill critical">üî¥ Critical</span>
            Must be on time / affects safety or major plans.
          </div>
          <div class="legend-item">
            <span class="pill warn">üü° Recommended</span>
            Enhances experience but not mandatory.
          </div>
          <div class="legend-item">
            <span class="pill info">üü¢ Informational</span>
            Helpful tips and reminders.
          </div>
        </div>
      </div>
    </div>

    <div class="tab-content" id="manual-content" role="tabpanel" aria-labelledby="tab-manual">
      <!-- Manual content sections remain the same but with improved IDs -->
      <section class="content-section" id="pre-cruise">
        <h2 class="section-title"><i class="fas fa-clipboard-list"></i> 1. Pre-Cruise Command Center</h2>
        <div class="content-card">
          <h3>1.1 Guest Manifest & Core Data</h3>
          <p><strong>Primary Booking (4519230):</strong> Stateroom 6650 (Deck 6, Aft) ‚Ä¢ Guests: William, Melissa, Declan, Owen ‚Ä¢ Muster Station: D22</p>
          <p><strong>Secondary Booking (6788946):</strong> Stateroom 6651 (Deck 6, Aft) ‚Ä¢ Guest: Amy Abel ‚Ä¢ Muster Station: D22</p>
          <p><strong>Tertiary Booking (4352113):</strong> Stateroom 8528 (Deck 8, Forward-Mid) ‚Ä¢ Guest: Karin Aimee ‚Ä¢ Muster Station: A2</p>
        </div>
        <!-- Rest of manual content remains the same -->
      </section>
      
      <!-- Other sections with appropriate IDs -->
      <section class="content-section" id="addendum-section">
        <h2 class="section-title"><i class="fas fa-shield-heart"></i> Addendum X ‚Äî Failure Modes & Contingencies</h2>
        <!-- Addendum content -->
      </section>
    </div>

    <div class="tab-content" id="itinerary-content" role="tabpanel" aria-labelledby="tab-itinerary">
      <div class="timeline" id="timeline"></div>
    </div>

    <div class="tab-content" id="addendum-content" role="tabpanel" aria-labelledby="tab-addendum">
      <!-- Addendum content from manual section -->
      <section class="content-section" id="addendum-copy">
        <h2 class="section-title"><i class="fas fa-shield-heart"></i> Addendum X ‚Äî Failure Modes, Contingencies & Force Multipliers</h2>
        <div class="content-card">
          <p>Purpose: Covers health, weather, kids, fatigue, human error, and ship quirks. Read once. Use rarely. Appreciate silently.</p>
        </div>
        <div class="content-card">
          <h3>X1) Medical & Health Contingency Protocol</h3>
          <p><strong>Medical Center:</strong> Deck 4 forward. Hours posted daily; 24-hour emergency availability. Charges go to SeaPass.</p>
          <div class="badge-grid">
            <div class="badge-row"><span>Minor issue</span><span>‚Üí Treat in cabin, reassess in 30‚Äì60 minutes</span></div>
            <div class="badge-row"><span>Moderate issue</span><span>‚Üí One adult to Medical, one with kids, Concierge notified</span></div>
            <div class="badge-row"><span>Serious issue</span><span>‚Üí Call ship emergency number immediately</span></div>
          </div>
          <p><strong>Medication Safeguard:</strong> Split critical meds across two carry-ons. Never keep all meds in one cabin.</p>
        </div>
        <div class="content-card">
          <h3>X2) Weather & Sea-State Adaptation Logic</h3>
          <p><strong>If CocoCay is windy/overcast:</strong> Shade > chairs > water. Poolside + Snack Shack beats beach frustration. Accept a half-day win.</p>
          <p><strong>If tendering delayed (Grand Cayman):</strong> Ship excursions go first. Independent plans shift morning ‚Üí afternoon without negotiation.</p>
        </div>
      </section>
      <div class="callout">
        With this manual, you are fully prepared. Enjoy the cruise. Trust the plan. Live beyond it. üö¢ Bon Voyage!
      </div>
    </div>
  </div>

  <script>
    const overviewActions = [
      {
        title: 'Today‚Äôs Focus',
        description: 'Keep the high-impact items visible so nothing critical slips.',
        items: [
          {
            icon: '1',
            text: 'Link all bookings in the Royal App.',
            detail: 'Use booking IDs 4519230, 6788946, 4352113.'
          },
          {
            icon: '2',
            text: 'Confirm passports are valid through Aug 2026.',
            detail: 'Print SetSail passes and luggage tags.'
          }
        ]
      },
      {
        title: 'Embarkation Flow',
        description: 'Follow the Golden Hour protocol for a calm first hour onboard.',
        items: [
          {
            icon: '10:30',
            text: 'Arrive at the terminal with docs in hand.',
            detail: 'Use porters + keep carry-ons light.'
          },
          {
            icon: '12:10',
            text: 'Book priority dining & shows immediately.',
            detail: 'Concierge handles app + confirmations.'
          }
        ]
      },
      {
        title: 'Helpful Shortcuts',
        description: 'Jump directly to the sections you\'ll use the most.',
        items: [
          {
            icon: 'üìò',
            text: 'Pre-cruise command center.',
            detail: 'Guests, tasks, and bookings.',
            action: 'manual',
            target: 'pre-cruise'
          },
          {
            icon: 'üß≠',
            text: 'Daily itinerary timeline.',
            detail: 'Ports, arrivals, and departures.',
            action: 'itinerary'
          }
        ]
      }
    ];

    const cruiseData = {
      sailDate: '2026-02-14',
      days: [
        { day: 1, port: 'Port Canaveral', arrive: '‚Äî', depart: '16:00', status: 'Embarkation' },
        { day: 2, port: 'At Sea', arrive: '‚Äî', depart: '‚Äî', status: 'Sailing' },
        { day: 3, port: 'George Town, Grand Cayman', arrive: '10:30', depart: '18:00', status: 'Tender Port' },
        { day: 4, port: 'Falmouth, Jamaica', arrive: '08:00', depart: '17:00', status: 'Port' },
        { day: 5, port: 'At Sea', arrive: '‚Äî', depart: '‚Äî', status: 'Sailing' },
        { day: 6, port: 'Perfect Day at CocoCay', arrive: '07:00', depart: '17:00', status: 'Port' },
        { day: 7, port: 'Port Canaveral', arrive: '07:00', depart: '‚Äî', status: 'Disembarkation' }
      ]
    };

    function updateCountdown() {
      const today = new Date();
      const sail = new Date(cruiseData.sailDate);
      const diff = Math.ceil((sail - today) / (1000 * 60 * 60 * 24));
      const countdownElement = document.getElementById('days-until');
      if (countdownElement) {
        countdownElement.textContent = diff > 0 ? diff : '0';
      }
    }

    function renderTimeline() {
      const timeline = document.getElementById('timeline');
      if (!timeline) return;

      const today = new Date();
      const sailDate = new Date(cruiseData.sailDate);
      const cruiseStartDay = 1;
      const activeDay = cruiseStartDay;

      timeline.innerHTML = cruiseData.days.map(day => `
        <div class="timeline-item ${day.day === activeDay ? 'active' : ''}">
          <div class="timeline-header">
            <div class="timeline-day">
              <span class="day-badge">${day.day}</span>
              Day ${day.day}
            </div>
            <span class="timeline-status">${day.status}</span>
          </div>
          <div class="timeline-port">${day.port}</div>
          <div class="timeline-time">
            <i class="fas fa-clock"></i>
            ${day.arrive === '‚Äî' ? 'All day' : `${day.arrive} - ${day.depart}`}
          </div>
        </div>
      `).join('');
    }

    function renderOverviewActions() {
      const grid = document.getElementById('overview-actions');
      const template = document.getElementById('overview-action-template');
      if (!grid || !template) return;

      grid.innerHTML = '';

      overviewActions.forEach((section) => {
        const cardFragment = template.content.cloneNode(true);
        const title = cardFragment.querySelector('h3');
        const description = cardFragment.querySelector('p');
        const checklist = cardFragment.querySelector('.checklist');

        title.textContent = section.title;
        description.textContent = section.description;

        section.items.forEach((item) => {
          const checkItem = document.createElement('div');
          checkItem.className = 'check-item';
          if (item.action) {
            checkItem.dataset.action = item.action;
          }
          if (item.target) {
            checkItem.dataset.target = item.target;
          }

          const icon = document.createElement('span');
          icon.className = 'check-icon';
          icon.textContent = item.icon;

          const text = document.createElement('div');
          text.className = 'check-text';
          text.innerHTML = `<strong>${item.text}</strong>`;

          if (item.detail) {
            const detail = document.createElement('small');
            detail.textContent = item.detail;
            text.appendChild(detail);
          }

          checkItem.appendChild(icon);
          checkItem.appendChild(text);
          checklist.appendChild(checkItem);
        });

        grid.appendChild(cardFragment);
      });
    }

    function switchTab(tabName) {
      // Update tabs
      document.querySelectorAll('.tab').forEach(tab => {
        const isActive = tab.dataset.tab === tabName;
        tab.classList.toggle('active', isActive);
        tab.setAttribute('aria-selected', isActive);
        tab.setAttribute('tabindex', isActive ? '0' : '-1');
      });

      // Update content
      document.querySelectorAll('.tab-content').forEach(section => {
        const isActive = section.id === `${tabName}-content`;
        section.classList.toggle('active', isActive);
        if (isActive) {
          section.setAttribute('aria-hidden', 'false');
        } else {
          section.setAttribute('aria-hidden', 'true');
        }
      });

      // Scroll to top of content
      const activeContent = document.getElementById(`${tabName}-content`);
      if (activeContent) {
        setTimeout(() => {
          activeContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
      }
    }

    function navigateToSection(sectionId, tab = 'manual') {
      switchTab(tab);
      setTimeout(() => {
        const target = document.getElementById(sectionId);
        if (target) {
          target.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start',
            inline: 'nearest'
          });
          // Add visual feedback
          target.style.animation = 'none';
          setTimeout(() => {
            target.style.animation = 'fadeInUp 0.6s ease-out';
          }, 10);
        }
      }, 200);
    }

    function initTabs() {
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', (e) => {
          e.preventDefault();
          switchTab(tab.dataset.tab);
        });
        
        tab.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            switchTab(tab.dataset.tab);
          }
        });
      });
    }

    function initQuickActions() {
      document.querySelectorAll('[data-action]').forEach(action => {
        if (!['BUTTON', 'A'].includes(action.tagName)) {
          action.setAttribute('tabindex', '0');
          action.setAttribute('role', 'button');
        }

        action.addEventListener('click', () => {
          const tab = action.dataset.action;
          const target = action.dataset.target;
          
          if (target) {
            navigateToSection(target, tab);
          } else if (tab) {
            switchTab(tab);
          }
        });

        action.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            action.click();
          }
        });
      });
    }

    function initTOC() {
      document.querySelectorAll('[data-target]').forEach(item => {
        item.addEventListener('click', () => {
          navigateToSection(item.dataset.target);
        });
      });
    }

    function initLoading() {
      const loading = document.getElementById('loading');
      if (!loading) return;

      // Simulate loading time
      setTimeout(() => {
        loading.classList.add('hidden');
        document.body.style.overflow = 'auto';
      }, 800);

      // Fallback in case load event doesn't fire
      window.addEventListener('load', () => {
        setTimeout(() => {
          loading.classList.add('hidden');
          document.body.style.overflow = 'auto';
        }, 500);
      });
    }

    function initScrollSpy() {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Update active TOC item
            const id = entry.target.id;
            const tocItem = document.querySelector(`[data-target="${id}"]`);
            if (tocItem) {
              document.querySelectorAll('.toc-item').forEach(item => {
                item.classList.remove('active');
              });
              tocItem.classList.add('active');
            }
          }
        });
      }, {
        rootMargin: '-20% 0px -70% 0px',
        threshold: 0.1
      });

      // Observe all manual sections
      document.querySelectorAll('.content-section').forEach(section => {
        observer.observe(section);
      });
    }

    function init() {
      updateCountdown();
      renderOverviewActions();
      renderTimeline();
      initTabs();
      initQuickActions();
      initTOC();
      initLoading();
      initScrollSpy();

      // Update countdown every hour
      setInterval(updateCountdown, 3600000);
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>