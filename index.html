<!DOCTYPE html>
<html lang="en" class="theme--dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <title>ðŸš¢ Cruise Companion â€” Mission Control 2.0</title>
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Loading Screen -->
  <div class="loading" id="loading">
    <div class="loading-spinner"></div>
  </div>
  
  <!-- Background Elements -->
  <div class="stars" aria-hidden="true"></div>
  <div class="ocean-waves" aria-hidden="true"></div>
  <div class="progress" id="progress"></div>

  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <header class="sidebar__header">
        <div class="logo" aria-hidden="true">ðŸš¢</div>
        <div>
          <div class="sidebar__title text-gradient">Family & Friends Cruise Companion</div>
          <div class="sidebar__subtitle">Mission Control 2.0 Â· Enhanced & Immersive</div>
        </div>
      </header>

      <section class="sidebar__section" aria-labelledby="search-section">
        <div class="sidebar__section-header">
          <h2 id="search-section"><i class="fas fa-search"></i> Search</h2>
          <kbd>Ctrl/âŒ˜K</kbd>
        </div>
        <div class="sidebar__section-body">
          <div class="search" role="search">
            <i class="search__icon fas fa-search"></i>
            <input id="search-input" class="search__input" type="search"
                   placeholder="Search: muster, tender, CocoCay, diningâ€¦"
                   aria-label="Search the manual">
          </div>

          <div class="search-meta">
            <span class="pill"><i class="fas fa-bullseye"></i> <span id="search-count">0</span> hits</span>
            <span class="pill"><i class="fas fa-arrow-right"></i> <span id="search-pos">0/0</span></span>
          </div>

          <div class="button-row">
            <button id="open-palette" class="button button--primary" type="button">
              <span class="button__icon">âŒ˜</span> Command Palette
            </button>
            <button id="print-btn" class="button" type="button">
              <span class="button__icon"><i class="fas fa-print"></i></span> Print/PDF
            </button>
          </div>
          <div class="button-row">
            <button id="jump-today" class="button" type="button">
              <span class="button__icon"><i class="fas fa-calendar-day"></i></span> Today
            </button>
            <button id="toggle-theme" class="button" type="button">
              <span class="button__icon"><i class="fas fa-adjust"></i></span> Theme
            </button>
          </div>
        </div>
      </section>

      <section class="sidebar__section" aria-labelledby="filters-section">
        <div class="sidebar__section-header">
          <h2 id="filters-section"><i class="fas fa-filter"></i> Filters</h2>
          <kbd>Enter</kbd>
        </div>
        <div class="sidebar__section-body">
          <div class="filters">
            <label class="filter"><input type="checkbox" id="filter-crit" checked><span>ðŸ”´</span><span class="filter__label">Critical</span></label>
            <label class="filter"><input type="checkbox" id="filter-warn" checked><span>ðŸŸ¡</span><span class="filter__label">Recommended</span></label>
            <label class="filter"><input type="checkbox" id="filter-ok" checked><span>ðŸŸ¢</span><span class="filter__label">Info</span></label>
            <label class="filter"><input type="checkbox" id="filter-info" checked><span>ðŸ”µ</span><span class="filter__label">Secondary</span></label>
          </div>

          <label class="toggle">
            <input type="checkbox" id="focus-mode">
            <span class="toggle__slider"></span>
            <span class="toggle__label">Focus mode (tasks only)</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="effects-mode">
            <span class="toggle__slider"></span>
            <span class="toggle__label">Performance mode (reduce effects)</span>
          </label>

          <div class="button-row">
            <button id="expand-all" class="button" type="button"><span class="button__icon"><i class="fas fa-expand-alt"></i></span> Expand</button>
            <button id="collapse-all" class="button" type="button"><span class="button__icon"><i class="fas fa-compress-alt"></i></span> Collapse</button>
          </div>
        </div>
      </section>

      <nav class="sidebar__section" aria-labelledby="toc-section">
        <div class="sidebar__section-header">
          <h2 id="toc-section"><i class="fas fa-list"></i> Contents</h2>
          <kbd>click</kbd>
        </div>
        <div class="sidebar__section-body">
          <ul class="toc" id="toc" aria-label="Table of contents"></ul>
        </div>
      </nav>

      <section class="sidebar__section" aria-labelledby="legend-section">
        <div class="sidebar__section-header">
          <h2 id="legend-section"><i class="fas fa-key"></i> Legend</h2>
          <kbd>tap</kbd>
        </div>
        <div class="sidebar__section-body">
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <span class="pill">ðŸ”´ Critical</span>
            <span class="pill">ðŸŸ¡ Recommended</span>
            <span class="pill">ðŸŸ¢ Info</span>
            <span class="pill">ðŸ”µ Secondary</span>
          </div>
          <div class="kv" style="margin-top:12px;">
            <div class="k">Progress</div>
            <div class="v">Task completion is saved locally</div>
          </div>
        </div>
      </section>
    </aside>

    <!-- Main -->
    <main class="main" id="main">
      <header class="topbar" id="topbar">
        <div class="topbar__inner">
          <div class="chips">
            <span class="chip"><strong><i class="fas fa-ship"></i> Ship</strong><span class="mono">Adventure of the Seas</span></span>
            <span class="chip"><strong><i class="fas fa-calendar-alt"></i> Sail</strong><span class="mono">Feb 14â€“20, 2026</span></span>
            <span class="chip" id="today-banner"><strong><i class="fas fa-info-circle"></i> Status</strong><span class="mono">Pre-cruise</span></span>
            <span class="chip"><strong><i class="fas fa-users"></i> Stateroom</strong><span class="mono">6650 Â· Deck 6 Â· Aft</span></span>
            <span class="chip"><strong><i class="fas fa-user-friends"></i> Party</strong><span class="mono">4 (2 adults, 2 kids)</span></span>
            <span class="chip"><strong><i class="fas fa-glass-whiskey"></i> Packages</strong><span class="mono">Refreshment + 3â€‘night Dining (adults)</span></span>
          </div>
          <div class="topbar__actions">
            <kbd><i class="fas fa-keyboard"></i> Ctrl/âŒ˜K</kbd>
            <kbd><i class="fas fa-times"></i> Esc</kbd>
          </div>
        </div>
        <nav class="daystrip" id="daystrip" aria-label="Trip days"></nav>
      </header>

      <section class="hero" id="top">
        <div class="hero__content">
          <div>
            <h1 class="hero__title">Cruise Companion Â· <span class="text-gradient">Mission Control 2.0</span></h1>
            <p class="hero__desc">
              <strong>Enhanced for maximum efficiency.</strong> Fast search with real-time highlighting, persistent task tracking, 
              smart filtering, and intuitive navigation. Use <kbd>Enter</kbd> to cycle search hits, <kbd>Ctrl/âŒ˜K</kbd> for command palette.
            </p>
            <div class="hero__badges" aria-label="Key identifiers">
              <span class="badge"><strong><i class="fas fa-tag"></i> Reservation</strong><span class="mono">4519230</span></span>
              <span class="badge"><strong><i class="fas fa-door-open"></i> Stateroom</strong><span class="mono">6650 (Deck 6, aft)</span></span>
              <span class="badge"><strong><i class="fas fa-user-friends"></i> Party</strong><span class="mono">2 adults Â· 2 kids</span></span>
              <span class="badge"><strong><i class="fas fa-utensils"></i> Dining</strong><span class="mono">3-night specialty</span></span>
              <span class="badge"><strong><i class="fas fa-cocktail"></i> Drinks</strong><span class="mono">Refreshment package</span></span>
            </div>
          </div>

          <div class="hero__art" aria-label="Night ship cover art">
            <svg viewBox="0 0 900 420" role="img" aria-label="Ship silhouette with lights">
              <defs>
                <linearGradient id="g1" x1="0" x2="1">
                  <stop offset="0" stop-color="rgba(125,211,252,0.95)"/>
                  <stop offset="1" stop-color="rgba(167,243,208,0.85)"/>
                </linearGradient>
                <linearGradient id="sea" x1="0" x2="1">
                  <stop offset="0" stop-color="rgba(96,165,250,0.14)"/>
                  <stop offset="1" stop-color="rgba(125,211,252,0.06)"/>
                </linearGradient>
                <filter id="glow">
                  <feGaussianBlur stdDeviation="4" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <rect x="0" y="0" width="900" height="420" fill="rgba(7,10,20,0.15)"/>
              <path d="M0,310 C120,290 210,330 330,310 C450,290 560,320 690,300 C780,286 840,300 900,290 L900,420 L0,420 Z" fill="url(#sea)"/>
              <path d="M115,270 L760,270 L830,310 L145,310 Z" fill="rgba(255,255,255,0.10)" stroke="rgba(255,255,255,0.10)"/>
              <path d="M220,140 L660,140 L700,270 L180,270 Z" fill="rgba(255,255,255,0.07)" stroke="rgba(255,255,255,0.10)"/>
              <path d="M520,95 L570,95 L585,140 L505,140 Z" fill="rgba(255,255,255,0.08)"/>
              <path d="M590,105 L635,105 L650,140 L575,140 Z" fill="rgba(255,255,255,0.06)"/>
              <g filter="url(#glow)">
                <circle cx="250" cy="175" r="3" fill="url(#g1)"/>
                <circle cx="290" cy="185" r="3" fill="url(#g1)"/>
                <circle cx="330" cy="195" r="3" fill="url(#g1)"/>
                <circle cx="370" cy="205" r="3" fill="url(#g1)"/>
                <circle cx="410" cy="215" r="3" fill="url(#g1)"/>
                <circle cx="450" cy="225" r="3" fill="url(#g1)"/>
                <circle cx="490" cy="235" r="3" fill="url(#g1)"/>
                <circle cx="530" cy="245" r="3" fill="url(#g1)"/>
                <circle cx="570" cy="255" r="3" fill="url(#g1)"/>
                <circle cx="610" cy="255" r="3" fill="url(#g1)"/>
              </g>
              <text x="36" y="56" fill="rgba(255,255,255,0.75)" font-family="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace" font-size="14">
                MISSION CONTROL 2.0 // ENHANCED UI
              </text>
            </svg>
          </div>
        </div>
      </section>

      <section class="dashboard" aria-label="Quick panels">
        <div class="panel">
          <header class="panel__header">
            <div>
              <h3 class="panel__title"><i class="fas fa-tachometer-alt"></i> Command Snapshot</h3>
              <div class="panel__sub">Real-time status & analytics</div>
            </div>
            <span class="pill" id="overall-progress">0%</span>
          </header>
          <div class="panel__body">
            <div class="kpi">
              <div class="kpi__box">
                <div class="kpi__label"><i class="fas fa-exclamation-circle"></i> Next "must-do"</div>
                <div class="kpi__value" id="kpi-next">â€”</div>
              </div>
              <div class="kpi__box">
                <div class="kpi__label"><i class="fas fa-clock"></i> Countdown</div>
                <div class="kpi__value" id="kpi-countdown">â€”</div>
              </div>
              <div class="kpi__box">
                <div class="kpi__label"><i class="fas fa-calendar-day"></i> Today</div>
                <div class="kpi__value" id="kpi-today">â€”</div>
              </div>
              <div class="kpi__box">
                <div class="kpi__label"><i class="fas fa-tasks"></i> Tasks (visible)</div>
                <div class="kpi__value" id="kpi-visible">â€”</div>
              </div>
            </div>

            <div class="kv" style="margin-top:18px;">
              <div class="k">Operating mode</div>
              <div class="v"><strong>Red tasks first.</strong> One rendezvous point. Snacks are a stability layer. This manual adapts to reality.</div>
            </div>
          </div>
        </div>

        <div class="panel">
          <header class="panel__header">
            <div>
              <h3 class="panel__title"><i class="fas fa-map-marked-alt"></i> Official Itinerary</h3>
              <div class="panel__sub">Today auto-highlights</div>
            </div>
            <button class="icon-btn" id="copy-itin" aria-label="Copy itinerary to clipboard" title="Copy itinerary">
              <i class="fas fa-copy"></i>
            </button>
          </header>
          <div class="panel__body">
            <table class="table" aria-label="Itinerary table">
              <thead><tr><th>Day</th><th>Port</th><th>Time</th><th>Action</th></tr></thead>
              <tbody id="itinerary-body"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="chapters" id="chapters">
        <!-- Chapters will be dynamically generated by JavaScript -->
      </section>

      <footer class="footer">
        <div><b><i class="fas fa-lightbulb"></i> Pro tip:</b> Reduce decisions. Keep defaults. Execute red tasks early. Then relax. This manual adapts.</div>
      </footer>
    </main>
  </div>

  <!-- FAB -->
  <div class="fab" aria-label="Quick actions">
    <button id="fab-top" class="fab__btn" aria-label="Back to top" title="Back to top"><i class="fas fa-arrow-up"></i><span class="icon-fallback" aria-hidden="true">â†‘</span></button>
    <button id="fab-command" class="fab__btn" aria-label="Open command palette" title="Command palette"><i class="fas fa-terminal"></i><span class="icon-fallback" aria-hidden="true">âŒ˜</span></button>
    <button id="fab-help" class="fab__btn" aria-label="Show help" title="Help"><i class="fas fa-question"></i><span class="icon-fallback" aria-hidden="true">?</span></button>
  </div>

  <!-- Command Palette -->
  <div id="palette" class="palette" role="dialog" aria-modal="true" aria-hidden="true" aria-label="Command palette">
    <div class="palette__content">
      <div class="palette__header">
        <div class="palette__icon" aria-hidden="true"><i class="fas fa-terminal"></i><span class="icon-fallback" aria-hidden="true">âŒ˜</span></div>
        <input id="palette-input" class="palette__input" type="text"
               placeholder="Type: today, muster, packing, cocoâ€¦"
               aria-label="Search commands">
        <kbd>Esc</kbd>
      </div>
      <ul id="palette-list" class="palette__list" role="listbox"></ul>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" aria-hidden="true" role="status" aria-live="polite">
    <span id="toast-text">Copied</span>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
