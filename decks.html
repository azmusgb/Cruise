<!DOCTYPE html>
<html lang="en" data-theme="light" data-theme-mode="light" data-cruise-mode="before" data-cruise-day="1" data-day-part="evening" data-port-theme="none">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#cfeaff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="manifest" href="manifest.json?v=2">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="icon" type="image/svg+xml" href="icons/icon-192.svg">
  <title>Deck Navigator · Adventure of the Seas | Royal Caribbean</title>

  <!-- Premium fonts & icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* ———— MODERN RESET & GLOBAL ———— */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(160deg, #f4fbff 0%, #e6f5ff 52%, #def1ff 100%);
      color: #13293d;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }
    :root {
      --accent: #00a4d8;
      --accent-soft: rgba(0,164,216,0.1);
      --accent-glow: rgba(0,164,216,0.3);
      --deep-navy: #0a1e32;
      --warm-gold: #ffb74d;
      --glass-bg: rgba(255,255,255,0.68);
      --glass-border: rgba(255,255,255,0.5);
      --card-shadow: 0 18px 36px -12px rgba(0,40,80,0.2);
      --transition-magic: 0.4s cubic-bezier(0.2, 0.9, 0.3, 1.1);
      --type-title-xl: clamp(2.0rem, 4vw, 2.8rem);
      --type-title-lg: clamp(1.5rem, 2.8vw, 2.0rem);
      --type-title-md: clamp(1.15rem, 2.0vw, 1.4rem);
      --space-section: 24px;
    }
    .container { max-width: 1400px; margin: 0 auto; padding: 0 24px; width: 100%; }

    /* ———— HERO (slightly condensed) ———— */
    .deck-hero {
      background: linear-gradient(180deg, #eaf6ff 0%, #cfeaff 70%, #bde5ff 100%);
      border-radius: 0 0 40px 40px;
      padding: 48px 24px 40px;
      margin-bottom: 8px;
      color: #0a2a4a;
      box-shadow: 0 8px 20px rgba(0,40,80,0.1);
      position: relative;
      isolation: isolate;
    }
    .deck-hero::after {
      content: '';
      position: absolute;
      inset: 0;
      background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M10 50 Q 30 30, 50 50 T 90 50" stroke="%23008ec4" opacity="0.12" fill="none" stroke-width="1"/></svg>');
      pointer-events: none;
      border-radius: inherit;
    }
    .deck-hero__eyebrow {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: #1f6b97;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .deck-hero__title {
      font-family: 'Plus Jakarta Sans', sans-serif;
      font-size: var(--type-title-xl);
      font-weight: 800;
      line-height: 1.1;
      color: #08395f;
      margin-bottom: 8px;
    }
    .deck-hero__subtitle {
      margin-top: 12px;
      font-size: 1rem;
      color: rgba(12, 74, 110, 0.95);
      max-width: 600px;
      margin-bottom: 20px;
      font-weight: 450;
    }
    .deck-hero__accent {
      width: 60px;
      height: 3px;
      margin-top: 16px;
      background: linear-gradient(to right, var(--warm-gold), rgba(255,183,77,0.3));
      border-radius: 2px;
    }
    .deck-hero__tag {
      background: rgba(255,255,255,0.6);
      backdrop-filter: blur(4px);
      border: 1px solid rgba(16, 122, 170, 0.18);
      padding: 4px 14px;
      border-radius: 40px;
      font-size: 0.8rem;
      display: inline-block;
      margin-right: 8px;
      color: #0a4d77;
    }
    .page-spine {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      margin: 28px 0 20px;
    }
    .page-spine__item { border-left: 4px solid var(--accent); padding-left: 14px; }
    .page-spine__label { display: block; font-weight: 700; color: #0d4067; font-size: 1rem; }
    .page-spine__meta { color: #2d6f97; font-size: 0.8rem; }
    .deck-hero__actions { margin-top: 12px; }
    .deck-hero__actions .btn {
      background: white;
      color: #0c4d75;
      border-radius: 40px;
      padding: 12px 28px;
      font-weight: 700;
      margin-right: 10px;
      border: none;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 6px 14px rgba(0,83,126,0.1);
    }
    .btn--primary { background: var(--warm-gold) !important; color: #0a375a !important; box-shadow: 0 8px 20px rgba(255,180,70,0.28); }
    .deck-hero__btn-secondary { background: rgba(255,255,255,0.8) !important; color: #0b547d !important; }

    /* ———— GLASS NAVIGATION ———— */
    .main-navigation {
      background: var(--glass-bg);
      backdrop-filter: blur(18px);
      border: 1px solid var(--glass-border);
      border-radius: 60px;
      margin: -24px auto 24px;
      padding: 8px 16px;
      max-width: 860px;
      box-shadow: 0 8px 18px rgba(0,76,120,0.1);
    }
    .main-navigation__inner { display: flex; align-items: center; gap: 16px; flex-wrap: wrap; }
    .main-navigation__search {
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      background: white;
      border-radius: 40px;
      padding: 6px 16px;
      box-shadow: inset 0 1px 4px rgba(0,0,0,0.02), 0 2px 8px rgba(0,164,216,0.12);
    }
    .main-navigation__search i { color: var(--accent); margin-right: 8px; }
    #deckSearch {
      border: none;
      background: transparent;
      padding: 10px 0;
      font-size: 0.95rem;
      width: 100%;
      outline: none;
      font-weight: 500;
    }
    .main-navigation__hint { color: #6b8faa; font-size: 0.7rem; background: #eef6fd; padding: 4px 8px; border-radius: 32px; }
    .pill-btn {
      background: white;
      border: none;
      padding: 8px 20px;
      border-radius: 40px;
      font-weight: 600;
      color: #1f4460;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      cursor: pointer;
    }
    .pill-btn.is-active { background: var(--accent); color: white; box-shadow: 0 8px 16px rgba(0,121,212,0.3); border-color: white; }
    .main-navigation__filters { display: flex; gap: 6px; flex-wrap: wrap; }

    /* ———— QUICK RAIL ———— */
    .deck-quickrail-wrap { margin-top: 16px; }
    .deck-quickrail {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 8px 4px 16px;
      scrollbar-width: thin;
      scrollbar-color: var(--accent) #e3ecf2;
    }
    .deck-quickbtn {
      background: white;
      border: 1px solid rgba(0,82,165,0.1);
      border-radius: 40px;
      padding: 10px 20px;
      font-weight: 700;
      color: #0a2a4a;
      transition: all 0.2s ease;
      box-shadow: 0 4px 10px rgba(0,60,120,0.06);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      white-space: nowrap;
    }
    .deck-quickbtn:hover { transform: translateY(-2px); background: white; box-shadow: 0 12px 20px -8px rgba(0,121,212,0.24); }
    .deck-quickbtn.is-active { background: var(--accent); color: white; box-shadow: 0 8px 18px rgba(0,121,212,0.25); }
    .deck-quickbtn__num { font-weight: 800; font-size: 1.1rem; }
    .deck-quickbtn__sub { font-size: 0.7rem; opacity: 0.8; font-weight: 500; }

    /* ———— CATEGORY PILLS ———— */
    .deck-directory__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .deck-directory__title { font-size: 1rem; font-weight: 800; color: #0d3f64; }
    .deck-directory__toggle {
      border: 1px solid rgba(0,121,212,0.22);
      background: #f5fcff;
      color: #0b4a72;
      border-radius: 40px;
      padding: 6px 12px;
      font-size: 0.8rem;
      font-weight: 700;
      cursor: pointer;
    }
    .deck-directory__panels[hidden] { display: none; }
    .category-card {
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.6);
      border-radius: 32px;
      padding: 20px 24px;
      margin-bottom: 16px;
      box-shadow: 0 8px 24px rgba(0,30,60,0.04);
    }
    .category-card__heading { font-size: 1.2rem; font-weight: 700; display: flex; align-items: center; gap: 12px; color: #0f446a; }
    .deck-pills { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 12px; }
    .deck-pill {
      background: white;
      border: 1px solid rgba(0,82,165,0.1);
      border-radius: 30px;
      padding: 8px 16px;
      font-weight: 600;
      color: #0a2a4a;
      cursor: pointer;
      transition: all 0.2s;
    }
    .deck-pill.is-active { background: var(--accent); color: white; }

    /* ———— DECK CARDS (uniform height) ———— */
    .deck-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }
    .deck-card {
      background: white;
      border-radius: 28px;
      padding: 20px;
      display: flex;
      gap: 16px;
      border: 1px solid rgba(0,80,130,0.08);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 8px 22px -10px rgba(0,50,90,0.14);
      backdrop-filter: blur(4px);
      min-height: 180px;
    }
    .deck-card:hover { transform: translateY(-4px); border-color: var(--accent); box-shadow: 0 20px 30px -14px rgba(0,121,212,0.28); }
    .deck-visual { position: relative; width: 90px; flex-shrink: 0; }
    .deck-number {
      position: absolute;
      top: -6px;
      left: -6px;
      background: var(--deep-navy);
      color: white;
      font-weight: 800;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 40px;
      font-size: 1.3rem;
      border: 2px solid white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      z-index: 2;
    }
    .deck-visual img { width: 100%; height: 90px; object-fit: cover; border-radius: 18px; background: #cfe2f0; }
    .deck-info { flex: 1; display: flex; flex-direction: column; }
    .deck-title { font-size: 1.3rem; font-weight: 800; line-height: 1.2; }
    .deck-subtitle { color: var(--accent); font-weight: 600; font-size: 0.9rem; }
    .deck-highlights { display: flex; flex-wrap: wrap; gap: 6px; margin: 10px 0; }
    .deck-highlights span { background: #e9f3fb; padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 600; color: #0c4973; }
    .deck-card__cta {
      margin-top: auto;
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 40px;
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
      align-self: flex-start;
    }
    .deck-card__cta:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,121,212,0.3); }

    .deck-grid__header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 16px;
      flex-wrap: wrap;
      margin: 20px 0 8px;
    }
    .deck-grid__title { font-size: var(--type-title-lg); font-weight: 800; color: #0a344f; }
    .deck-grid__counts { display: flex; gap: 12px; }
    .count-chip { background: white; padding: 6px 16px; border-radius: 40px; box-shadow: 0 4px 10px rgba(0,0,0,0.04); font-size: 0.9rem; }
    .count-chip--strong { font-weight: 700; }

    .deck-empty { text-align: center; padding: 48px; background: white; border-radius: 40px; margin-top: 24px; }

    /* ———— MODAL (refined controls) ———— */
    .deck-modal {
      position: fixed;
      inset: 0;
      z-index: 6000;
      display: none;
      align-items: center;
      justify-content: center;
    }
    .deck-modal.is-open { display: flex; }
    .deck-modal__backdrop {
      position: fixed; inset: 0; background: rgba(13, 63, 97, 0.5);
      backdrop-filter: blur(6px);
    }
    .deck-modal__dialog {
      position: relative;
      background: linear-gradient(145deg, #ffffff, #f6fdff);
      border-radius: 36px;
      max-width: 1300px;
      width: min(96vw, 1300px);
      max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 30px);
      box-shadow: 0 30px 60px rgba(6,58,92,0.25);
      border: 1px solid rgba(255,255,255,0.8);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      margin: calc(env(safe-area-inset-top) + 15px) 0 calc(env(safe-area-inset-bottom) + 15px);
    }

    /* Floating zoom panel (right side) */
    .zoom-float-panel {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 100;
      pointer-events: none;
    }
    .zoom-float-panel > * {
      pointer-events: auto;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 40px;
      box-shadow: 0 8px 20px rgba(0,20,40,0.15);
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0a2a4a;
      font-size: 1.2rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .zoom-float-panel > *:hover { background: white; color: var(--accent); }
    .zoom-slider-container {
      width: 48px;
      height: 160px;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(8px);
      border-radius: 40px;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 12px 0;
      gap: 8px;
    }
    .zoom-slider {
      writing-mode: bt-lr; /* IE */
      -webkit-appearance: slider-vertical;
      width: 4px;
      height: 100px;
      background: #ddd;
      border-radius: 4px;
      outline: none;
    }
    .zoom-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: 2px solid white;
    }
    .recenter-btn {
      background: var(--accent);
      color: white;
    }

    /* Modal header / toolbar */
    .deck-modal__toolbar {
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(24px);
      padding: 12px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(0,82,165,0.1);
    }
    .toolbar-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .deck-modal__title {
      font-size: var(--type-title-md);
      font-weight: 800;
      color: #0a2a4a;
    }
    .toolbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .btn-icon, .labeled-btn {
      background: white;
      border: none;
      padding: 8px 12px;
      border-radius: 30px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.02);
      transition: 0.2s;
      cursor: pointer;
    }
    .btn-icon:hover, .labeled-btn:hover { background: var(--accent); color: white; transform: translateY(-1px); }
    .close-btn {
      background: none;
      border: none;
      font-size: 1.8rem;
      width: 44px;
      height: 44px;
      border-radius: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .close-btn:hover { background: rgba(0,0,0,0.05); }

    .deck-modal__body {
      padding: 20px;
      overflow-y: auto;
      position: relative;
      flex: 1;
    }
    .deck-pan-hint {
      margin-bottom: 8px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8rem;
      font-weight: 600;
      color: #1f5b87;
      background: #e7f5ff;
      border: 1px solid rgba(0,121,212,0.2);
      border-radius: 40px;
      padding: 6px 12px;
      opacity: 0;
      transform: translateY(4px);
      transition: opacity 180ms ease, transform 180ms ease;
    }
    .deck-pan-hint.is-visible { opacity: 1; transform: translateY(0); }
    .deck-focuschips { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
    .deck-focuschip {
      background: #eaf3ff;
      padding: 6px 16px;
      border-radius: 40px;
      border: none;
      font-weight: 600;
      color: #0e4d80;
      cursor: pointer;
      transition: all 0.2s;
    }
    .deck-focuschip:hover, .deck-focuschip.is-active { background: #cfe9ff; box-shadow: 0 8px 16px rgba(0,121,212,0.2); }
    .deck-plan-stage {
      background: linear-gradient(165deg, #2f85b3 0%, #47a7cf 40%, #2f95bf 100%);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,0.6);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4), 0 14px 26px -12px rgba(8,62,96,0.4);
      position: relative;
      overflow: auto;
      padding: 16px;
      min-height: 400px;
    }
    .deck-plan-canvas {
      transition: opacity 220ms ease, transform 220ms ease;
      transform-origin: 0 0;
    }
    .deck-plan-canvas.is-transitioning { opacity: 0; transform: translateY(8px) scale(0.98); }
    .deck-plan-media { width: 100%; height: auto; display: block; border-radius: 16px; }
    .deck-plan-hotspots { position: absolute; inset: 16px; }
    .deck-hotspot {
      position: absolute;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border-radius: 40px;
      background: linear-gradient(145deg, #0ca8ff, #0069d0);
      border: 2px solid white;
      color: white;
      font-weight: 800;
      box-shadow: 0 8px 18px rgba(0,121,212,0.6);
      cursor: pointer;
      transition: transform 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .deck-hotspot:hover { transform: translate(-50%, -50%) scale(1.1); }
    .deck-hotspot[data-selected="true"] { box-shadow: 0 0 0 4px rgba(255,215,0,0.6); }
    .deck-plan-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 16px;
    }
    .deck-plan-legend-item {
      background: white;
      border: none;
      padding: 8px 16px;
      border-radius: 30px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.04);
      text-align: left;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.8rem;
    }
    .deck-plan-legend-item.is-active { background: #dff0ff; box-shadow: 0 8px 16px rgba(0,121,212,0.2); }
    .deck-plan-skeleton {
      min-height: 380px;
      border-radius: 24px;
      background: linear-gradient(110deg, rgba(255,255,255,0.15) 20%, rgba(255,255,255,0.38) 32%, rgba(255,255,255,0.15) 44%) 0 0 / 220% 100%, linear-gradient(160deg, #0f5379, #1273a1);
      animation: deckLoadingSweep 900ms linear infinite;
    }
    @keyframes deckLoadingSweep { to { background-position: 220% 0, 0 0; } }

    /* ———— BOTTOM NAV ———— */
    .bottom-nav {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 990;
      display: none;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 8px;
      padding: 8px 12px calc(8px + env(safe-area-inset-bottom));
      background: rgba(241, 250, 255, 0.92);
      border-top: 1px solid rgba(8, 89, 136, 0.18);
      backdrop-filter: blur(10px);
    }
    .bottom-nav__item {
      min-height: 44px;
      border-radius: 12px;
      border: 1px solid rgba(8, 89, 136, 0.14);
      background: rgba(255, 255, 255, 0.64);
      color: #1f567c;
      text-decoration: none;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2px;
      font-size: 0.65rem;
      font-weight: 700;
      transition: transform 0.1s;
    }
    .bottom-nav__item:active { transform: scale(0.96); }
    .bottom-nav__item.active { border-color: rgba(255,190,92,0.56); background: rgba(255,190,92,0.22); }
    @media (max-width: 767px) {
      body { padding-bottom: calc(80px + env(safe-area-inset-bottom)); }
      .bottom-nav { display: grid; }
    }

    /* ———— BACK TO TOP ———— */
    .back-to-top {
      position: fixed;
      bottom: 100px;
      right: 20px;
      width: 48px;
      height: 48px;
      border-radius: 48px;
      background: var(--accent);
      color: white;
      border: none;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 800;
      opacity: 0.9;
    }
    .back-to-top.show { display: flex; }
  </style>
</head>
<body class="app-theme-rcc decks-page">
  <!-- Header and hero sections (same structure, slightly condensed) -->
  <!-- (Header content truncated for brevity; keep your existing header, utility, and footer) -->
  <!-- ... (I'll keep the rest of your HTML and only modify the modal and add back-to-top) ... -->

  <!-- MODAL – cinematic with floating controls -->
  <div class="deck-modal is-open" id="deckModal" aria-hidden="false">
    <div class="deck-modal__backdrop" data-action="close-modal"></div>
    <div class="deck-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">

      <!-- Floating zoom panel (right) -->
      <div class="zoom-float-panel">
        <button class="zoom-in" data-action="zoom-in"><i class="fas fa-plus"></i></button>
        <div class="zoom-slider-container">
          <input type="range" min="50" max="300" value="100" class="zoom-slider" id="zoomSlider" orient="vertical">
        </div>
        <button class="zoom-out" data-action="zoom-out"><i class="fas fa-minus"></i></button>
        <button class="recenter-btn" data-action="zoom-reset"><i class="fas fa-crosshairs"></i></button>
      </div>

      <!-- Toolbar -->
      <div class="deck-modal__toolbar">
        <div class="toolbar-left">
          <button class="btn-icon" data-action="prev-deck" aria-label="Previous deck"><i class="fas fa-chevron-left"></i></button>
          <button class="btn-icon" data-action="next-deck" aria-label="Next deck"><i class="fas fa-chevron-right"></i></button>
          <h3 id="modalTitle" class="deck-modal__title">Deck 14</h3>
        </div>
        <div class="toolbar-right">
          <button class="labeled-btn" data-action="center-me"><i class="fas fa-location-dot"></i> <span class="btn-label">My Location</span></button>
          <a class="labeled-btn" id="downloadPlan" href="#" target="_blank" rel="noopener" aria-disabled="true"><i class="fas fa-file-pdf"></i> <span class="btn-label">PDF</span></a>
          <button class="close-btn" data-action="close-modal" aria-label="Close"><i class="fas fa-times"></i></button>
        </div>
      </div>

      <div class="deck-modal__body">
        <p id="deckPanHint" class="deck-pan-hint" hidden=""><i class="fas fa-hand-paper"></i> Drag to pan while zoomed in</p>
        <div id="deckFocusChips" class="deck-focuschips"></div>
        <div id="modalFrame" class="deck-modal__frame">
          <div class="deck-plan-stage" id="deckPlanStage">
            <div class="deck-plan-canvas" id="deckPlanCanvas" style="transform:scale(1);">
              <img class="deck-plan-media" src="decks/deck-14-final.min.svg" alt="Deck 14">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Back to top button -->
  <button class="back-to-top" id="backToTop" aria-label="Back to top"><i class="fas fa-arrow-up"></i></button>

  <!-- Your existing footer and bottom nav... (keep as is) -->

  <script>
    (function() {
      // --- Your existing deckData, hotspots, etc. (keep as is) ---
      const deckData = [ ... ]; // keep your data
      const deckHotspots = { ... };
      const deckFocusMap = { ... };
      const state = { ... }; // your existing state, but we'll add zoomSlider

      // --- DOM refs ---
      const els = { ... }; // add zoomSlider, backToTop

      // --- Zoom slider integration ---
      const zoomSlider = document.getElementById('zoomSlider');
      if (zoomSlider) {
        zoomSlider.addEventListener('input', (e) => {
          setZoom(parseInt(e.target.value, 10));
        });
      }

      // Modify setZoom to update slider
      const originalSetZoom = setZoom;
      setZoom = function(v) {
        v = Math.min(300, Math.max(50, v));
        state.currentZoom = v;
        if (els.zoomLevel) els.zoomLevel.textContent = v + '%';
        if (zoomSlider) zoomSlider.value = v;
        const canvas = document.getElementById('deckPlanCanvas');
        if (canvas) canvas.style.transform = `scale(${v/100})`;
        if (v > 100 && !state.panHintShown) {
          togglePanHint(true);
          state.panHintShown = true;
          sessionStorage.setItem('deck_pan_hint_shown', '1');
          setTimeout(() => togglePanHint(false), 2400);
        }
      };

      // --- Back to top visibility ---
      const backToTop = document.getElementById('backToTop');
      window.addEventListener('scroll', () => {
        if (window.scrollY > 400) {
          backToTop.classList.add('show');
        } else {
          backToTop.classList.remove('show');
        }
      });
      backToTop.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // --- Ensure your existing init calls these additions ---
    })();
  </script>
</body>
</html>