<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#0A2E4A">
<title>Deck Navigator Â· Adventure of the Seas</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
â€“navy:#0A2E4A;
â€“navy-mid:#1C4E6C;
â€“navy-light:#2A6F97;
â€“gold:#C6A15B;
â€“gold-pale:#F5EDD8;
â€“sky:#EFF6FB;
â€“sky-mid:#D8ECF5;
â€“white:rgba(255,255,255,0.92);
â€“glass:rgba(255,255,255,0.72);
â€“border:rgba(255,255,255,0.55);
â€“shadow-sm:0 2px 8px rgba(10,46,74,0.07);
â€“shadow-md:0 8px 28px rgba(10,46,74,0.12);
â€“shadow-lg:0 20px 50px rgba(10,46,74,0.20);
â€“shadow-xl:0 36px 72px rgba(5,20,40,0.32);
â€“r-card:28px;
â€“r-pill:999px;
â€“ease:cubic-bezier(0.22,1,0.36,1);
}

html{scroll-behavior:smooth}
body{
font-family:-apple-system,BlinkMacSystemFont,â€˜Segoe UIâ€™,system-ui,sans-serif;
background:var(â€“sky);
background-image:
radial-gradient(ellipse at 15% 25%,rgba(180,220,245,0.45) 0%,transparent 40%),
radial-gradient(ellipse at 88% 75%,rgba(160,210,238,0.30) 0%,transparent 38%);
color:var(â€“navy);
line-height:1.5;
-webkit-font-smoothing:antialiased;
min-height:100vh;
overflow-x:hidden;
}

/* â”€â”€ SKIP â”€â”€ */
.skip-link{position:fixed;top:-50px;left:16px;background:var(â€“navy);color:#fff;padding:10px 22px;border-radius:var(â€“r-pill);z-index:9999;transition:top .2s;font-weight:600}
.skip-link:focus{top:12px;outline:3px solid var(â€“gold)}

/* â”€â”€ HEADER â”€â”€ */
.hdr{
position:sticky;top:0;z-index:200;
background:rgba(10,46,74,0.95);
backdrop-filter:blur(20px);
border-bottom:1px solid rgba(255,255,255,0.10);
}
.hdr-inner{
max-width:1280px;margin:0 auto;
display:flex;align-items:center;justify-content:space-between;
height:58px;padding:0 24px;gap:16px;
}
.hdr-brand{display:flex;align-items:center;gap:10px;text-decoration:none}
.hdr-crown{
width:36px;height:36px;border-radius:11px;flex-shrink:0;
background:linear-gradient(135deg,var(â€“gold),#e8c97a);
display:flex;align-items:center;justify-content:center;
font-size:15px;color:var(â€“navy);box-shadow:0 4px 12px rgba(198,161,91,0.35);
}
.hdr-text{color:#fff}
.hdr-title{font-size:.9rem;font-weight:700;line-height:1.15}
.hdr-sub{font-size:.68rem;opacity:.60;line-height:1.15}
.hdr-dates{
background:rgba(255,255,255,0.10);
border:1px solid rgba(255,255,255,0.16);
border-radius:var(â€“r-pill);
padding:5px 14px;
font-size:.75rem;color:rgba(255,255,255,0.80);font-weight:500;
white-space:nowrap;
}

/* â”€â”€ HERO â”€â”€ */
.hero{
background:linear-gradient(160deg,var(â€“navy) 0%,var(â€“navy-mid) 60%,#1f7eb5 100%);
padding:52px 24px 0;
position:relative;overflow:hidden;
}
.hero::before{
content:â€™â€™;position:absolute;inset:0;
background:url(â€œdata:image/svg+xml,%3Csvg width=â€˜80â€™ height=â€˜80â€™ viewBox=â€˜0 0 80 80â€™ xmlns=â€˜http://www.w3.org/2000/svgâ€™%3E%3Cg fill=â€™%23ffffffâ€™ fill-opacity=â€˜0.025â€™%3E%3Ccircle cx=â€˜40â€™ cy=â€˜40â€™ r=â€˜2â€™/%3E%3C/g%3E%3C/svg%3Eâ€);
pointer-events:none;
}
.hero-inner{max-width:1280px;margin:0 auto;position:relative;z-index:1}
.hero-badge{
display:inline-flex;align-items:center;gap:7px;
background:rgba(255,255,255,0.12);
border:1px solid rgba(255,255,255,0.22);
border-radius:var(â€“r-pill);padding:5px 14px;
font-size:.75rem;font-weight:600;color:rgba(255,255,255,.90);
margin-bottom:18px;
}
.hero-badge i{color:#ffd166;font-size:.70rem}
.hero-h1{
font-size:clamp(1.9rem,5vw,3rem);
font-weight:800;color:#fff;
line-height:1.10;letter-spacing:-.03em;
margin-bottom:10px;
}
.hero-h1 em{font-style:normal;color:#ffd166}
.hero-sub{font-size:1rem;color:rgba(255,255,255,.68);max-width:380px;margin-bottom:34px;line-height:1.55}
.hero-kpis{display:flex;gap:20px;margin-bottom:44px;flex-wrap:wrap}
.kpi{display:flex;flex-direction:column;gap:1px}
.kpi-n{font-size:1.55rem;font-weight:800;color:#fff;line-height:1;letter-spacing:-.03em}
.kpi-l{font-size:.70rem;color:rgba(255,255,255,.50);font-weight:500}
.kpi-div{width:1px;background:rgba(255,255,255,.16);align-self:stretch}

/* â”€â”€ SEARCH LEDGE â”€â”€ */
.search-ledge{
background:rgba(255,255,255,0.11);
border:1px solid rgba(255,255,255,0.18);
border-bottom:none;
border-radius:var(â€“r-card) var(â€“r-card) 0 0;
padding:20px 24px 0;
}
.search-bar{
display:flex;align-items:center;gap:12px;
background:#fff;
border-radius:18px;
padding:13px 20px;
box-shadow:0 8px 32px rgba(5,20,45,0.22);
margin-bottom:0;
}
.search-bar i{color:var(â€“navy-light);font-size:.95rem;flex-shrink:0}
.search-bar input{flex:1;border:none;outline:none;font-size:.97rem;color:var(â€“navy);background:transparent;font-family:inherit}
.search-bar input::placeholder{color:#7b9cae}
.search-ct{font-size:.76rem;font-weight:700;color:#7b9cae;white-space:nowrap;transition:color .2s}
.search-ct.has-results{color:var(â€“navy-mid)}
.search-wave{display:block;margin-top:-1px}

/* â”€â”€ BODY â”€â”€ */
.body{max-width:1280px;margin:0 auto;padding:0 24px 80px}

/* â”€â”€ FILTER ROW â”€â”€ */
.filters{
display:flex;gap:8px;padding:22px 0 18px;
overflow-x:auto;scrollbar-width:none;
}
.filters::-webkit-scrollbar{display:none}
.ftab{
display:inline-flex;align-items:center;gap:7px;
padding:9px 20px;border-radius:var(â€“r-pill);
border:1.5px solid rgba(10,46,74,0.11);
background:#fff;color:var(â€“navy-mid);
font-size:.84rem;font-weight:600;
cursor:pointer;white-space:nowrap;
box-shadow:var(â€“shadow-sm);
transition:all 200ms var(â€“ease);
}
.ftab i,.ftab .dot{font-size:.72rem}
.dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.ftab:hover:not(.active){border-color:var(â€“navy-light);color:var(â€“navy);transform:translateY(-1px)}
.ftab.active{background:var(â€“navy);color:#fff;border-color:var(â€“navy);box-shadow:0 6px 18px rgba(10,46,74,0.26)}

/* â”€â”€ SECTION HEAD â”€â”€ */
.sec-head{display:flex;align-items:baseline;justify-content:space-between;margin-bottom:18px}
.sec-title{font-size:1.1rem;font-weight:700;color:var(â€“navy)}
.sec-ct{font-size:.78rem;font-weight:600;color:#8aabb8}

/* â”€â”€ GRID â”€â”€ */
.deck-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(270px,1fr));
gap:18px;
}

/* â”€â”€ CARD â”€â”€ */
.card{
background:#fff;
border-radius:var(â€“r-card);
border:1.5px solid rgba(10,46,74,0.07);
box-shadow:var(â€“shadow-sm);
overflow:hidden;cursor:pointer;
transition:transform 260ms var(â€“ease),box-shadow 260ms var(â€“ease),border-color 240ms;
position:relative;
animation:cardIn 300ms var(â€“ease) both;
}
@keyframes cardIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.card:hover{transform:translateY(-5px);box-shadow:var(â€“shadow-lg);border-color:rgba(10,46,74,0.16)}
.card:active{transform:translateY(-2px)}
.card:focus-visible{outline:3px solid var(â€“gold);outline-offset:2px}

/* my-deck ring */
.card.my-deck{border-color:var(â€“gold);box-shadow:0 0 0 3px rgba(198,161,91,0.18),var(â€“shadow-sm)}
.my-badge{
position:absolute;top:13px;right:13px;
background:var(â€“gold);color:var(â€“navy);
font-size:.62rem;font-weight:800;
padding:3px 9px;border-radius:var(â€“r-pill);
letter-spacing:.04em;text-transform:uppercase;
box-shadow:0 2px 8px rgba(198,161,91,0.40);
}

.card-top{padding:18px 18px 12px;display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
.card-num{
width:46px;height:46px;border-radius:13px;
display:flex;align-items:center;justify-content:center;
font-size:1.05rem;font-weight:800;flex-shrink:0;
}
.ent .card-num{background:#EEF2FF;color:#3730A3}
.wel .card-num{background:#ECFDF5;color:#065F46}
.ess .card-num{background:#FFFBEB;color:#92400E}

.card-meta{flex:1}
.card-name{font-size:.97rem;font-weight:700;color:var(â€“navy);line-height:1.2}
.card-sub{font-size:.78rem;color:#5a849b;margin-top:3px}
.card-arrow{
width:29px;height:29px;border-radius:9px;
background:var(â€“sky);color:var(â€“navy-mid);
display:flex;align-items:center;justify-content:center;
font-size:.68rem;flex-shrink:0;margin-top:2px;
transition:background 200ms,color 200ms,transform 200ms;
}
.card:hover .card-arrow{background:var(â€“navy);color:#fff;transform:translateX(2px)}

/* thumbnail strip */
.card-thumb{
margin:0 14px;border-radius:14px;
overflow:hidden;background:var(â€“sky-mid);
height:84px;position:relative;
}
.card-thumb svg{display:block;width:100%;height:100%}

.card-tags{padding:12px 18px 16px;display:flex;gap:6px;flex-wrap:wrap}
.tag{
font-size:.70rem;font-weight:600;
padding:3px 10px;border-radius:var(â€“r-pill);line-height:1.6;
}
.ent .tag{background:#EEF2FF;color:#3730A3}
.wel .tag{background:#ECFDF5;color:#065F46}
.ess .tag{background:#FFFBEB;color:#92400E}

/* empty */
.empty{
grid-column:1/-1;padding:64px 24px;text-align:center;
display:none;
}
.empty.show{display:block}
.empty-ico{font-size:2.8rem;margin-bottom:14px}
.empty-t{font-size:1.15rem;font-weight:700;margin-bottom:8px}
.empty-s{font-size:.88rem;color:#7b9cae;margin-bottom:20px}
.btn-reset{
display:inline-flex;align-items:center;gap:8px;
padding:10px 24px;border-radius:var(â€“r-pill);
background:var(â€“navy);color:#fff;
font-size:.86rem;font-weight:700;border:none;cursor:pointer;
box-shadow:0 6px 18px rgba(10,46,74,0.24);
transition:transform 200ms,box-shadow 200ms;
}
.btn-reset:hover{transform:translateY(-2px);box-shadow:0 10px 26px rgba(10,46,74,0.32)}

/* â”€â”€ SPINE â”€â”€ */
.spine{
position:fixed;right:18px;top:50%;
transform:translateY(-50%);
display:flex;flex-direction:column;gap:4px;
z-index:99;
}
.spine-btn{
width:38px;height:26px;border-radius:8px;
background:rgba(255,255,255,0.82);
border:1px solid rgba(10,46,74,0.13);
font-size:.60rem;font-weight:800;color:var(â€“navy-mid);
cursor:pointer;
transition:all 170ms;
display:flex;align-items:center;justify-content:center;
box-shadow:var(â€“shadow-sm);
}
.spine-btn:hover,.spine-btn.active{
background:var(â€“navy);color:#fff;
box-shadow:0 4px 14px rgba(10,46,74,0.26);
}
@media(max-width:1000px){.spine{display:none}}

/* â”€â”€ MODAL BACKDROP â”€â”€ */
.backdrop{
position:fixed;inset:0;z-index:300;
background:rgba(5,18,36,0.60);
backdrop-filter:blur(12px);
opacity:0;pointer-events:none;
transition:opacity 300ms var(â€“ease);
display:flex;align-items:center;justify-content:center;
padding:12px;
}
.backdrop.open{opacity:1;pointer-events:auto}

/* â”€â”€ MODAL â”€â”€ */
.modal{
background:#fff;
border-radius:36px;
box-shadow:var(â€“shadow-xl);
width:100%;max-width:960px;
max-height:calc(100dvh - 24px);
display:flex;flex-direction:column;
overflow:hidden;
transform:scale(.96) translateY(14px);
opacity:0;
transition:transform 320ms var(â€“ease),opacity 280ms var(â€“ease);
}
.backdrop.open .modal{transform:scale(1) translateY(0);opacity:1}

/* modal header */
.modal-hdr{
padding:20px 22px 16px;
border-bottom:1px solid rgba(10,46,74,0.07);
display:flex;align-items:flex-start;gap:14px;
flex-shrink:0;
}
.modal-num{
width:52px;height:52px;border-radius:15px;
display:flex;align-items:center;justify-content:center;
font-size:1.15rem;font-weight:800;flex-shrink:0;
}
.modal-num.ent{background:#EEF2FF;color:#3730A3}
.modal-num.wel{background:#ECFDF5;color:#065F46}
.modal-num.ess{background:#FFFBEB;color:#92400E}

.modal-txt{flex:1;min-width:0}
.modal-name{font-size:1.30rem;font-weight:800;color:var(â€“navy);line-height:1.15}
.modal-sub{font-size:.84rem;color:#5a849b;margin-top:3px}
.modal-desc{font-size:.90rem;color:var(â€“navy-mid);margin-top:8px;line-height:1.55}

.modal-close{
width:36px;height:36px;border-radius:10px;flex-shrink:0;
background:var(â€“sky);border:none;cursor:pointer;
display:flex;align-items:center;justify-content:center;
color:var(â€“navy-mid);font-size:.82rem;
transition:background 170ms,color 170ms;
}
.modal-close:hover{background:#fee2e2;color:#dc2626}

/* deck strip nav */
.modal-strip{
display:flex;align-items:center;gap:6px;
padding:10px 22px;
border-bottom:1px solid rgba(10,46,74,0.07);
overflow-x:auto;scrollbar-width:none;
background:#FAFCFE;flex-shrink:0;
}
.modal-strip::-webkit-scrollbar{display:none}
.strip-btn{
display:inline-flex;flex-direction:column;align-items:center;gap:2px;
padding:7px 11px;border-radius:11px;
border:1.5px solid transparent;
background:#fff;cursor:pointer;min-width:58px;
white-space:nowrap;color:var(â€“navy-mid);
transition:all 160ms var(â€“ease);
box-shadow:var(â€“shadow-sm);
flex-shrink:0;
}
.strip-btn b{font-size:.72rem;font-weight:800}
.strip-btn span{font-size:.58rem;opacity:.65;max-width:60px;overflow:hidden;text-overflow:ellipsis}
.strip-btn.active{background:var(â€“navy);color:#fff;border-color:var(â€“navy);box-shadow:0 4px 14px rgba(10,46,74,0.26)}
.strip-btn:hover:not(.active){border-color:var(â€“navy-light);color:var(â€“navy)}

/* plan viewer */
.plan-area{
flex:1;min-height:0;
position:relative;
background:#EFF6FB;
display:flex;align-items:stretch;
}
.plan-canvas{
flex:1;overflow:auto;
display:flex;align-items:center;justify-content:center;
position:relative;
cursor:grab;
min-height:260px;
}
.plan-canvas.dragging{cursor:grabbing}
.plan-inner{
transform-origin:center center;
transition:transform 250ms var(â€“ease);
padding:20px;
display:flex;align-items:center;justify-content:center;
min-width:100%;min-height:100%;
}
.plan-inner img,.plan-inner svg,.plan-inner object{
display:block;
max-width:100%;height:auto;
border-radius:14px;
box-shadow:0 4px 20px rgba(10,46,74,0.10);
background:#fff;
user-select:none;pointer-events:none;
}
/* fallback placeholder */
.plan-placeholder{
display:flex;flex-direction:column;align-items:center;justify-content:center;
gap:12px;padding:40px;
min-width:320px;min-height:200px;
background:#fff;border-radius:14px;
box-shadow:0 4px 20px rgba(10,46,74,0.08);
}
.plan-placeholder .deck-big{font-size:5rem;font-weight:900;color:var(â€“sky-mid);line-height:1;letter-spacing:-.05em}
.plan-placeholder p{font-size:.82rem;color:#7b9cae;text-align:center;max-width:200px}

/* loading skeleton */
.plan-skeleton{
width:100%;max-width:700px;height:220px;border-radius:14px;
background:linear-gradient(90deg,#e8f2f8 25%,#d5e8f2 50%,#e8f2f8 75%);
background-size:200% 100%;
animation:shimmer 1.4s infinite;
}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}

/* zoom bar */
.zoom-bar{
position:absolute;bottom:14px;right:14px;
display:flex;align-items:center;gap:4px;
background:rgba(255,255,255,0.88);backdrop-filter:blur(8px);
border:1px solid rgba(10,46,74,0.11);
border-radius:var(â€“r-pill);padding:5px 10px;
box-shadow:var(â€“shadow-md);z-index:2;
}
.zoom-btn{
width:28px;height:28px;border-radius:50%;
background:none;border:none;cursor:pointer;
display:flex;align-items:center;justify-content:center;
font-size:.72rem;color:var(â€“navy);
transition:background 140ms;
}
.zoom-btn:hover{background:var(â€“sky-mid)}
.zoom-v{font-size:.73rem;font-weight:700;color:var(â€“navy-mid);min-width:34px;text-align:center}

/* prev/next arrows */
.plan-prev,.plan-next{
position:absolute;top:50%;transform:translateY(-50%);
width:38px;height:38px;border-radius:50%;
background:rgba(255,255,255,0.85);backdrop-filter:blur(8px);
border:1px solid rgba(10,46,74,0.11);
box-shadow:var(â€“shadow-md);
cursor:pointer;display:flex;align-items:center;justify-content:center;
font-size:.76rem;color:var(â€“navy);
transition:all 180ms;z-index:3;
}
.plan-prev{left:10px}.plan-next{right:10px}
.plan-prev:hover,.plan-next:hover{background:var(â€“navy);color:#fff}
.plan-prev:disabled,.plan-next:disabled{opacity:.30;pointer-events:none}

/* highlights footer */
.modal-foot{
padding:14px 22px;
border-top:1px solid rgba(10,46,74,0.07);
display:flex;align-items:center;gap:8px;flex-wrap:wrap;
flex-shrink:0;background:#fff;
}
.foot-lbl{font-size:.70rem;font-weight:700;color:#8aabb8;text-transform:uppercase;letter-spacing:.06em;margin-right:2px}
.chip{
display:inline-flex;align-items:center;gap:6px;
padding:6px 13px;border-radius:var(â€“r-pill);
background:var(â€“sky);color:var(â€“navy);
font-size:.78rem;font-weight:600;
border:1.5px solid rgba(10,46,74,0.10);
cursor:default;transition:all 170ms;
}
.chip i{font-size:.68rem;opacity:.75}
.room-chip{
background:linear-gradient(135deg,#fffbeb,#fef3c7);
color:#92400E;border-color:rgba(198,161,91,0.35);
box-shadow:0 2px 8px rgba(198,161,91,0.15);
}

/* â”€â”€ RESPONSIVE â”€â”€ */
@media(max-width:640px){
.hero{padding:36px 16px 0}
.search-ledge{padding:16px 16px 0}
.body{padding:0 16px 80px}
.hdr-inner{padding:0 16px}
.hero-kpis{gap:14px}
.deck-grid{grid-template-columns:1fr}
.modal-hdr{padding:14px 16px}
.modal-strip{padding:8px 14px}
.modal-foot{padding:10px 14px}
.plan-canvas{min-height:200px}
.modal{border-radius:24px}
}
</style>

</head>
<body>
<a href="#main" class="skip-link">Skip to main content</a>

<!-- HEADER -->

<header class="hdr" role="banner">
  <div class="hdr-inner">
    <a href="#" class="hdr-brand">
      <div class="hdr-crown"><i class="fas fa-crown"></i></div>
      <div class="hdr-text">
        <div class="hdr-title">Royal Caribbean</div>
        <div class="hdr-sub">Adventure of the Seas</div>
      </div>
    </a>
    <div class="hdr-dates"><i class="fas fa-calendar-days" style="margin-right:6px;opacity:.7"></i>Feb 14â€“20, 2026</div>
  </div>
</header>

<!-- HERO -->

<section class="hero">
  <div class="hero-inner">
    <div class="hero-badge"><i class="fas fa-location-dot"></i> Deck 6 Â· Room 6650</div>
    <h1 class="hero-h1">Find anything<br><em>on the ship.</em></h1>
    <p class="hero-sub">Tap any deck for the full plan. Your room is always one tap away.</p>
    <div class="hero-kpis">
      <div class="kpi"><div class="kpi-n">14</div><div class="kpi-l">Guest decks</div></div>
      <div class="kpi-div"></div>
      <div class="kpi"><div class="kpi-n">60+</div><div class="kpi-l">Venues</div></div>
      <div class="kpi-div"></div>
      <div class="kpi"><div class="kpi-n">3,807</div><div class="kpi-l">Guests</div></div>
    </div>
    <!-- search ledge merges with hero bottom -->
    <div class="search-ledge">
      <div class="search-bar">
        <i class="fas fa-magnifying-glass"></i>
        <input id="search" type="search" placeholder="Search decks, venues, amenitiesâ€¦ (press /)" autocomplete="off" aria-label="Search decks">
        <span class="search-ct" id="ct">14 decks</span>
      </div>
    </div>
  </div>
  <!-- wave transition -->
  <svg class="search-wave" viewBox="0 0 1440 28" preserveAspectRatio="none" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="display:block;width:100%;height:28px">
    <path d="M0 14 C360 28 720 0 1440 14 L1440 28 L0 28 Z" fill="#EFF6FB"/>
  </svg>
</section>

<!-- MAIN -->

<main id="main" class="body">
  <!-- filters -->
  <div class="filters" id="filters" role="tablist" aria-label="Filter decks">
    <button class="ftab active" data-f="all" role="tab" aria-selected="true">
      <i class="fas fa-ship"></i> All Decks
    </button>
    <button class="ftab" data-f="ent" role="tab" aria-selected="false">
      <span class="dot" style="background:#3730A3"></span> Entertainment
    </button>
    <button class="ftab" data-f="wel" role="tab" aria-selected="false">
      <span class="dot" style="background:#065F46"></span> Wellness
    </button>
    <button class="ftab" data-f="ess" role="tab" aria-selected="false">
      <span class="dot" style="background:#92400E"></span> Staterooms &amp; Services
    </button>
    <button class="ftab" data-f="mine" role="tab" aria-selected="false">
      <i class="fas fa-star" style="color:var(--gold)"></i> My Deck
    </button>
  </div>

  <div class="sec-head">
    <h2 class="sec-title" id="gridLabel">All decks</h2>
    <span class="sec-ct" id="gridCt"></span>
  </div>

  <div class="deck-grid" id="grid" role="list">
    <div class="empty" id="empty">
      <div class="empty-ico">ğŸ”</div>
      <div class="empty-t">No decks match</div>
      <div class="empty-s">Try a different search or filter</div>
      <button class="btn-reset" id="resetBtn"><i class="fas fa-rotate-left"></i> Reset</button>
    </div>
  </div>
</main>

<!-- SPINE -->

<nav class="spine" id="spine" aria-label="Jump to deck"></nav>

<!-- MODAL -->

<div class="backdrop" id="backdrop" role="dialog" aria-modal="true" aria-label="Deck plan viewer">
  <div class="modal" id="modal">
    <div class="modal-hdr">
      <div class="modal-num" id="mNum"></div>
      <div class="modal-txt">
        <div class="modal-name" id="mName"></div>
        <div class="modal-sub" id="mSub"></div>
        <div class="modal-desc" id="mDesc"></div>
      </div>
      <button class="modal-close" id="mClose" aria-label="Close deck plan"><i class="fas fa-times"></i></button>
    </div>
    <div class="modal-strip" id="mStrip"></div>
    <div class="plan-area">
      <button class="plan-prev" id="planPrev" aria-label="Previous deck"><i class="fas fa-chevron-left"></i></button>
      <div class="plan-canvas" id="planCanvas">
        <div class="plan-inner" id="planInner"></div>
      </div>
      <button class="plan-next" id="planNext" aria-label="Next deck"><i class="fas fa-chevron-right"></i></button>
      <div class="zoom-bar">
        <button class="zoom-btn" id="zOut" title="Zoom out"><i class="fas fa-minus"></i></button>
        <span class="zoom-v" id="zVal">100%</span>
        <button class="zoom-btn" id="zIn" title="Zoom in"><i class="fas fa-plus"></i></button>
        <button class="zoom-btn" id="zReset" title="Reset zoom"><i class="fas fa-compress"></i></button>
      </div>
    </div>
    <div class="modal-foot" id="mFoot"></div>
  </div>
</div>

<script>
(function(){
'use strict';

// â”€â”€ DECK DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// svg: the actual file path used in the plan viewer
// pdf: path to PDF if it exists (from the GitHub listing: deck-02.pdf, deck-05.pdf etc.)
// thumb: category used for the card thumbnail colour scheme
const DECKS = [
  {
    n:15, name:'Deck 15', sub:'Sports & Observation', cat:'wel',
    svg:'decks/deck-15-final.min.svg',
    pdf:'decks/deck-15.pdf',
    img:'decks/deck-15.png',
    desc:'Rock climbing wall, jogging track, mini-golf and open-air sports courts with panoramic ocean views.',
    tags:['Rock Climbing','Jogging Track','Mini-Golf','Ocean Views'],
    icons:['fa-person-climbing','fa-person-running','fa-flag','fa-binoculars'],
  },
  {
    n:14, name:'Deck 14', sub:'Sky Deck', cat:'ent',
    svg:'decks/deck-14-final.min.svg',
    pdf:'decks/deck-14.pdf',
    img:'decks/deck-14.png',
    desc:'Viking Crown Lounge for 360Â° panoramas, sky bar and quiet observation terraces.',
    tags:['Viking Crown','Sky Bar','Observation Deck'],
    icons:['fa-martini-glass','fa-glass-water','fa-binoculars'],
  },
  {
    n:13, name:'Deck 13', sub:'Adventure Zone', cat:'ent',
    svg:'decks/deck-13-final.min.svg',
    pdf:'decks/deck-13.pdf',
    img:'decks/deck-13.png',
    desc:'FlowRider surf simulator, Adventure Ocean kids club and rock climbing wall access.',
    tags:['FlowRider','Adventure Ocean','Climbing Wall'],
    icons:['fa-water','fa-child-reaching','fa-mountain'],
  },
  {
    n:12, name:'Deck 12', sub:'Pool Deck', cat:'wel',
    svg:'decks/deck-12-final.min.svg',
    pdf:'decks/deck-12.pdf',
    img:'decks/deck-12.png',
    desc:'Main outdoor pool with live music, adults-only Solarium indoor pool, Windjammer buffet and Pool Bar.',
    tags:['Main Pool','Solarium','Windjammer CafÃ©','Pool Bar'],
    icons:['fa-person-swimming','fa-spa','fa-utensils','fa-beer-mug-empty'],
  },
  {
    n:11, name:'Deck 11', sub:'Fitness & Spa', cat:'wel',
    svg:'decks/deck-11-final.min.svg',
    pdf:'decks/deck-11.pdf',
    img:'decks/deck-11.png',
    desc:'Vitality Spa with thermal suite and massages, panoramic fitness centre, salon and juice bar.',
    tags:['Vitality Spa','Fitness Centre','Salon','Juice Bar'],
    icons:['fa-spa','fa-dumbbell','fa-scissors','fa-blender'],
  },
  {
    n:10, name:'Deck 10', sub:'Stateroom Corridor', cat:'ess',
    svg:'decks/deck-10-final.min.svg',
    pdf:'decks/deck-10.pdf',
    img:'decks/deck-10.png',
    desc:'Premium staterooms with aft balconies. Elevator lobby C/D is the fastest route to dining decks.',
    tags:['Premium Cabins','Aft Balconies','Elevator C/D'],
    icons:['fa-bed','fa-door-open','fa-elevator'],
  },
  {
    n:9, name:'Deck 9', sub:'Midship Cabins', cat:'ess',
    svg:'decks/deck-09-final.min.svg',
    pdf:'decks/deck-09.pdf',
    img:'decks/deck-09.png',
    desc:'Family-friendly staterooms in the centre of the ship â€” easiest access to activities above and dining below.',
    tags:['Family Staterooms','Midship','Balcony Cabins'],
    icons:['fa-bed','fa-family','fa-door-open'],
  },
  {
    n:8, name:'Deck 8', sub:'Stateroom Access', cat:'ess',
    svg:'decks/deck-08-final.min.svg',
    pdf:'decks/deck-08.pdf',
    img:'decks/deck-08.png',
    desc:'Interior and oceanview staterooms. Aft stairwell provides a quiet route to entertainment decks.',
    tags:['Interior Cabins','Oceanview Cabins','Aft Stairwell'],
    icons:['fa-bed','fa-eye','fa-stairs'],
  },
  {
    n:7, name:'Deck 7', sub:'Cabin Transit', cat:'ess',
    svg:'decks/deck-07-final.min.svg',
    pdf:'decks/deck-07.pdf',
    img:'decks/deck-07.png',
    desc:'Quiet stateroom corridor. Elevator stacks C and D here â€” fastest midship route between dining and upper activities.',
    tags:['Staterooms','Elevator C & D','Quiet Corridor'],
    icons:['fa-bed','fa-elevator','fa-route'],
  },
  {
    n:6, name:'Deck 6', sub:'Stateroom Ring', cat:'ess',
    svg:'decks/deck-06-final.min.svg',
    pdf:'decks/deck-06.pdf',
    img:'decks/deck-06.png',
    desc:'Your home deck. Room 6650 sits near the aft â€” quieter, with wake views. Midship elevators reach anywhere in 90 seconds.',
    tags:['Room 6650 (Aft)','Midship Elevators','Wake Views','Quiet Zone'],
    icons:['fa-star','fa-elevator','fa-water','fa-volume-xmark'],
    isMyDeck:true,
  },
  {
    n:5, name:'Deck 5', sub:'Promenade Level', cat:'ent',
    svg:'decks/deck-05-final.min.svg',
    pdf:'decks/deck-05.pdf',
    img:'decks/deck-05.png',
    desc:'Royal Promenade â€” the ship\'s main street. CafÃ© Promenade (24 h), Ben & Jerry\'s, shops, parades and Guest Services.',
    tags:['CafÃ© Promenade 24h','Guest Services','Shops','Parades'],
    icons:['fa-mug-hot','fa-concierge-bell','fa-bag-shopping','fa-masks-theater'],
  },
  {
    n:4, name:'Deck 4', sub:'Dining & Entertainment', cat:'ent',
    svg:'decks/deck-04-final.min.svg',
    pdf:'decks/deck-04.pdf',
    img:'decks/deck-04.png',
    desc:'Main Dining Room (lower level), Studio B ice rink, Royal Theater upper level and Casino Royale.',
    tags:['Main Dining','Studio B','Royal Theater','Casino Royale'],
    icons:['fa-utensils','fa-snowflake','fa-masks-theater','fa-dice'],
  },
  {
    n:3, name:'Deck 3', sub:'Lobby & Guest Services', cat:'ess',
    svg:'decks/deck-03-final.min.svg',
    pdf:'decks/deck-03.pdf',
    img:'decks/deck-03.png',
    desc:'Grand atrium lobby, Shore Excursions desk, Crown & Anchor lounge, Boleros and Champagne Bar.',
    tags:['Grand Lobby','Shore Excursions','Champagne Bar','Boleros'],
    icons:['fa-hotel','fa-map-location-dot','fa-champagne-glasses','fa-music'],
  },
  {
    n:2, name:'Deck 2', sub:'Medical & Embarkation', cat:'ess',
    svg:'decks/deck-02-final.min.svg',
    pdf:'decks/deck-02.pdf',
    img:'decks/deck-02.png',
    desc:'Medical centre, embarkation and disembarkation gangway, and crew support facilities.',
    tags:['Medical Centre','Gangway','Crew Services'],
    icons:['fa-kit-medical','fa-door-open','fa-id-card'],
  },
];

const MY_DECK = 6;
const catLabel = {all:'All decks',ent:'Entertainment',wel:'Wellness',ess:'Staterooms & Services',mine:'My Deck'};

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let activeFilter = 'all';
let query = '';
let current = null; // deck object currently open
let zoom = 1;
let isDragging = false, dragX = 0, dragY = 0, scrollLeft = 0, scrollTop = 0;

// â”€â”€ DOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const $  = id => document.getElementById(id);
const qs = sel => document.querySelector(sel);

const searchEl  = $('search');
const ctEl      = $('ct');
const gridEl    = $('grid');
const emptyEl   = $('empty');
const filterBar = $('filters');
const gridLabel = $('gridLabel');
const gridCt    = $('gridCt');
const spineEl   = $('spine');
const resetBtn  = $('resetBtn');

const backdrop  = $('backdrop');
const mNum      = $('mNum');
const mName     = $('mName');
const mSub      = $('mSub');
const mDesc     = $('mDesc');
const mClose    = $('mClose');
const mStrip    = $('mStrip');
const planCanvas= $('planCanvas');
const planInner = $('planInner');
const mFoot     = $('mFoot');
const planPrev  = $('planPrev');
const planNext  = $('planNext');
const zIn       = $('zIn');
const zOut      = $('zOut');
const zReset    = $('zReset');
const zVal      = $('zVal');

// â”€â”€ FILTER / SEARCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function filtered() {
  return DECKS.filter(d => {
    const fOk = activeFilter === 'all'
      || (activeFilter === 'mine' && d.isMyDeck)
      || d.cat === activeFilter;
    const q = query.trim().toLowerCase();
    const tOk = !q || d.name.toLowerCase().includes(q)
      || d.sub.toLowerCase().includes(q)
      || d.tags.join(' ').toLowerCase().includes(q)
      || d.desc.toLowerCase().includes(q);
    return fOk && tOk;
  });
}

// â”€â”€ THUMB SVG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const THUMBS = {
  ent:['#EEF2FF','#3730A3'],
  wel:['#ECFDF5','#065F46'],
  ess:['#FFFBEB','#92400E'],
};
const DECK_ICONS = {15:'ğŸƒ',14:'ğŸ¸',13:'ğŸ„',12:'ğŸŠ',11:'ğŸ§–',10:'ğŸ›ï¸',9:'ğŸ›ï¸',8:'ğŸ›ï¸',7:'ğŸ›ï¸',6:'â­',5:'ğŸ­',4:'ğŸ²',3:'ğŸ›ï¸',2:'ğŸ¥'};
function thumb(d) {
  const [bg, ac] = THUMBS[d.cat] || THUMBS.ess;
  const em = DECK_ICONS[d.n] || 'ğŸš¢';
  return `<svg viewBox="0 0 280 84" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <rect width="280" height="84" fill="${bg}"/>
    <!-- ship silhouette lanes -->
    <rect x="12" y="28" width="256" height="30" rx="6" fill="${ac}" opacity=".10"/>
    ${[12,60,104,148,192,236].map(x=>`<rect x="${x}" y="30" width="36" height="26" rx="4" fill="${ac}" opacity=".18"/>`).join('')}
    <!-- corridor -->
    <rect x="12" y="40" width="256" height="6" rx="2" fill="${ac}" opacity=".22"/>
    <!-- emoji -->
    <text x="140" y="50" text-anchor="middle" dominant-baseline="middle" font-size="22" opacity=".55">${em}</text>
    <!-- deck number watermark -->
    <text x="14" y="74" font-size="40" font-weight="900" fill="${ac}" opacity=".07" font-family="system-ui" letter-spacing="-2">${d.n}</text>
  </svg>`;
}

// â”€â”€ RENDER CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderCards() {
  // remove existing cards (not the empty state)
  gridEl.querySelectorAll('.card').forEach(el => el.remove());

  const list = filtered();
  ctEl.textContent = `${list.length} deck${list.length !== 1 ? 's' : ''}`;
  ctEl.className = `search-ct${list.length ? ' has-results' : ''}`;
  gridLabel.textContent = catLabel[activeFilter] || 'Decks';
  gridCt.textContent = `${list.length} shown`;

  if (!list.length) { emptyEl.classList.add('show'); return; }
  emptyEl.classList.remove('show');

  list.forEach((d, i) => {
    const el = document.createElement('div');
    el.className = `card ${d.cat}${d.isMyDeck ? ' my-deck' : ''}`;
    el.setAttribute('role','listitem');
    el.setAttribute('tabindex','0');
    el.setAttribute('aria-label',`Open ${d.name}: ${d.sub}`);
    el.style.animationDelay = `${i * 35}ms`;

    const t1 = d.tags[0]||'', t2 = d.tags[1]||'', t3 = d.tags[2]||'';
    el.innerHTML = `
      ${d.isMyDeck ? '<div class="my-badge">â˜… My Deck</div>' : ''}
      <div class="card-top">
        <div class="card-num">${d.n}</div>
        <div class="card-meta">
          <div class="card-name">${d.name}</div>
          <div class="card-sub">${d.sub}</div>
        </div>
        <div class="card-arrow"><i class="fas fa-arrow-right" aria-hidden="true"></i></div>
      </div>
      <div class="card-thumb">${thumb(d)}</div>
      <div class="card-tags">
        ${[t1,t2,t3].filter(Boolean).map(t=>`<span class="tag">${t}</span>`).join('')}
      </div>
    `;
    el.addEventListener('click', () => openDeck(d));
    el.addEventListener('keydown', e => { if (e.key==='Enter'||e.key===' '){e.preventDefault();openDeck(d);} });
    gridEl.insertBefore(el, emptyEl);
  });
}

// â”€â”€ SPINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSpine() {
  spineEl.innerHTML = DECKS.map(d =>
    `<button class="spine-btn${current&&current.n===d.n?' active':''}" data-n="${d.n}" title="${d.name}: ${d.sub}" aria-label="Jump to ${d.name}">${d.n}</button>`
  ).join('');
  spineEl.querySelectorAll('.spine-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const dk = DECKS.find(d => d.n === +btn.dataset.n);
      if (dk) openDeck(dk);
    });
  });
}

// â”€â”€ ZOOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setZoom(v) {
  zoom = Math.min(3.5, Math.max(0.5, v));
  planInner.style.transform = `scale(${zoom})`;
  zVal.textContent = Math.round(zoom*100)+'%';
}

// â”€â”€ PAN (pointer drag) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function initPan() {
  planCanvas.addEventListener('pointerdown', e => {
    if (zoom <= 1) return;
    isDragging = true;
    planCanvas.classList.add('dragging');
    dragX = e.clientX; dragY = e.clientY;
    scrollLeft = planCanvas.scrollLeft;
    scrollTop  = planCanvas.scrollTop;
    planCanvas.setPointerCapture(e.pointerId);
  });
  planCanvas.addEventListener('pointermove', e => {
    if (!isDragging) return;
    planCanvas.scrollLeft = scrollLeft - (e.clientX - dragX);
    planCanvas.scrollTop  = scrollTop  - (e.clientY - dragY);
  });
  planCanvas.addEventListener('pointerup',     () => { isDragging=false; planCanvas.classList.remove('dragging'); });
  planCanvas.addEventListener('pointercancel', () => { isDragging=false; planCanvas.classList.remove('dragging'); });
}

// â”€â”€ LOAD SVG into viewer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadPlan(d) {
  // Show skeleton while loading
  planInner.innerHTML = '<div class="plan-skeleton"></div>';
  zoom = 1;
  planInner.style.transform = 'scale(1)';
  zVal.textContent = '100%';

  // Try loading the SVG as an <img> (works for external SVG files)
  // If it 404s we fall back to a deck illustration placeholder
  const img = new Image();
  img.alt = d.name + ' deck plan';
  img.src = d.svg;
  img.style.cssText = 'max-width:100%;height:auto;border-radius:14px;box-shadow:0 4px 20px rgba(10,46,74,.10);background:#fff;user-select:none;pointer-events:none;display:block';

  img.onload = () => { planInner.innerHTML = ''; planInner.appendChild(img); };
  img.onerror = () => {
    // Fallback: try the .png thumbnail, then generated placeholder
    const fallbackImg = new Image();
    fallbackImg.alt = d.name;
    fallbackImg.src = d.img;
    fallbackImg.style.cssText = img.style.cssText;
    fallbackImg.onload = () => { planInner.innerHTML = ''; planInner.appendChild(fallbackImg); };
    fallbackImg.onerror = () => {
      // Generated SVG placeholder with ship profile
      planInner.innerHTML = buildFallbackSVG(d);
    };
  };
}

function buildFallbackSVG(d) {
  const [bg, ac] = THUMBS[d.cat] || THUMBS.ess;
  return `<div class="plan-placeholder">
    <div class="deck-big">${d.n}</div>
    <p style="font-weight:700;font-size:.95rem;color:var(--navy);margin-bottom:4px">${d.name}</p>
    <p>${d.sub}</p>
    <p style="margin-top:8px;font-size:.75rem;color:#8aabb8">Plan image loading from <code>decks/deck-${String(d.n).padStart(2,'0')}-final.min.svg</code></p>
  </div>`;
}

// â”€â”€ OPEN / CLOSE MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openDeck(d) {
  current = d;
  setZoom(1);

  // header
  mNum.textContent = d.n;
  mNum.className = `modal-num ${d.cat}`;
  mName.textContent = d.name;
  mSub.textContent  = d.sub;
  mDesc.textContent = d.desc;

  // strip nav
  mStrip.innerHTML = DECKS.map(dk =>
    `<button class="strip-btn${dk.n===d.n?' active':''}" data-n="${dk.n}" aria-label="${dk.name}">
       <b>${dk.n}</b><span>${dk.sub.split(' ')[0]}</span>
     </button>`
  ).join('');
  mStrip.querySelectorAll('.strip-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const dk = DECKS.find(x => x.n === +btn.dataset.n);
      if (dk) openDeck(dk);
    });
  });
  // scroll active strip btn into view
  requestAnimationFrame(() => {
    const active = mStrip.querySelector('.strip-btn.active');
    if (active) active.scrollIntoView({inline:'center',behavior:'smooth'});
  });

  // plan
  loadPlan(d);

  // prev / next
  const idx = DECKS.findIndex(x => x.n === d.n);
  planPrev.disabled = idx <= 0;
  planNext.disabled = idx >= DECKS.length - 1;

  // footer chips
  const roomChip = d.isMyDeck
    ? `<span class="chip room-chip"><i class="fas fa-star"></i> Room 6650</span>`
    : '';
  mFoot.innerHTML = `
    <span class="foot-lbl">On this deck</span>
    ${roomChip}
    ${d.tags.map((t,i)=>`<span class="chip"><i class="fas ${d.icons[i]||'fa-circle'}" aria-hidden="true"></i>${t}</span>`).join('')}
  `;

  // open
  backdrop.classList.add('open');
  document.body.style.overflow = 'hidden';
  mClose.focus();
  renderSpine();
}

function closeDeck() {
  backdrop.classList.remove('open');
  document.body.style.overflow = '';
  current = null;
  renderSpine();
}

// â”€â”€ EVENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Filter tabs
filterBar.addEventListener('click', e => {
  const btn = e.target.closest('.ftab');
  if (!btn) return;
  filterBar.querySelectorAll('.ftab').forEach(b => {
    b.classList.toggle('active', b===btn);
    b.setAttribute('aria-selected', b===btn ? 'true':'false');
  });
  activeFilter = btn.dataset.f;
  renderCards();
});

// Search
searchEl.addEventListener('input', e => {
  query = e.target.value;
  renderCards();
});

// Global keys
document.addEventListener('keydown', e => {
  if (e.key === '/' && document.activeElement !== searchEl && !backdrop.classList.contains('open')) {
    e.preventDefault(); searchEl.focus();
  }
  if (e.key === 'Escape' && backdrop.classList.contains('open')) closeDeck();
  if (backdrop.classList.contains('open')) {
    const idx = DECKS.findIndex(d => d.n === current?.n);
    if (e.key === 'ArrowLeft'  && idx > 0)              openDeck(DECKS[idx-1]);
    if (e.key === 'ArrowRight' && idx < DECKS.length-1) openDeck(DECKS[idx+1]);
  }
});

// Modal close button & backdrop
mClose.addEventListener('click', closeDeck);
backdrop.addEventListener('click', e => { if (e.target === backdrop) closeDeck(); });

// Prev / next arrows
planPrev.addEventListener('click', () => {
  const idx = DECKS.findIndex(d => d.n === current?.n);
  if (idx > 0) openDeck(DECKS[idx-1]);
});
planNext.addEventListener('click', () => {
  const idx = DECKS.findIndex(d => d.n === current?.n);
  if (idx < DECKS.length-1) openDeck(DECKS[idx+1]);
});

// Zoom
zIn.addEventListener('click',    () => setZoom(zoom + 0.25));
zOut.addEventListener('click',   () => setZoom(zoom - 0.25));
zReset.addEventListener('click', () => setZoom(1));
// Pinch-zoom (touch)
let lastDist = null;
planCanvas.addEventListener('touchmove', e => {
  if (e.touches.length !== 2) { lastDist=null; return; }
  e.preventDefault();
  const dx = e.touches[0].clientX - e.touches[1].clientX;
  const dy = e.touches[0].clientY - e.touches[1].clientY;
  const dist = Math.hypot(dx,dy);
  if (lastDist !== null) setZoom(zoom * (dist/lastDist));
  lastDist = dist;
}, {passive:false});
planCanvas.addEventListener('touchend', () => { lastDist=null; });

// Reset
resetBtn.addEventListener('click', () => {
  query = ''; searchEl.value = '';
  activeFilter = 'all';
  filterBar.querySelectorAll('.ftab').forEach(b => {
    b.classList.toggle('active', b.dataset.f==='all');
    b.setAttribute('aria-selected', b.dataset.f==='all'?'true':'false');
  });
  renderCards();
});

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
initPan();
renderCards();
renderSpine();

// Convenience: / shortcut hint after 1.5s on desktop
setTimeout(() => {
  if (window.innerWidth > 900 && !searchEl.value) {
    searchEl.placeholder = 'Search decks, venues, amenitiesâ€¦  (press / to focus)';
  }
}, 1500);

})();
</script>

</body>
</html>