<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<meta name="theme-color" content="#0a2e4a" />
<title>Deck Navigator · Adventure of the Seas</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Plus+Jakarta+Sans:wght@800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

<style>
/* =========================================================
   DECK NAVIGATOR V4.2 — IMMERSIVE MAP EDITION
   ========================================================= */

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Inter',system-ui,-apple-system,sans-serif;
  background:#071a2c;
  color:#fff;
  overflow:hidden;
  -webkit-font-smoothing:antialiased;
}

/* Theme */
:root{
  --sky1: rgba(0,180,230,.18);
  --sky2: rgba(255,215,64,.10);
  --sky3: rgba(0,0,0,.55);

  --glass: rgba(10,46,74,.55);
  --glass-brd: rgba(255,255,255,.18);

  --gold:#ffd740;
  --accent:#00b4e6;

  --ease:cubic-bezier(.22,.61,.36,1);
}

/* Cinematic background */
#ocean{position:fixed;inset:0;z-index:-4}
.sky{
  position:fixed;inset:0;z-index:-3;pointer-events:none;
  background:
    radial-gradient(ellipse at 50% 18%, var(--sky1), transparent 60%),
    radial-gradient(ellipse at 18% 86%, var(--sky2), transparent 55%),
    linear-gradient(180deg, rgba(0,0,0,.18), var(--sky3));
}
.vignette{
  position:fixed;inset:0;z-index:-2;pointer-events:none;
  background:
    radial-gradient(ellipse at 50% 20%, rgba(255,255,255,.06), transparent 62%),
    radial-gradient(ellipse at 50% 100%, rgba(0,0,0,.38), transparent 65%);
}
.ship-sil{
  position:fixed;left:50%;bottom:6%;
  transform:translateX(-50%);
  opacity:.06;
  font-size:min(300px,60vw);
  pointer-events:none;
  z-index:-1;
}

/* Header */
header{
  position:sticky;top:0;z-index:100;
  background:rgba(10,46,74,.66);
  backdrop-filter:blur(14px);
  border-bottom:1px solid rgba(255,255,255,.10);
}
.header-inner{
  height:66px;padding:0 1.15rem;
  display:flex;align-items:center;
}
.title{
  font-family:'Plus Jakarta Sans',sans-serif;
  font-weight:950;
}
.sub{font-size:.75rem;opacity:.6;font-weight:800}
.titlewrap{display:flex;flex-direction:column;line-height:1.05}
.spacer{flex:1}

.primary-btn{
  border-radius:999px;
  padding:.6rem 1rem;
  font-weight:900;
  background:linear-gradient(135deg,var(--accent),var(--gold));
  color:#08263d;
  border:none;
  box-shadow:0 12px 40px rgba(0,0,0,.35);
  display:inline-flex;
  align-items:center;
  gap:.5rem;
}

/* Viewer full bleed */
.viewer{
  position:absolute;
  inset:66px 0 0 0;
}
.frame{
  position:absolute;
  inset:12px 12px 16px 12px;
  border-radius:24px;
  background:var(--glass);
  border:1px solid var(--glass-brd);
  backdrop-filter:blur(16px);
  overflow:hidden;
  touch-action:none;
}

.stage{
  position:absolute;inset:0;
  display:flex;align-items:center;justify-content:center;
}
.panZoom{
  transform-origin:center;
  transition:transform 240ms var(--ease);
}
.deckObject{
  width:min(920px,90vw);
  filter:
    drop-shadow(0 40px 120px rgba(0,0,0,.55))
    drop-shadow(0 0 60px rgba(0,180,230,.22));
}

/* Vertical Zoom */
.zoomStack{
  position:absolute;
  left:16px;
  bottom:100px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.zoomStack button{
  width:48px;height:48px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.1);
  color:white;
  font-size:1.1rem;
}

/* Segmented mode toggle */
.modeCluster{
  position:absolute;
  right:16px;
  bottom:16px;
}
.segmented{
  display:flex;
  border-radius:999px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.08);
}
.segmented button{
  padding:.5rem .9rem;
  border:none;
  background:transparent;
  color:white;
  font-weight:900;
}
.segmented button.active{
  background:linear-gradient(135deg,var(--accent),var(--gold));
  color:#08263d;
}

/* Recenter FAB */
.recenter{
  position:absolute;
  left:16px;
  bottom:16px;
  width:52px;height:52px;
  border-radius:999px;
  border:none;
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.18);
  color:white;
  display:flex;align-items:center;justify-content:center;
  opacity:0;
  transform:scale(.8);
  transition:opacity .25s var(--ease), transform .25s var(--ease);
}
.recenter.show{
  opacity:1;
  transform:scale(1);
}

/* Zoom label */
.zoomLabel{
  position:absolute;
  left:16px;
  bottom:60px;
  font-weight:900;
  font-size:.8rem;
  opacity:.8;
}

/* Error */
.errorUI{
  position:absolute;inset:0;
  display:none;align-items:center;justify-content:center;
  flex-direction:column;
  background:rgba(7,26,44,.85);
}
.errorUI.show{display:flex}
</style>
</head>

<body>

<canvas id="ocean"></canvas>
<div class="sky"></div>
<div class="vignette"></div>
<i class="fas fa-ship ship-sil"></i>

<header>
  <div class="header-inner">
    <div class="titlewrap">
      <div class="title">Deck Navigator</div>
      <div class="sub">Adventure of the Seas · Feb 14–20, 2026</div>
    </div>
    <div class="spacer"></div>
    <button class="primary-btn">
      <i class="fas fa-layer-group"></i> Decks
    </button>
  </div>
</header>

<div class="viewer">
  <div class="frame" id="frame">
    <div class="stage">
      <div class="panZoom" id="panZoom">
        <object id="deckObject" class="deckObject" type="image/svg+xml"></object>
      </div>
    </div>

    <div class="zoomStack">
      <button id="zoomIn">+</button>
      <button id="zoomOut">−</button>
    </div>

    <div class="zoomLabel" id="zoomLabel">100% · fill</div>

    <button class="recenter" id="recenterBtn">
      <i class="fas fa-crosshairs"></i>
    </button>

    <div class="modeCluster">
      <div class="segmented">
        <button id="modeFill" class="active">Fill</button>
        <button id="modeAll">All</button>
      </div>
    </div>

    <div class="errorUI" id="errorUI">
      <i class="fas fa-triangle-exclamation fa-2x"></i>
      <div>Deck failed to load</div>
    </div>

  </div>
</div>

<script>
(() => {
"use strict";

const DECKS=[
  {svg:"decks/deck-03-final.min.svg"},
  {svg:"decks/deck-04-final.min.svg"},
  {svg:"decks/deck-05-final.min.svg"}
];

let activeIndex=1;
let scale=1,tx=0,ty=0,fitScale=1;
let viewMode="fill";
let baseW=800,baseH=1200;

const frame=document.getElementById("frame");
const panZoom=document.getElementById("panZoom");
const deckObject=document.getElementById("deckObject");
const zoomLabel=document.getElementById("zoomLabel");
const recenterBtn=document.getElementById("recenterBtn");
const errorUI=document.getElementById("errorUI");

const clamp=(v,min,max)=>Math.min(Math.max(v,min),max);

function updateLabel(){
  zoomLabel.textContent=Math.round(scale*100)+"% · "+viewMode;
}

function applyTransform(){
  panZoom.style.transform=`translate(${tx}px,${ty}px) scale(${scale})`;
  updateLabel();
  recenterBtn.classList.toggle("show",Math.abs(tx)>30||Math.abs(ty)>30);
}

function computeFit(){
  const r=frame.getBoundingClientRect();
  const sW=r.width/baseW;
  const sH=r.height/baseH;
  fitScale=viewMode==="fill"?sW:Math.min(sW,sH);
  fitScale*=1.08;
}

function resetView(){
  computeFit();
  scale=fitScale;
  tx=0;ty=0;
  applyTransform();
}

async function loadDeck(i){
  errorUI.classList.remove("show");
  try{
    const res=await fetch(DECKS[i].svg,{cache:"no-cache"});
    if(!res.ok) throw new Error();
  }catch{
    errorUI.classList.add("show");
    return;
  }
  deckObject.setAttribute("data",DECKS[i].svg);
  deckObject.onload=()=>{
    requestAnimationFrame(()=>{
      const rect=deckObject.getBoundingClientRect();
      baseW=rect.width;baseH=rect.height;
      resetView();
    });
  };
}

document.getElementById("zoomIn").onclick=()=>{
  scale=clamp(scale*1.15,.5,4);
  applyTransform();
};
document.getElementById("zoomOut").onclick=()=>{
  scale=clamp(scale/1.15,.5,4);
  applyTransform();
};
document.getElementById("modeFill").onclick=()=>{
  viewMode="fill";
  document.getElementById("modeFill").classList.add("active");
  document.getElementById("modeAll").classList.remove("active");
  resetView();
};
document.getElementById("modeAll").onclick=()=>{
  viewMode="all";
  document.getElementById("modeAll").classList.add("active");
  document.getElementById("modeFill").classList.remove("active");
  resetView();
};
recenterBtn.onclick=resetView;

/* Pointer */
let startPan={x:0,y:0,tx:0,ty:0};
frame.addEventListener("pointerdown",e=>{
  startPan={x:e.clientX,y:e.clientY,tx,ty};
  frame.setPointerCapture(e.pointerId);
});
frame.addEventListener("pointermove",e=>{
  if(e.buttons!==1)return;
  tx=startPan.tx+(e.clientX-startPan.x);
  ty=startPan.ty+(e.clientY-startPan.y);
  applyTransform();
});

/* Ocean */
const ocean=document.getElementById("ocean");
const ctx=ocean.getContext("2d",{alpha:true});
let t=0;
function resize(){
  const dpr=Math.min(2,window.devicePixelRatio||1);
  ocean.width=window.innerWidth*dpr;
  ocean.height=window.innerHeight*dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
function draw(){
  const w=window.innerWidth,h=window.innerHeight;
  ctx.clearRect(0,0,w,h);
  for(let i=0;i<3;i++){
    const amp=20+i*10;
    const base=h*(.5+i*.05);
    ctx.beginPath();
    ctx.moveTo(0,base);
    for(let x=0;x<w;x+=8){
      ctx.lineTo(x,base+Math.sin(x*.01+t*(.9+i*.2))*amp);
    }
    ctx.lineTo(w,h);
    ctx.lineTo(0,h);
    ctx.closePath();
    ctx.fillStyle=`rgba(0,180,230,${.12-i*.03})`;
    ctx.fill();
  }
  t+=.012;
  requestAnimationFrame(draw);
}
window.addEventListener("resize",resize);

resize();
draw();
loadDeck(activeIndex);

})();
</script>
</body>
</html>