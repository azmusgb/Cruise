<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deck Explorer Â· Adventure of the Seas</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Plus+Jakarta+Sans:wght@800;900&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Inter',system-ui;
  background:#071a2c;
  color:#fff;
  overflow:hidden;
}

/* Header */
header{
  position:fixed;top:0;width:100%;
  height:60px;
  backdrop-filter:blur(12px);
  background:rgba(10,46,74,.8);
  display:flex;align-items:center;
  padding:0 1rem;
  z-index:100;
}
.title{font-family:'Plus Jakarta Sans';font-weight:900}
.spacer{flex:1}
.search{
  padding:.4rem .8rem;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.1);
  color:white;
}

/* Viewer */
.viewer{
  position:absolute;
  top:60px;
  bottom:60px;
  left:0;
  right:0;
  overflow:hidden;
  touch-action:none;
  cursor:grab;
}
canvas{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
}

/* Deck Selector */
.deck-bar{
  position:fixed;
  bottom:0;width:100%;
  height:60px;
  backdrop-filter:blur(12px);
  background:rgba(10,46,74,.8);
  display:flex;justify-content:center;align-items:center;
  gap:.5rem;
}
.deck-btn{
  padding:.4rem .9rem;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.1);
  color:white;
  font-size:.8rem;
  cursor:pointer;
}
.deck-btn.active{
  background:#00b4e6;
  color:#071a2c;
}
</style>
</head>
<body>

<header>
  <div class="title">Deck Explorer</div>
  <div class="spacer"></div>
  <input id="search" class="search" placeholder="Find cabin #" />
</header>

<div class="viewer" id="viewer">
  <canvas id="deckCanvas"></canvas>
</div>

<div class="deck-bar" id="deckBar"></div>

<script>
(function(){
'use strict';

/* ---------------- CONFIG ---------------- */

const DECKS = [3,6,8];
const ROOMS = {
  3:['3622'],
  6:['6650'],
  8:['8528','8370','8612']
};

/* ---------------- DOM ---------------- */

const viewer = document.getElementById('viewer');
const canvas = document.getElementById('deckCanvas');
const ctx = canvas.getContext('2d');
const deckBar = document.getElementById('deckBar');
const search = document.getElementById('search');

if(!viewer || !canvas || !ctx || !deckBar || !search){
  console.error('Required DOM elements missing.');
  return;
}

/* ---------------- STATE ---------------- */

let currentDeck = 6;
let scale = 1;
let offsetX = 0;
let offsetY = 0;
let dragging = false;
let dragStartX = 0;
let dragStartY = 0;

/* ---------------- INIT ---------------- */

function resizeCanvas(){
  const dpr = window.devicePixelRatio || 1;
  canvas.width = viewer.clientWidth * dpr;
  canvas.height = viewer.clientHeight * dpr;
  canvas.style.width = viewer.clientWidth + 'px';
  canvas.style.height = viewer.clientHeight + 'px';
  ctx.setTransform(dpr,0,0,dpr,0,0);
  draw();
}
window.addEventListener('resize', resizeCanvas);

/* ---------------- DRAW ---------------- */

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.save();
  ctx.translate(canvas.width/2 + offsetX, canvas.height/2 + offsetY);
  ctx.scale(scale,scale);

  ctx.fillStyle='#0a2e4a';
  ctx.fillRect(-600,-300,1200,600);

  ctx.fillStyle='#00b4e6';
  ctx.font='40px Inter';
  ctx.fillText('Deck '+currentDeck,-520,-220);

  ctx.font='20px Inter';

  ROOMS[currentDeck].forEach((room,i)=>{
    const x=-400+i*200;
    const y=0;
    ctx.fillStyle='#ffffff';
    ctx.fillRect(x,y,120,60);
    ctx.fillStyle='#071a2c';
    ctx.fillText(room,x+20,y+35);
  });

  ctx.restore();
}

/* ---------------- DECK BUTTONS ---------------- */

DECKS.forEach(d=>{
  const btn=document.createElement('button');
  btn.className='deck-btn'+(d===currentDeck?' active':'');
  btn.textContent='Deck '+d;
  btn.addEventListener('click',()=>{
    currentDeck=d;
    document.querySelectorAll('.deck-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    draw();
  });
  deckBar.appendChild(btn);
});

/* ---------------- SEARCH ---------------- */

search.addEventListener('input',()=>{
  const val = search.value.trim();
  if(!val) return;

  for(const [deck,list] of Object.entries(ROOMS)){
    if(list.includes(val)){
      currentDeck = Number(deck);
      document.querySelectorAll('.deck-btn').forEach(b=>{
        b.classList.toggle('active',b.textContent.includes(deck));
      });
      draw();
    }
  }
});

/* ---------------- ZOOM ---------------- */

viewer.addEventListener('wheel',e=>{
  e.preventDefault();
  const zoom = e.deltaY > 0 ? 0.9 : 1.1;
  scale *= zoom;
  scale = Math.max(0.5, Math.min(scale, 3));
  draw();
},{passive:false});

/* ---------------- DRAG ---------------- */

viewer.addEventListener('pointerdown',e=>{
  dragging=true;
  dragStartX = e.clientX - offsetX;
  dragStartY = e.clientY - offsetY;
  viewer.setPointerCapture(e.pointerId);
});
viewer.addEventListener('pointermove',e=>{
  if(!dragging) return;
  offsetX = e.clientX - dragStartX;
  offsetY = e.clientY - dragStartY;
  draw();
});
viewer.addEventListener('pointerup',e=>{
  dragging=false;
  viewer.releasePointerCapture(e.pointerId);
});

/* ---------------- START ---------------- */

resizeCanvas();

})();
</script>

</body>
</html>