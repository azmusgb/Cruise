<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0">
<title>Deck Navigator · Adventure of the Seas</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Plus+Jakarta+Sans:wght@700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ── Reset & Base ─────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --navy:    #0a2e4a;
  --navy2:   #083452;
  --blue:    #0f4f76;
  --accent:  #00b4e6;
  --gold:    #ffd740;
  --gold2:   #c6a15b;
  --white:   #ffffff;
  --bg:      #f0f6fb;
  --bg2:     #e4eff8;
  --card-bg: #ffffff;
  --text:    #0d2236;
  --muted:   #5a7a93;
  --radius:  22px;
  --shadow:  0 8px 32px rgba(10,46,74,.13);
  --shadow-lg: 0 20px 60px rgba(10,46,74,.22);
}

html { scroll-behavior: smooth; }

body {
  font-family: 'Inter', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ── Header ───────────────────────────────────── */
.site-header {
  background: linear-gradient(135deg, var(--navy) 0%, var(--navy2) 100%);
  padding: 0 1.5rem;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 20px rgba(0,0,0,.3);
}

.header-inner {
  max-width: 1200px;
  margin: auto;
  height: 62px;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.header-brand {
  display: flex;
  align-items: center;
  gap: .6rem;
  text-decoration: none;
  color: var(--white);
}

.header-brand i {
  color: var(--gold);
  font-size: 1.2rem;
}

.header-brand-text { line-height: 1.2; }

.header-brand-title {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-weight: 800;
  font-size: .95rem;
  color: var(--white);
  display: block;
}

.header-brand-sub {
  font-size: .7rem;
  color: rgba(255,255,255,.55);
  display: block;
}

.header-spacer { flex: 1; }

.header-badge {
  background: rgba(255,215,64,.15);
  border: 1px solid rgba(255,215,64,.3);
  color: var(--gold);
  font-size: .72rem;
  font-weight: 700;
  padding: .3rem .75rem;
  border-radius: 999px;
  white-space: nowrap;
}

/* ── Hero ─────────────────────────────────────── */
.hero {
  background: linear-gradient(160deg, var(--navy) 0%, #0d3f60 60%, #0f5580 100%);
  padding: 3.5rem 1.5rem 3rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 70% 0%, rgba(0,180,230,.18) 0%, transparent 60%),
              radial-gradient(ellipse at 20% 100%, rgba(255,215,64,.1) 0%, transparent 50%);
  pointer-events: none;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  background: rgba(255,255,255,.1);
  border: 1px solid rgba(255,255,255,.2);
  color: rgba(255,255,255,.9);
  font-size: .78rem;
  font-weight: 600;
  padding: .4rem 1rem;
  border-radius: 999px;
  margin-bottom: 1.25rem;
}

.hero-badge i { color: var(--gold); }

.hero h1 {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-weight: 900;
  font-size: clamp(2rem, 5vw, 3rem);
  color: var(--white);
  margin-bottom: .75rem;
  line-height: 1.1;
}

.hero h1 em {
  color: var(--accent);
  font-style: normal;
}

.hero-sub {
  color: rgba(255,255,255,.65);
  font-size: .95rem;
  max-width: 480px;
  margin: 0 auto 2rem;
  line-height: 1.6;
}

/* ── Search ───────────────────────────────────── */
.search-wrap {
  display: flex;
  align-items: center;
  max-width: 420px;
  margin: 0 auto;
  background: rgba(255,255,255,.12);
  border: 1px solid rgba(255,255,255,.22);
  border-radius: 999px;
  padding: .2rem .2rem .2rem 1.1rem;
  backdrop-filter: blur(8px);
  transition: .2s;
}

.search-wrap:focus-within {
  background: rgba(255,255,255,.18);
  border-color: rgba(0,180,230,.7);
  box-shadow: 0 0 0 3px rgba(0,180,230,.2);
}

.search-wrap i {
  color: rgba(255,255,255,.55);
  font-size: .85rem;
  margin-right: .5rem;
  flex-shrink: 0;
}

.search-wrap input {
  flex: 1;
  background: none;
  border: none;
  outline: none;
  color: var(--white);
  font-size: .92rem;
  font-family: inherit;
  min-width: 0;
}

.search-wrap input::placeholder { color: rgba(255,255,255,.45); }

.search-wrap button {
  background: rgba(255,255,255,.15);
  border: none;
  color: var(--white);
  width: 34px;
  height: 34px;
  border-radius: 50%;
  cursor: pointer;
  flex-shrink: 0;
  transition: .2s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .8rem;
}

.search-wrap button:hover { background: rgba(255,255,255,.28); }

/* ── Grid Section ─────────────────────────────── */
.grid-section {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2.5rem 1.25rem 5rem;
}

.grid-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
}

.grid-meta h2 {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-weight: 800;
  font-size: 1.15rem;
  color: var(--navy);
}

.grid-count {
  font-size: .8rem;
  color: var(--muted);
  font-weight: 600;
  background: var(--bg2);
  padding: .3rem .8rem;
  border-radius: 999px;
}

.deck-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1.1rem;
}

/* ── Deck Card ─────────────────────────────────── */
.deck-card {
  background: var(--card-bg);
  border-radius: var(--radius);
  padding: 1.5rem 1.25rem 1.25rem;
  cursor: pointer;
  box-shadow: var(--shadow);
  border: 1.5px solid transparent;
  transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
  position: relative;
  overflow: hidden;
  user-select: none;
}

.deck-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--accent), var(--gold));
  opacity: 0;
  transition: opacity .22s;
}

.deck-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
  border-color: rgba(0,180,230,.25);
}

.deck-card:hover::before { opacity: 1; }

.deck-card:active { transform: translateY(-2px) scale(.99); }

.card-num {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-weight: 900;
  font-size: 2.2rem;
  color: var(--accent);
  line-height: 1;
  margin-bottom: .3rem;
}

.card-name {
  font-weight: 700;
  font-size: .95rem;
  color: var(--navy);
  margin-bottom: .35rem;
}

.card-hint {
  font-size: .75rem;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: .35rem;
}

.card-hint i { font-size: .65rem; }

.card-arrow {
  position: absolute;
  right: 1.1rem;
  bottom: 1.1rem;
  width: 30px;
  height: 30px;
  background: var(--bg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--accent);
  font-size: .7rem;
  transition: .2s;
}

.deck-card:hover .card-arrow {
  background: var(--accent);
  color: var(--white);
}

/* ── Empty State ────────────────────────────────── */
.empty-state {
  text-align: center;
  padding: 4rem 1rem;
  color: var(--muted);
  grid-column: 1 / -1;
}

.empty-state i { font-size: 2.5rem; margin-bottom: 1rem; opacity: .4; display: block; }

/* ── Modal Backdrop ─────────────────────────────── */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(5,18,35,.88);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: env(safe-area-inset-top, 1rem) 1rem env(safe-area-inset-bottom, 1rem);
  opacity: 0;
  pointer-events: none;
  transition: opacity .25s ease;
}

.modal-backdrop.is-open {
  opacity: 1;
  pointer-events: auto;
}

/* ── Modal ──────────────────────────────────────── */
.modal {
  background: #fff;
  border-radius: 28px;
  width: min(98%, 1100px);
  max-height: calc(100vh - 2rem);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 30px 80px rgba(0,0,0,.45);
  transform: scale(.96) translateY(12px);
  transition: transform .28s cubic-bezier(.22,.61,.36,1);
}

.modal-backdrop.is-open .modal {
  transform: scale(1) translateY(0);
}

/* ── Modal Header ───────────────────────────────── */
.modal-header {
  background: linear-gradient(135deg, var(--navy) 0%, var(--blue) 100%);
  padding: 1.25rem 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-shrink: 0;
}

.modal-header-info { flex: 1; min-width: 0; }

.modal-deck-num {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-weight: 900;
  font-size: 1.9rem;
  color: var(--accent);
  line-height: 1;
}

.modal-deck-name {
  font-size: .85rem;
  color: rgba(255,255,255,.7);
  margin-top: .1rem;
}

.modal-nav {
  display: flex;
  gap: .5rem;
}

.modal-nav-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1.5px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.1);
  color: var(--white);
  cursor: pointer;
  transition: .2s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .85rem;
}

.modal-nav-btn:hover { background: rgba(255,255,255,.25); }
.modal-nav-btn:disabled { opacity: .3; cursor: default; }

.modal-close {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1.5px solid rgba(255,255,255,.25);
  background: rgba(255,255,255,.1);
  color: var(--white);
  cursor: pointer;
  transition: .2s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .9rem;
  flex-shrink: 0;
}

.modal-close:hover { background: rgba(220,60,60,.5); border-color: rgba(220,60,60,.6); }

/* ── Plan Viewer ────────────────────────────────── */
.plan-viewer {
  flex: 1;
  overflow: hidden;
  position: relative;
  background: radial-gradient(circle at center, #103a60, #071e33);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
}

.plan-stage {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: auto;
  cursor: grab;
  padding: 1rem;
}

.plan-stage:active { cursor: grabbing; }

.plan-stage img {
  max-width: 100%;
  height: auto;
  display: block;
  transform-origin: center center;
  transition: transform .15s ease;
  border-radius: 8px;
  pointer-events: none;
  user-select: none;
}

.plan-loader {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  color: rgba(255,255,255,.6);
  font-size: .9rem;
}

.spinner {
  width: 36px;
  height: 36px;
  border: 3px solid rgba(255,255,255,.15);
  border-top-color: var(--accent);
  border-radius: 50%;
  animation: spin .8s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

.plan-error {
  position: absolute;
  inset: 0;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .75rem;
  color: rgba(255,255,255,.5);
  text-align: center;
  padding: 2rem;
}

.plan-error i { font-size: 2.5rem; opacity: .4; }
.plan-error p { font-size: .85rem; line-height: 1.6; }

/* ── Zoom Bar ───────────────────────────────────── */
.zoom-bar {
  background: #f0f6fb;
  border-top: 1px solid rgba(0,0,0,.07);
  padding: .75rem 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .6rem;
  flex-shrink: 0;
}

.zoom-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1.5px solid rgba(0,0,0,.1);
  background: var(--white);
  color: var(--navy);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .8rem;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
  transition: .18s;
}

.zoom-btn:hover { background: var(--accent); color: var(--white); border-color: var(--accent); }

.zoom-label {
  font-size: .82rem;
  font-weight: 700;
  color: var(--navy);
  min-width: 52px;
  text-align: center;
}

.zoom-divider {
  width: 1px;
  height: 20px;
  background: rgba(0,0,0,.1);
  margin: 0 .2rem;
}

/* ── Responsive ─────────────────────────────────── */
@media (max-width: 600px) {
  .hero { padding: 2.5rem 1rem 2rem; }
  .modal { border-radius: 20px 20px 0 0; width: 100%; max-height: 92vh; margin-top: auto; }
  .modal-backdrop { align-items: flex-end; padding: 0; }
  .deck-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: .75rem; }
  .card-num { font-size: 1.8rem; }
  .modal-header { padding: 1rem 1.1rem; }
  .modal-deck-num { font-size: 1.5rem; }
}
</style>

</head>

<body>

<!-- ── Header ─────────────────────────────────────── -->

<header class="site-header">
  <div class="header-inner">
    <a href="#" class="header-brand">
      <i class="fas fa-crown"></i>
      <div class="header-brand-text">
        <span class="header-brand-title">Royal Caribbean</span>
        <span class="header-brand-sub">Adventure of the Seas</span>
      </div>
    </a>
    <div class="header-spacer"></div>
    <span class="header-badge"><i class="fas fa-calendar-alt" style="margin-right:.4rem"></i>Feb 14–20, 2026</span>
  </div>
</header>

<!-- ── Hero ───────────────────────────────────────── -->

<section class="hero">
  <div class="hero-badge">
    <i class="fas fa-ship"></i>
    Adventure of the Seas · 13 Decks
  </div>
  <h1>Explore Every <em>Deck</em></h1>
  <p class="hero-sub">Find staterooms, restaurants, pools, and amenities across every level of the ship.</p>

  <div class="search-wrap">
    <i class="fas fa-search"></i>
    <input id="searchInput" type="search" placeholder="Search decks…" autocomplete="off" aria-label="Search decks">
    <button id="searchClear" hidden aria-label="Clear search"><i class="fas fa-times"></i></button>
  </div>
</section>

<!-- ── Grid ───────────────────────────────────────── -->

<section class="grid-section">
  <div class="grid-meta">
    <h2>Deck Plans</h2>
    <span id="gridCount" class="grid-count"></span>
  </div>
  <div id="deckGrid" class="deck-grid"></div>
</section>

<!-- ── Modal ──────────────────────────────────────── -->

<div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalDeckName">

  <div class="modal">

```
<header class="modal-header">
  <div class="modal-header-info">
    <div id="modalDeckNum" class="modal-deck-num"></div>
    <div id="modalDeckName" class="modal-deck-name"></div>
  </div>
  <div class="modal-nav">
    <button id="btnPrev" class="modal-nav-btn" aria-label="Previous deck"><i class="fas fa-chevron-left"></i></button>
    <button id="btnNext" class="modal-nav-btn" aria-label="Next deck"><i class="fas fa-chevron-right"></i></button>
  </div>
  <button id="btnClose" class="modal-close" aria-label="Close"><i class="fas fa-times"></i></button>
</header>

<div class="plan-viewer">
  <div id="planLoader" class="plan-loader">
    <div class="spinner"></div>
    <span>Loading deck plan…</span>
  </div>
  <div id="planError" class="plan-error">
    <i class="fas fa-exclamation-triangle"></i>
    <p>Deck plan unavailable.<br>The image file may not be uploaded yet.</p>
  </div>
  <div id="planStage" class="plan-stage"></div>
</div>

<div class="zoom-bar">
  <button id="zoomOut" class="zoom-btn" aria-label="Zoom out"><i class="fas fa-minus"></i></button>
  <span id="zoomLabel" class="zoom-label">100%</span>
  <button id="zoomIn" class="zoom-btn" aria-label="Zoom in"><i class="fas fa-plus"></i></button>
  <div class="zoom-divider"></div>
  <button id="zoomReset" class="zoom-btn" aria-label="Reset zoom"><i class="fas fa-compress-arrows-alt"></i></button>
</div>
```

  </div>
</div>

<script>
(() => {
  'use strict';

  /* ── Data ─────────────────────────────────── */


  /* ============================
RCCL Deck Navigator
============================ */
const DECKS = [
  {n:15, name: "Deck 15", svg: "decks/deck-15-final.min.svg"},
  {n:14, name: "Deck 14", svg: "decks/deck-14-final.min.svg"},
  {n:13, name: "Deck 13", svg: "decks/deck-13-final.min.svg"},
  {n:12, name: "Deck 12", svg: "decks/deck-12-final.min.svg"},
  {n:11, name: "Deck 11", svg: "decks/deck-11-final.min.svg"},
  {n:10, name: "Deck 10", svg: "decks/deck-10-final.min.svg"},
  {n:9,  name: "Deck 9",  svg: "decks/deck-09-final.min.svg"},
  {n:8,  name: "Deck 8",  svg: "decks/deck-08-final.min.svg"},
  {n:7,  name: "Deck 7",  svg: "decks/deck-07-final.min.svg"},
  {n:6,  name: "Deck 6",  svg: "decks/deck-06-final.min.svg"},
  {n:5,  name: "Deck 5",  svg: "decks/deck-05-final.min.svg"},
  {n:4,  name: "Deck 4",  svg: "decks/deck-04-final.min.svg"},
  {n:3,  name: "Deck 3",  svg: "decks/deck-03-final.min.svg"},
  {n:2,  name: "Deck 2",  svg: "decks/deck-02-final.min.svg"}
];



// ── DOM refs — matched to decks.html IDs ──────

  function svgPath(n) {
    const pad = String(n).padStart(2,'0');
    return `decks/deck-${pad}-final.min.svg`;
  }

  /* ── State ────────────────────────────────── */
  let filtered = [...DECKS];
  let currentIdx = 0;
  let zoom = 1;

  /* ── Elements ────────────────────────────── */
  const grid         = document.getElementById('deckGrid');
  const gridCount    = document.getElementById('gridCount');
  const searchInput  = document.getElementById('searchInput');
  const searchClear  = document.getElementById('searchClear');
  const backdrop     = document.getElementById('modalBackdrop');
  const modalNum     = document.getElementById('modalDeckNum');
  const modalName    = document.getElementById('modalDeckName');
  const planStage    = document.getElementById('planStage');
  const planLoader   = document.getElementById('planLoader');
  const planError    = document.getElementById('planError');
  const btnClose     = document.getElementById('btnClose');
  const btnPrev      = document.getElementById('btnPrev');
  const btnNext      = document.getElementById('btnNext');
  const zoomInBtn    = document.getElementById('zoomIn');
  const zoomOutBtn   = document.getElementById('zoomOut');
  const zoomResetBtn = document.getElementById('zoomReset');
  const zoomLabel    = document.getElementById('zoomLabel');

  /* ── Render Grid ─────────────────────────── */
  function renderGrid(list) {
    filtered = list;
    grid.innerHTML = '';
    gridCount.textContent = `${list.length} of ${DECKS.length}`;

    if (!list.length) {
      grid.innerHTML = `<div class="empty-state">
        <i class="fas fa-search"></i>
        <p>No decks match your search.</p>
      </div>`;
      return;
    }

    list.forEach((deck, i) => {
      const card = document.createElement('div');
      card.className = 'deck-card';
      card.setAttribute('role', 'button');
      card.setAttribute('tabindex', '0');
      card.setAttribute('aria-label', `Open ${deck.name}`);
      card.innerHTML = `
        <div class="card-num">${deck.n}</div>
        <div class="card-name">${deck.name}</div>
        <div class="card-hint"><i class="fas fa-map-pin"></i>${deck.hint}</div>
        <div class="card-arrow"><i class="fas fa-arrow-right"></i></div>
      `;
      card.addEventListener('click', () => openModal(i));
      card.addEventListener('keypress', e => { if (e.key === 'Enter') openModal(i); });
      grid.appendChild(card);
    });
  }

  /* ── Modal ───────────────────────────────── */
  function openModal(idx) {
    currentIdx = idx;
    backdrop.classList.add('is-open');
    document.body.style.overflow = 'hidden';
    loadDeck();
  }

  function closeModal() {
    backdrop.classList.remove('is-open');
    document.body.style.overflow = '';
    planStage.innerHTML = '';
    zoom = 1;
    updateZoomLabel();
  }

  function loadDeck() {
    const deck = filtered[currentIdx];
    modalNum.textContent  = `Deck ${deck.n}`;
    modalName.textContent = deck.hint;

    btnPrev.disabled = currentIdx === 0;
    btnNext.disabled = currentIdx === filtered.length - 1;

    planStage.innerHTML = '';
    planLoader.style.display = 'flex';
    planError.style.display  = 'none';
    zoom = 1;
    updateZoomLabel();

    const img = new Image();
    img.alt = deck.name;
    img.style.transform = 'scale(1)';

    img.onload = () => {
      planLoader.style.display = 'none';
      planStage.appendChild(img);
    };

    img.onerror = () => {
      planLoader.style.display = 'none';
      planError.style.display  = 'flex';
    };

    img.src = svgPath(deck.n);
  }

  /* ── Zoom ────────────────────────────────── */
  function setZoom(val) {
    zoom = Math.min(4, Math.max(0.5, val));
    const img = planStage.querySelector('img');
    if (img) img.style.transform = `scale(${zoom})`;
    updateZoomLabel();
  }

  function updateZoomLabel() {
    zoomLabel.textContent = `${Math.round(zoom * 100)}%`;
  }

  /* ── Search ──────────────────────────────── */
  searchInput.addEventListener('input', e => {
    const q = e.target.value.trim().toLowerCase();
    searchClear.hidden = !q;
    renderGrid(q
      ? DECKS.filter(d =>
          d.name.toLowerCase().includes(q) ||
          String(d.n).includes(q) ||
          d.hint.toLowerCase().includes(q)
        )
      : [...DECKS]
    );
  });

  searchClear.addEventListener('click', () => {
    searchInput.value = '';
    searchClear.hidden = true;
    renderGrid([...DECKS]);
  });

  /* ── Event Listeners ─────────────────────── */
  btnClose.addEventListener('click', closeModal);
  btnPrev.addEventListener('click',  () => { if (currentIdx > 0) { currentIdx--; loadDeck(); } });
  btnNext.addEventListener('click',  () => { if (currentIdx < filtered.length - 1) { currentIdx++; loadDeck(); } });

  zoomInBtn.addEventListener('click',    () => setZoom(zoom + 0.2));
  zoomOutBtn.addEventListener('click',   () => setZoom(zoom - 0.2));
  zoomResetBtn.addEventListener('click', () => setZoom(1));

  backdrop.addEventListener('click', e => { if (e.target === backdrop) closeModal(); });

  document.addEventListener('keydown', e => {
    if (!backdrop.classList.contains('is-open')) return;
    if (e.key === 'Escape')      closeModal();
    if (e.key === 'ArrowLeft')   btnPrev.click();
    if (e.key === 'ArrowRight')  btnNext.click();
    if (e.key === '+')           setZoom(zoom + 0.2);
    if (e.key === '-')           setZoom(zoom - 0.2);
  });

  /* ── Pinch-to-zoom (touch) ───────────────── */
  let initDist = 0, initZoom = 1;

  planStage.addEventListener('touchstart', e => {
    if (e.touches.length === 2) {
      initDist = Math.hypot(
        e.touches[0].clientX - e.touches[1].clientX,
        e.touches[0].clientY - e.touches[1].clientY
      );
      initZoom = zoom;
    }
  }, { passive: true });

  planStage.addEventListener('touchmove', e => {
    if (e.touches.length === 2) {
      const dist = Math.hypot(
        e.touches[0].clientX - e.touches[1].clientX,
        e.touches[0].clientY - e.touches[1].clientY
      );
      setZoom(initZoom * (dist / initDist));
    }
  }, { passive: true });

  /* ── Init ────────────────────────────────── */
  renderGrid([...DECKS]);

})();
</script>

</body>
</html>