<!DOCTYPE html>
<html lang="en" data-theme="light" data-theme-mode="system">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a2540">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.svg">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%230a2540%22>ğŸš¢</text></svg>">
  <title>Deck Plans | Adventure of the Seas | Royal Caribbean</title>

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">

  <!-- Shared shell -->
  <script src="js/shared-layout.js?v=2" defer></script>
</head>

<body class="decks-page page-shell">
  <div id="sharedHeader" data-page="decks"></div>

  <main id="main" class="decks-shell" aria-label="Deck plans">
    <section class="deck-hero">
      <div class="container">
        <div class="deck-hero__eyebrow">Adventure of the Seas Â· Feb 14â€“20, 2026</div>
        <h1 class="deck-hero__title">Deck Plans, Simplified</h1>
        <p class="deck-hero__subtitle">One navigation, clear categories, fast access to the decks that matter most.</p>
        <div class="deck-hero__actions">
          <a class="btn btn--primary" href="#deck-directory">Browse decks</a>
          <a class="btn btn--secondary" href="rooms.html">Jump to staterooms</a>
        </div>
      </div>
    </section>

    <section class="main-navigation" aria-label="Deck navigation">
      <div class="container main-navigation__inner">
        <div class="main-navigation__search" role="search">
          <i class="fas fa-search" aria-hidden="true"></i>
          <input id="deckSearch" type="search" placeholder="Search decks, venues, or amenities" aria-label="Search decks" autocomplete="off" />
          <span class="main-navigation__hint">Press / to focus</span>
        </div>
        <div class="main-navigation__filters" aria-label="Deck categories">
          <button class="pill-btn is-active" data-filter="all">All</button>
          <button class="pill-btn" data-filter="entertainment">Entertainment</button>
          <button class="pill-btn" data-filter="wellness">Wellness</button>
          <button class="pill-btn" data-filter="essential">Essential</button>
        </div>
      </div>
    </section>

    <section id="deck-directory" class="deck-directory container" aria-label="Deck directory by category">
      <article class="category-card" data-category="entertainment">
        <div class="category-card__heading">ğŸ­ Entertainment Decks</div>
        <div class="deck-pills" id="pill-entertainment"></div>
      </article>
      <article class="category-card" data-category="wellness">
        <div class="category-card__heading">ğŸ§˜ Wellness Decks</div>
        <div class="deck-pills" id="pill-wellness"></div>
      </article>
      <article class="category-card" data-category="essential">
        <div class="category-card__heading">ğŸ§­ Essential Decks</div>
        <div class="deck-pills" id="pill-essential"></div>
      </article>
    </section>

    <section class="deck-grid container" aria-label="Deck list">
      <div class="deck-grid__header">
        <div>
          <h2 class="deck-grid__title">Deck overview</h2>
          <p class="deck-grid__subtitle">Tap any deck to open the interactive plan.</p>
        </div>
        <div class="deck-grid__counts">
          <div class="count-chip"><span id="countVisible">0</span> showing</div>
          <div class="count-chip"><span id="countTotal">0</span> total</div>
        </div>
      </div>
      <div id="deckCards" class="deck-cards" role="list"></div>
      <div id="emptyState" class="deck-empty" hidden>
        <div class="empty-illustration" aria-hidden="true">ğŸš¢</div>
        <h3>No matching decks found</h3>
        <div class="empty-diagnostics">
          <p>Your search didnâ€™t match any decks.</p>
          <p>Try one of these quick links:</p>
          <ul>
            <li><button class="link-button" data-suggest="pool">Main Pool Â· Deck 12</button></li>
            <li><button class="link-button" data-suggest="spa">Vitality Spa Â· Deck 11</button></li>
            <li><button class="link-button" data-suggest="promenade">Promenade Â· Deck 5</button></li>
          </ul>
        </div>
        <div class="empty-actions">
          <button class="btn btn--primary" id="clearFilters">Clear filters</button>
          <button class="btn btn--secondary" id="showAll">Browse all decks</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Deck modal -->
  <div class="deck-modal" id="deckModal" aria-hidden="true">
    <div class="deck-modal__backdrop" data-action="close-modal"></div>
    <div class="deck-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
      <div class="deck-modal__toolbar">
        <div class="toolbar-group" aria-label="Zoom controls">
          <button class="btn-icon" data-action="zoom-in" aria-label="Zoom in">+</button>
          <button class="btn-icon" data-action="zoom-out" aria-label="Zoom out">âˆ’</button>
          <button class="btn-icon" data-action="zoom-reset" aria-label="Reset view">â†º</button>
          <span class="zoom-level" id="zoomLevel">100%</span>
        </div>
        <div class="toolbar-group" aria-label="Context actions">
          <button class="labeled-btn" data-action="center-me"><span>ğŸ“</span> My Location</button>
          <a class="labeled-btn" id="downloadPlan" href="#" target="_blank" rel="noopener"><span>â¬‡</span> Download PDF</a>
        </div>
        <button class="close-btn" data-action="close-modal" aria-label="Close">Ã—</button>
      </div>
      <div class="deck-modal__body">
        <h3 id="modalTitle" class="deck-modal__title"></h3>
        <p id="modalDesc" class="deck-modal__subtitle"></p>
        <div class="deck-modal__frame" id="modalFrame" role="document"></div>
      </div>
    </div>
  </div>

  <div id="sharedFooter"></div>
  <div id="sharedBottomNav" data-page="decks"></div>

  <script>
    const deckData = [
      {
        number: 5,
        name: 'Deck 5',
        subtitle: 'Promenade Level',
        highlights: ['Entertainment', 'Dining', 'Retail'],
        description: 'Entertainment, dining, and retail hub.',
        category: 'entertainment',
        image: 'https://images.unsplash.com/photo-1519677100203-6f5d4c7a08c9?auto=format&fit=crop&w=1200&q=80',
        svg: 'decks/deck-05.svg',
        pdf: 'decks/deck-05.pdf'
      },
      {
        number: 14,
        name: 'Deck 14',
        subtitle: 'Sky Deck',
        highlights: ['Panoramic views', 'Lounges', 'Sun decks'],
        description: 'Panoramic observation and lounges.',
        category: 'entertainment',
        image: 'https://images.unsplash.com/photo-1521292270410-a8c2e4c1c3c5?auto=format&fit=crop&w=1200&q=80',
        svg: 'decks/deck-14.svg',
        pdf: 'decks/deck-14.pdf'
      },
      {
        number: 11,
        name: 'Deck 11',
        subtitle: 'Fitness & Spa',
        highlights: ['Spa', 'Fitness', 'Wellness'],
        description: 'Spa, fitness center, and relaxation zones.',
        category: 'wellness',
        image: 'https://images.unsplash.com/photo-1540497077202-7c8a3999166f?auto=format&fit=crop&w=1200&q=80',
        svg: 'decks/deck-11.svg',
        pdf: 'decks/deck-11.pdf'
      },
      {
        number: 12,
        name: 'Deck 12',
        subtitle: 'Pool Deck',
        highlights: ['Main pool', 'Solarium', 'Grill'],
        description: 'Pools, solarium, and casual dining.',
        category: 'wellness',
        image: 'https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=1200&q=80',
        svg: 'decks/deck-12.svg',
        pdf: 'decks/deck-12.pdf'
      },
      {
        number: 3,
        name: 'Deck 3',
        subtitle: 'Lobby & Guest Services',
        highlights: ['Guest services', 'Dining', 'Retail'],
        description: 'Main lobby, dining, and guest support.',
        category: 'essential',
        image: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=1200&q=80',
        svg: 'decks/deck-03.svg',
        pdf: 'decks/deck-03.pdf'
      },
      {
        number: 2,
        name: 'Deck 2',
        subtitle: 'Medical & Crew Support',
        highlights: ['Medical', 'Crew services', 'Logistics'],
        description: 'Medical center and crew-only services.',
        category: 'essential',
        image: 'https://images.unsplash.com/photo-1582750433449-648ed127bb54?auto=format&fit=crop&w=1200&q=80',
        svg: 'decks/deck-02.svg',
        pdf: 'decks/deck-02.pdf'
      }
    ];

    const state = {
      filter: 'all',
      search: '',
      observer: null,
      trapFocus: null
    };

    const els = {
      search: document.getElementById('deckSearch'),
      cards: document.getElementById('deckCards'),
      empty: document.getElementById('emptyState'),
      countVisible: document.getElementById('countVisible'),
      countTotal: document.getElementById('countTotal'),
      clearFilters: document.getElementById('clearFilters'),
      showAll: document.getElementById('showAll'),
      modal: document.getElementById('deckModal'),
      modalFrame: document.getElementById('modalFrame'),
      modalTitle: document.getElementById('modalTitle'),
      modalDesc: document.getElementById('modalDesc'),
      zoomLevel: document.getElementById('zoomLevel'),
      download: document.getElementById('downloadPlan')
    };

    const debounce = (fn, delay = 200) => {
      let t;
      return (...args) => {
        clearTimeout(t);
        t = setTimeout(() => fn(...args), delay);
      };
    };

    function applyFilter(filter) {
      state.filter = filter;
      document.querySelectorAll('.pill-btn').forEach(btn => {
        btn.classList.toggle('is-active', btn.dataset.filter === filter);
      });
      renderCards();
    }

    function filterDecks() {
      const query = state.search.toLowerCase().trim();
      return deckData.filter(deck => {
        const matchesFilter = state.filter === 'all' || deck.category === state.filter;
        const searchable = `${deck.name} ${deck.subtitle} ${deck.highlights.join(' ')}`.toLowerCase();
        const matchesQuery = !query || searchable.includes(query);
        return matchesFilter && matchesQuery;
      });
    }

    function renderPills() {
      const buckets = { entertainment: [], wellness: [], essential: [] };
      deckData.forEach(deck => {
        if (buckets[deck.category]) buckets[deck.category].push(deck);
      });
      Object.entries(buckets).forEach(([key, decks]) => {
        const host = document.getElementById(`pill-${key}`);
        if (!host) return;
        host.innerHTML = decks.map(deck => `
          <button class="deck-pill" data-deck="${deck.number}" aria-label="Go to Deck ${deck.number} ${deck.subtitle}">
            <span class="deck-pill__number">${deck.number}</span>
            <span class="deck-pill__text">${deck.subtitle}</span>
          </button>
        `).join('');
      });
    }

    function lazyLoadImages() {
      if (state.observer) state.observer.disconnect();
      state.observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.src = img.dataset.src;
            state.observer.unobserve(img);
          }
        });
      }, { rootMargin: '120px 0px' });
      document.querySelectorAll('img[data-src]').forEach(img => state.observer.observe(img));
    }

    function renderCards() {
      const decks = filterDecks();
      els.countTotal.textContent = deckData.length;
      els.countVisible.textContent = decks.length;
      els.empty.hidden = decks.length > 0;
      els.cards.innerHTML = decks.map(deck => `
        <article class="deck-card" role="listitem" tabindex="0" data-deck="${deck.number}" aria-label="${deck.name} ${deck.subtitle}">
          <div class="deck-visual">
            <span class="deck-number">${deck.number}</span>
            <img data-src="${deck.image}" alt="${deck.name} preview" />
          </div>
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>${deck.name}</h3>
              <p class="deck-subtitle">${deck.subtitle}</p>
            </div>
            <div class="deck-highlights">
              ${deck.highlights.slice(0,3).map(text => `<span>${text}</span>`).join('')}
            </div>
            <button class="deck-card__cta" data-action="open" aria-label="Open ${deck.name} plan">Explore â†’</button>
          </div>
        </article>
      `).join('');
      lazyLoadImages();
    }

    function openModal(deck) {
      els.modalTitle.textContent = `${deck.name}`;
      els.modalDesc.textContent = deck.description;
      els.download.href = deck.pdf;
      els.modalFrame.innerHTML = `<div class="deck-modal__placeholder">Loading ${deck.name} planâ€¦</div>`;
      els.modal.setAttribute('aria-hidden', 'false');
      els.modal.classList.add('is-open');
      const focusable = els.modal.querySelectorAll('button, a');
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      state.trapFocus = (e) => {
        if (e.key !== 'Tab') return;
        if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
        if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
      };
      document.addEventListener('keydown', state.trapFocus);
      first.focus({ preventScroll: true });
    }

    function closeModal() {
      els.modal.classList.remove('is-open');
      els.modal.setAttribute('aria-hidden', 'true');
      document.removeEventListener('keydown', state.trapFocus);
      state.trapFocus = null;
    }

    function setZoom(value) {
      const clamped = Math.min(300, Math.max(50, value));
      els.zoomLevel.textContent = `${clamped}%`;
    }

    function adjustZoom(delta) {
      const current = parseInt(els.zoomLevel.textContent.replace('%', ''), 10) || 100;
      setZoom(current + delta);
    }

    function handleCardClick(e) {
      const card = e.target.closest('.deck-card');
      if (!card) return;
      const deckNum = Number(card.dataset.deck);
      const deck = deckData.find(d => d.number === deckNum);
      if (deck) openModal(deck);
    }

    function bindEvents() {
      document.querySelectorAll('.pill-btn').forEach(btn => {
        btn.addEventListener('click', () => applyFilter(btn.dataset.filter));
      });

      els.search.addEventListener('input', debounce((e) => {
        state.search = e.target.value;
        renderCards();
      }, 180));

      document.addEventListener('keydown', (e) => {
        if (e.key === '/' && document.activeElement !== els.search) {
          e.preventDefault();
          els.search.focus();
        }
        if (e.key === 'Escape') closeModal();
        if (e.key === 'Enter' && document.activeElement?.classList.contains('deck-card__cta')) {
          document.activeElement.click();
        }
      });

      document.getElementById('deckCards').addEventListener('click', (e) => {
        if (e.target.matches('[data-action="open"]') || e.target.closest('.deck-card')) {
          handleCardClick(e);
        }
      });

      document.getElementById('deckCards').addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          handleCardClick(e);
        }
      });

      document.querySelectorAll('[data-action="close-modal"]').forEach(el => {
        el.addEventListener('click', closeModal);
      });

      els.modal.addEventListener('click', (e) => {
        const action = e.target.dataset.action;
        if (action === 'zoom-in') adjustZoom(25);
        if (action === 'zoom-out') adjustZoom(-25);
        if (action === 'zoom-reset') setZoom(100);
        if (action === 'center-me') {
          els.modalDesc.textContent = 'Centered on your location marker.';
        }
      });

      document.querySelectorAll('.deck-pill').forEach(btn => {
        btn.addEventListener('click', () => {
          const deck = deckData.find(d => d.number === Number(btn.dataset.deck));
          if (deck) openModal(deck);
        });
      });

      els.clearFilters.addEventListener('click', () => {
        state.search = '';
        els.search.value = '';
        applyFilter('all');
      });
      els.showAll.addEventListener('click', () => {
        state.search = '';
        els.search.value = '';
        applyFilter('all');
      });

      document.querySelectorAll('.link-button').forEach(btn => {
        btn.addEventListener('click', () => {
          els.search.value = btn.dataset.suggest || '';
          state.search = els.search.value;
          renderCards();
        });
      });
    }

    function init() {
      renderPills();
      renderCards();
      bindEvents();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>
</body>
</html>
