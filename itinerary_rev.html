<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0066b2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="RCCL Rooms">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.svg">
    <title>Staterooms | Adventure of the Seas | Royal Caribbean</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #0066b2;
            --primary-dark: #004d87;
            --primary-gradient: linear-gradient(135deg, #0066b2 0%, #004d87 100%);
            --secondary-gradient: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            --accent-color: #ff6b35;
            --accent-hover: #e55a2b;
            --success-color: #28a745;
            --success-gradient: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            --info-color: #17a2b8;
            --info-gradient: linear-gradient(135deg, #17a2b8 0%, #117a8b 100%);
            --warning-color: #ffc107;
            --warning-gradient: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
            --danger-color: #dc3545;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.15);
            --shadow-xl: 0 12px 48px rgba(0, 0, 0, 0.2);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --radius-xl: 30px;
            --radius-2xl: 40px;
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
            --font-heading: 'Montserrat', sans-serif;
            --font-body: 'Inter', sans-serif;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Enhanced Hero Section */
        .app-hero {
            background: var(--primary-gradient);
            color: white;
            padding: 3rem 0 0;
            position: relative;
            overflow: hidden;
        }

        .app-hero::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(transparent, rgba(0,0,0,0.1));
        }

        .app-hero__inner {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 2rem 0;
            position: relative;
            z-index: 2;
        }

        .app-hero__context {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1.5rem;
            border-radius: var(--radius-xl);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .app-hero__title {
            font-family: var(--font-heading);
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            line-height: 1.2;
        }

        .app-hero__meta {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 2rem;
            line-height: 1.6;
        }

        /* Cruise Environment Bar */
        .cruise-environment-bar {
            background: linear-gradient(135deg, #003d65 0%, #005a9c 100%);
            color: white;
            padding: 1rem 0;
            position: relative;
            z-index: 1;
        }

        .environment-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .env-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            min-width: 180px;
        }

        .env-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .env-item i {
            font-size: 1.25rem;
            opacity: 0.9;
        }

        .env-details {
            display: flex;
            flex-direction: column;
        }

        .env-label {
            font-size: 0.75rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .env-value {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .card--compact {
            background: var(--secondary-gradient);
            border: none;
            border-radius: var(--radius-lg);
            padding: 2rem 1rem;
            text-align: center;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .card--compact::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .card--compact:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 900;
            color: var(--primary-blue);
            line-height: 1;
            margin-bottom: 0.5rem;
            font-family: var(--font-heading);
        }

        .stat-label {
            font-size: 0.95rem;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Guest Connections */
        .guest-connections {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e9ecef;
        }

        .section-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .section-header h2 {
            font-family: var(--font-heading);
            font-size: 2rem;
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .section-subtitle {
            color: #666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .connection-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.75rem;
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            border: 2px solid #f0f0f0;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .connection-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-blue);
        }

        .connection-icon {
            width: 70px;
            height: 70px;
            background: var(--primary-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: white;
            font-size: 1.75rem;
            box-shadow: var(--shadow-md);
        }

        .connection-card h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .connection-card p {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            flex-grow: 1;
        }

        .connection-status {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            margin: 1.5rem 0;
        }

        .status-badge {
            background: #e9ecef;
            padding: 0.4rem 1rem;
            border-radius: var(--radius-xl);
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-badge.online {
            background: var(--success-gradient);
            color: white;
        }

        .connection-features {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .feature-tag {
            background: #e9ecef;
            padding: 0.35rem 0.85rem;
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.35rem;
            color: #495057;
        }

        .photo-preview {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1.5rem 0;
            position: relative;
        }

        .photo-thumb {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
            border-radius: var(--radius-sm);
            opacity: 0.8;
        }

        .photo-count {
            position: absolute;
            right: -15px;
            top: -10px;
            background: var(--accent-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            box-shadow: var(--shadow-sm);
        }

        /* Deck Preview */
        .deck-preview {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            margin: 2.5rem 0;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e9ecef;
        }

        .deck-visualization {
            display: flex;
            gap: 3rem;
            margin: 2rem 0;
            align-items: flex-start;
        }

        .deck-levels {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }

        .deck-level {
            background: #f8f9fa;
            border-radius: var(--radius-md);
            padding: 1.75rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: all var(--transition-normal);
            cursor: pointer;
            border-left: 5px solid transparent;
        }

        .deck-level:hover {
            background: #e9ecef;
            transform: translateX(8px);
        }

        .deck-level.active {
            border-left-color: var(--primary-blue);
            background: #f0f7ff;
        }

        .deck-label {
            background: var(--primary-blue);
            color: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            font-weight: 900;
            font-family: var(--font-heading);
            flex-shrink: 0;
            box-shadow: var(--shadow-md);
        }

        .deck-info h4 {
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .deck-info p {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 1rem;
        }

        .deck-rooms {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .room-marker {
            background: white;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
            padding: 0.35rem 1rem;
            border-radius: var(--radius-sm);
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .room-marker:hover {
            background: var(--primary-blue);
            color: white;
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        .deck-legend {
            flex-shrink: 0;
            background: #f8f9fa;
            padding: 1.75rem;
            border-radius: var(--radius-md);
            min-width: 220px;
            box-shadow: var(--shadow-sm);
        }

        .deck-legend h4 {
            color: var(--primary-blue);
            margin-bottom: 1.25rem;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.85rem;
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
            background: white;
        }

        .legend-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .legend-dot {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .legend-dot.premium {
            background: var(--accent-color);
            border: 3px solid #e55a2b;
        }

        .legend-dot.balcony {
            background: var(--primary-blue);
        }

        .legend-dot.ocean-view {
            background: var(--info-color);
        }

        .legend-dot.interior {
            background: var(--warning-color);
        }

        .deck-tips {
            background: #fff9db;
            border-radius: var(--radius-md);
            padding: 1.75rem;
            margin-top: 2.5rem;
            border-left: 5px solid #ffd43b;
        }

        .deck-tips h4 {
            color: #e67700;
            display: flex;
            align-items: center;
            gap: 0.85rem;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.25rem;
        }

        .tip {
            display: flex;
            align-items: center;
            gap: 0.85rem;
            padding: 1rem;
            background: white;
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-fast);
        }

        .tip:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .tip i {
            color: var(--primary-blue);
            font-size: 1.2rem;
        }

        /* Room Cards */
        .room-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            border: 1px solid #e9ecef;
            position: relative;
            animation: fadeInUp 0.6s ease forwards;
            animation-delay: calc(var(--index, 0) * 0.1s);
        }

        .room-card.featured {
            border: 3px solid var(--accent-color);
            box-shadow: var(--shadow-xl);
            transform: scale(1.02);
            z-index: 5;
        }

        .room-card.featured::before {
            content: 'â˜… FEATURED';
            position: absolute;
            top: 20px;
            right: -35px;
            background: var(--accent-color);
            color: white;
            padding: 0.5rem 2.5rem;
            font-size: 0.85rem;
            font-weight: 800;
            transform: rotate(45deg);
            z-index: 1;
            letter-spacing: 1px;
        }

        .room-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
        }

        .room-header {
            background: var(--primary-gradient);
            color: white;
            padding: 2rem;
            position: relative;
        }

        .room-number {
            display: flex;
            align-items: center;
            gap: 1.25rem;
            margin-bottom: 1.25rem;
        }

        .room-number span {
            font-size: 3rem;
            font-weight: 900;
            font-family: var(--font-heading);
            letter-spacing: 1.5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .copy-quick {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 42px;
            height: 42px;
            border-radius: 50%;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .copy-quick:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.15);
        }

        .room-location {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 1.25rem;
            position: relative;
        }

        .location-tooltip {
            display: none;
            position: absolute;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 1rem 1.25rem;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            width: 240px;
            top: 100%;
            left: 0;
            z-index: 10;
            box-shadow: var(--shadow-lg);
            line-height: 1.5;
        }

        .room-location:hover .location-tooltip {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .room-tag {
            display: inline-block;
            padding: 0.5rem 1.25rem;
            border-radius: var(--radius-2xl);
            font-size: 0.85rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.75px;
            margin-right: 0.75rem;
            box-shadow: var(--shadow-sm);
        }

        .tag--info { background: var(--info-gradient); color: white; }
        .tag--success { background: var(--success-gradient); color: white; }
        .tag--warning { background: var(--warning-gradient); color: #212529; }

        .room-badge {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: var(--accent-color);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.75px;
            box-shadow: var(--shadow-md);
        }

        .room-content {
            padding: 2.5rem;
        }

        .room-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--primary-blue);
            font-weight: 700;
            margin: 1.75rem 0 1rem;
            font-size: 1.1rem;
        }

        .guest-list {
            list-style: none;
            padding: 0;
            margin: 0 0 1.5rem 0;
            display: flex;
            flex-wrap: wrap;
            gap: 0.85rem;
        }

        .guest-list li {
            background: #f8f9fa;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-md);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .guest-list li:hover {
            background: #e9ecef;
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .guest-list li.adult::before {
            content: 'ðŸ‘¤';
            font-size: 1rem;
        }

        .guest-list li.child::before {
            content: 'ðŸ‘¶';
            font-size: 1rem;
        }

        /* Room Proximity */
        .room-proximity {
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--primary-blue);
        }

        .proximity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1.25rem;
            margin-top: 1rem;
        }

        .proximity-item {
            display: flex;
            align-items: center;
            gap: 0.85rem;
            padding: 1rem;
            background: white;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-fast);
        }

        .proximity-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .proximity-item i {
            color: var(--primary-blue);
            font-size: 1.2rem;
        }

        .proximity-item span {
            font-size: 0.95rem;
        }

        .proximity-item strong {
            color: var(--primary-blue);
        }

        .features-list {
            list-style: none;
            padding: 0;
            margin: 0 0 1.5rem 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .features-list li {
            padding: 1rem;
            background: #f8f9fa;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .features-list li:hover {
            background: #e9ecef;
            transform: translateX(8px);
            box-shadow: var(--shadow-md);
        }

        .features-list li i {
            color: var(--success-color);
            font-size: 1.1rem;
        }

        .room-cta {
            display: flex;
            gap: 1.25rem;
            margin-top: 2.5rem;
            padding-top: 2.5rem;
            border-top: 2px solid #e9ecef;
        }

        .room-link-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.85rem;
            padding: 1rem 1.5rem;
            font-weight: 700;
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
            text-decoration: none;
            text-align: center;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
        }

        /* Filter Tools */
        .room-tools {
            background: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            margin: 3rem 0;
            overflow: hidden;
            border: 1px solid #e9ecef;
        }

        .room-tools details[open] {
            background: var(--secondary-gradient);
        }

        .room-tools summary {
            background: var(--primary-gradient);
            color: white;
            padding: 1.75rem 2.5rem;
            font-size: 1.3rem;
            font-weight: 800;
            cursor: pointer;
            list-style: none;
            display: flex;
            align-items: center;
            gap: 1.25rem;
            transition: all var(--transition-normal);
            position: relative;
        }

        .room-tools summary:hover {
            background: linear-gradient(135deg, #005a9c 0%, #003d65 100%);
        }

        .room-tools summary::after {
            content: 'â–¼';
            margin-left: auto;
            transition: transform var(--transition-normal);
            font-size: 1.2rem;
        }

        .room-tools details[open] summary::after {
            transform: rotate(180deg);
        }

        .tool-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 500;
            margin-left: 0.5rem;
        }

        .room-tools-grid {
            padding: 2.5rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
        }

        .field-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .search-wrapper {
            position: relative;
        }

        .field-control {
            width: 100%;
            padding: 1.25rem 1.25rem 1.25rem 3.5rem;
            border: 2px solid #dee2e6;
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: all var(--transition-fast);
            background: white;
            font-family: var(--font-body);
        }

        .field-control:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 4px rgba(0, 102, 178, 0.15);
        }

        .search-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
            font-size: 1.1rem;
        }

        .field-help {
            display: block;
            margin-top: 0.75rem;
            color: #6c757d;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .filter-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.75rem 2.5rem;
            background: #f8f9fa;
            border-top: 2px solid #dee2e6;
        }

        .filter-count {
            font-weight: 700;
            color: var(--primary-blue);
            padding: 0.75rem 1.5rem;
            background: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            font-size: 1rem;
        }

        .filter-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1.5rem 2.5rem;
            background: #f8f9fa;
            border-top: 2px solid #dee2e6;
            min-height: 70px;
        }

        .filter-chip {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: white;
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius-2xl);
            font-size: 0.95rem;
            font-weight: 600;
            box-shadow: var(--shadow-sm);
            border: 2px solid #dee2e6;
            transition: all var(--transition-fast);
        }

        .filter-chip:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .filter-chip button {
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all var(--transition-fast);
            font-size: 0.9rem;
        }

        .filter-chip button:hover {
            background: #dee2e6;
            color: var(--danger-color);
        }

        .results-row {
            padding: 1.5rem 2.5rem;
            background: white;
            border-top: 2px solid #dee2e6;
        }

        .results-text {
            margin: 0;
            font-weight: 700;
            color: #495057;
            font-size: 1.1rem;
            line-height: 1.5;
        }

        .results-text strong {
            color: var(--primary-blue);
        }

        /* Room Grid */
        .room-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 2.5rem;
            margin: 2.5rem 0;
        }

        /* Empty State */
        .empty-state {
            background: white;
            border-radius: var(--radius-lg);
            padding: 4rem 3rem;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border: 3px dashed #dee2e6;
            margin: 3rem 0;
        }

        .empty-state.is-hidden {
            display: none;
        }

        .empty-state-content i {
            color: #dee2e6;
            font-size: 4rem;
            margin-bottom: 2rem;
        }

        .empty-state-content h3 {
            color: #495057;
            margin-bottom: 1.25rem;
            font-size: 1.75rem;
            font-weight: 700;
        }

        .empty-state-content p {
            color: #6c757d;
            max-width: 450px;
            margin: 0 auto 2.5rem;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* Action Buttons */
        .action-buttons {
            margin: 4rem 0;
        }

        .action-primary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .action-secondary {
            display: flex;
            gap: 1.25rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 1.25rem 2rem;
            border-radius: var(--radius-md);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.75px;
            transition: all var(--transition-normal);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.95rem;
            border: none;
            font-family: var(--font-heading);
        }

        .btn-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1.5rem;
            text-align: center;
            height: 100%;
        }

        .btn-icon i {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .btn-icon span {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .btn-icon small {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 500;
            font-family: var(--font-body);
            text-transform: none;
            letter-spacing: normal;
            line-height: 1.4;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: 0 6px 20px rgba(0, 102, 178, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #005a9c 0%, #003d65 100%);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 102, 178, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-blue);
            border: 2px solid var(--primary-blue);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary:hover {
            background: var(--primary-blue);
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 102, 178, 0.3);
        }

        /* Important Notes */
        .important-notes {
            background: linear-gradient(135deg, #fff9db 0%, #fff3bf 100%);
            border-radius: var(--radius-lg);
            padding: 3rem;
            margin: 4rem 0;
            box-shadow: var(--shadow-lg);
            border-left: 8px solid #ffd43b;
        }

        .important-notes h3 {
            color: #e67700;
            display: flex;
            align-items: center;
            gap: 1.25rem;
            margin-bottom: 2rem;
            font-size: 1.5rem;
            font-weight: 800;
        }

        .important-notes ul {
            list-style: none;
            padding: 0;
            margin: 0 0 3rem 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.25rem;
        }

        .important-notes li {
            padding: 1.25rem;
            background: white;
            border-radius: var(--radius-md);
            display: flex;
            gap: 1rem;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-fast);
        }

        .important-notes li:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .important-notes li strong {
            color: var(--primary-blue);
            min-width: 140px;
            font-weight: 700;
        }

        .nautical-legend {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-top: 2.5rem;
            box-shadow: var(--shadow-sm);
        }

        .nautical-legend h4 {
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.75rem;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .legend-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.25rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 1.25rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .legend-item:hover {
            background: #e9ecef;
            transform: translateX(8px);
        }

        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .dot-starboard { background: var(--primary-blue); }
        .dot-port { background: var(--info-color); }
        .dot-aft { background: var(--success-color); }
        .dot-forward { background: var(--warning-color); }
        .dot-midship { background: #6f42c1; }

        .pro-tips {
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 2px dashed #dee2e6;
        }

        .pro-tips h4 {
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 0.75rem 0;
            box-shadow: 0 -2px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            border-top: 1px solid #e9ecef;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #6c757d;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
        }

        .mobile-nav-item.active {
            color: var(--primary-blue);
            background: rgba(0, 102, 178, 0.1);
        }

        .mobile-nav-icon {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }

        .mobile-nav-text {
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 102, 178, 0.6); }
            50% { box-shadow: 0 0 25px rgba(0, 102, 178, 0.9); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .featured .room-header {
            animation: pulse-glow 2s infinite;
        }

        /* Copy Success State */
        .copy-success {
            background: var(--success-gradient) !important;
            color: white !important;
            transform: scale(1.1) !important;
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.5) !important;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .room-grid {
                grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            }
            
            .deck-visualization {
                flex-direction: column;
                gap: 2.5rem;
            }
            
            .deck-legend {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 1.5rem;
            }
            
            .app-hero__title {
                font-size: 2.5rem;
            }
            
            .environment-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .env-item {
                width: 100%;
                justify-content: center;
            }
            
            .room-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .room-card.featured::before {
                right: -25px;
                padding: 0.4rem 1.5rem;
                font-size: 0.75rem;
            }
            
            .features-list {
                grid-template-columns: 1fr;
            }
            
            .room-tools-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .legend-items {
                grid-template-columns: 1fr;
            }
            
            .action-primary {
                grid-template-columns: 1fr;
            }
            
            .action-secondary {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .connections-grid {
                grid-template-columns: 1fr;
            }
            
            .tips-grid {
                grid-template-columns: 1fr;
            }
            
            .room-cta {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .app-hero__title {
                font-size: 2rem;
            }
            
            .stat-number {
                font-size: 2.5rem;
            }
            
            .room-number span {
                font-size: 2.5rem;
            }
            
            .important-notes ul {
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility */
        .skip-to-content {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-blue);
            color: white;
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            z-index: 9999;
        }

        .skip-to-content:focus {
            top: 0;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Print Styles */
        @media print {
            .room-tools,
            .action-buttons,
            .mobile-nav,
            .guest-connections,
            .deck-preview,
            .room-proximity {
                display: none !important;
            }
            
            .room-card {
                break-inside: avoid;
                box-shadow: none !important;
                border: 2px solid #dee2e6 !important;
                margin-bottom: 2rem !important;
            }
            
            .room-header {
                background: #0066b2 !important;
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
            
            .btn {
                display: none !important;
            }
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* High Contrast */
        @media (prefers-contrast: high) {
            .room-card {
                border: 3px solid #000;
            }
            
            .room-header {
                border-bottom: 3px solid #000;
            }
            
            .btn {
                border: 2px solid #000;
            }
        }
    </style>
</head>
<body class="hero-visible">
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Header (Would be loaded from shared-layout.js) -->
    <div id="sharedHeader"></div>

    <!-- Hero Section -->
    <section class="app-hero">
        <div class="app-hero__inner">
            <span class="app-hero__context">Staterooms & Suites</span>
            <h1 class="app-hero__title">Your Home at Sea</h1>
            <p class="app-hero__meta">
                Discover your perfect retreat. Find room assignments, deck locations, and cabin amenities for all guests in your party.
            </p>
        </div>
    </section>

    <!-- Cruise Environment Bar -->
    <div class="cruise-environment-bar">
        <div class="environment-container">
            <div class="env-item env-sailing">
                <i class="fas fa-calendar-alt"></i>
                <div class="env-details">
                    <span class="env-label">Sailing</span>
                    <span class="env-value">Feb 15-22, 2026 â€¢ 7 Nights</span>
                </div>
            </div>
            <div class="env-item env-ship">
                <i class="fas fa-ship"></i>
                <div class="env-details">
                    <span class="env-label">Ship</span>
                    <span class="env-value">Adventure of the Seas</span>
                </div>
            </div>
            <div class="env-item env-status">
                <i class="fas fa-map-marker-alt"></i>
                <div class="env-details">
                    <span class="env-label">Status</span>
                    <span class="env-value">Currently at Sea â€¢ Day 3</span>
                </div>
            </div>
            <div class="env-item env-weather">
                <i class="fas fa-sun"></i>
                <div class="env-details">
                    <span class="env-label">Weather</span>
                    <span class="env-value">82Â°F â€¢ Clear Skies</span>
                </div>
            </div>
            <div class="env-item env-wifi">
                <i class="fas fa-wifi"></i>
                <div class="env-details">
                    <span class="env-label">Wi-Fi</span>
                    <span class="env-value">Royal-WiFi â€¢ Connected</span>
                </div>
            </div>
        </div>
    </div>

    <main id="main-content" class="container">
        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="card card--compact">
                <div class="stat-number">5</div>
                <div class="stat-label">Total Staterooms</div>
            </div>
            <div class="card card--compact">
                <div class="stat-number">12</div>
                <div class="stat-label">Total Guests</div>
            </div>
            <div class="card card--compact">
                <div class="stat-number">3</div>
                <div class="stat-label">Deck Levels</div>
            </div>
            <div class="card card--compact">
                <div class="stat-number">4</div>
                <div class="stat-label">Room Categories</div>
            </div>
        </div>

        <!-- Guest Connections -->
        <section class="guest-connections" aria-label="Connect with your party">
            <div class="section-header">
                <h2><i class="fas fa-user-friends"></i> Guest Connections</h2>
                <p class="section-subtitle">Connect with others in your party across staterooms</p>
            </div>
            
            <div class="connections-grid">
                <div class="connection-card">
                    <div class="connection-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>Chat with Guests</h3>
                    <p>Message other guests in your party using the Royal Caribbean app</p>
                    <div class="connection-status">
                        <span class="status-badge online">12 Online</span>
                        <span class="status-badge">5 Rooms</span>
                    </div>
                    <button class="btn btn-secondary connection-btn">
                        <i class="fas fa-comment-dots"></i> Open Chat
                    </button>
                </div>
                
                <div class="connection-card">
                    <div class="connection-icon">
                        <i class="fas fa-calendar-plus"></i>
                    </div>
                    <h3>Share Plans</h3>
                    <p>Coordinate dinner reservations, shows, and excursions</p>
                    <div class="connection-features">
                        <span class="feature-tag"><i class="fas fa-utensils"></i> Dining</span>
                        <span class="feature-tag"><i class="fas fa-theater-masks"></i> Shows</span>
                        <span class="feature-tag"><i class="fas fa-umbrella-beach"></i> Excursions</span>
                    </div>
                    <button class="btn btn-secondary connection-btn">
                        <i class="fas fa-share-alt"></i> Share Activities
                    </button>
                </div>
                
                <div class="connection-card">
                    <div class="connection-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <h3>Shared Photos</h3>
                    <p>View and share cruise photos with your party</p>
                    <div class="photo-preview">
                        <div class="photo-thumb"></div>
                        <div class="photo-thumb"></div>
                        <div class="photo-thumb"></div>
                        <div class="photo-count">+24</div>
                    </div>
                    <button class="btn btn-secondary connection-btn">
                        <i class="fas fa-images"></i> View Photos
                    </button>
                </div>
            </div>
        </section>

        <!-- Deck Preview -->
        <section class="deck-preview" aria-label="Deck location preview">
            <div class="section-header">
                <h2><i class="fas fa-map-marked-alt"></i> Deck Location Overview</h2>
                <p class="section-subtitle">See where your staterooms are located on the ship</p>
            </div>
            
            <div class="deck-visualization">
                <div class="deck-levels">
                    <div class="deck-level active" data-deck="8">
                        <span class="deck-label">Deck 8</span>
                        <div class="deck-info">
                            <h4>Upper Deck (Aft/Midship)</h4>
                            <p>Premium location â€¢ Near pools & dining</p>
                            <div class="deck-rooms">
                                <span class="room-marker" data-room="8528">8528</span>
                                <span class="room-marker" data-room="8612">8612</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="deck-level active" data-deck="6">
                        <span class="deck-label">Deck 6</span>
                        <div class="deck-info">
                            <h4>Main Deck (Midship)</h4>
                            <p>Best location â€¢ Central elevators â€¢ Shopping</p>
                            <div class="deck-rooms">
                                <span class="room-marker" data-room="6650">6650</span>
                                <span class="room-marker" data-room="6652">6652</span>
                                <span class="room-marker" data-room="6443">6443</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="deck-level active" data-deck="3">
                        <span class="deck-label">Deck 3</span>
                        <div class="deck-info">
                            <h4>Lower Deck (Forward)</h4>
                            <p>Budget-friendly â€¢ Close to theaters</p>
                            <div class="deck-rooms">
                                <span class="room-marker" data-room="3622">3622</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="deck-legend">
                    <h4><i class="fas fa-compass"></i> Ship Legend</h4>
                    <div class="legend-item">
                        <span class="legend-dot premium"></span>
                        <span>Your Suite (6650)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot balcony"></span>
                        <span>Balcony Rooms</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot ocean-view"></span>
                        <span>Ocean View</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot interior"></span>
                        <span>Interior Rooms</span>
                    </div>
                </div>
            </div>
            
            <div class="deck-tips">
                <h4><i class="fas fa-lightbulb"></i> Location Tips</h4>
                <div class="tips-grid">
                    <div class="tip">
                        <i class="fas fa-elevator"></i>
                        <div><strong>Central Elevators:</strong> Deck 6 has fastest access</div>
                    </div>
                    <div class="tip">
                        <i class="fas fa-swimming-pool"></i>
                        <div><strong>Pool Deck:</strong> Deck 8 rooms are just 1 flight up</div>
                    </div>
                    <div class="tip">
                        <i class="fas fa-utensils"></i>
                        <div><strong>Dining:</strong> Main dining room on Deck 4</div>
                    </div>
                    <div class="tip">
                        <i class="fas fa-running"></i>
                        <div><strong>Fitness Center:</strong> Deck 12 forward</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Your Featured Stateroom -->
        <section class="your-stateroom-section" aria-label="Your assigned stateroom">
            <div class="section-header">
                <h2><i class="fas fa-star"></i> Your Stateroom</h2>
                <p class="section-subtitle">Your home away from home for the cruise</p>
            </div>
            
            <div class="room-card featured" data-room="6650" data-deck="6" data-type="balcony" data-guests="bill melissa owen declan" style="--index: 0; order: -1;">
                <div class="room-header">
                    <div class="room-number">
                        <span>6650</span>
                        <button class="copy-quick" data-copy-room="6650" aria-label="Copy room number 6650">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 6 â€¢ Starboard â€¢ Connecting to 6652
                        <span class="location-tooltip">Starboard is the right side of the ship when facing forward. Offers beautiful sunset views.</span>
                    </div>
                    <span class="room-tag tag--info">Balcony Suite</span>
                    <span class="room-badge">Your Family Suite</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Family Occupancy (4):</p>
                    <ul class="guest-list">
                        <li class="adult">Bill (Adult â€¢ Primary Guest)</li>
                        <li class="adult">Melissa (Adult)</li>
                        <li class="child">Owen (Child â€¢ Age 8)</li>
                        <li class="child">Declan (Child â€¢ Age 5)</li>
                    </ul>
                    
                    <!-- Proximity Information -->
                    <div class="room-proximity">
                        <p class="room-label"><i class="fas fa-walking"></i> Nearby Amenities (Walking Time):</p>
                        <div class="proximity-grid">
                            <div class="proximity-item">
                                <i class="fas fa-utensils"></i>
                                <span>Main Dining: <strong>2 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-swimming-pool"></i>
                                <span>Main Pool: <strong>3 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-elevator"></i>
                                <span>Elevators: <strong>1 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-spa"></i>
                                <span>Spa: <strong>5 min</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Premium Amenities:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> 198 sq ft cabin + 46 sq ft private balcony</li>
                            <li><i class="fas fa-check"></i> Connecting door to adjacent room 6652</li>
                            <li><i class="fas fa-check"></i> Two twin beds convertible to king</li>
                            <li><i class="fas fa-check"></i> Interactive TV with movies & cruise info</li>
                            <li><i class="fas fa-check"></i> Private bathroom with shower & amenities</li>
                            <li><i class="fas fa-check"></i> Mini-safe, mini-fridge, hairdryer</li>
                            <li><i class="fas fa-check"></i> Complimentary room service (6am-11pm)</li>
                        </ul>
                    </div>
                    <div class="room-tips">
                        <p class="room-label"><i class="fas fa-lightbulb"></i> Pro Tips:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-ship"></i> Starboard side offers sunset views</li>
                            <li><i class="fas fa-walking"></i> Close to main elevators & Windjammer CafÃ©</li>
                            <li><i class="fas fa-umbrella-beach"></i> Balcony perfect for morning coffee</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-primary room-link-btn" type="button" data-copy-room="6650">
                            <i class="fas fa-copy"></i> Copy Room Number
                        </button>
                        <a href="decks.html?deck=6&room=6650" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map-marked-alt"></i> View Deck Location
                        </a>
                        <button class="btn btn-secondary room-link-btn" onclick="generateQRCode('6650')">
                            <i class="fas fa-qrcode"></i> Save to Phone
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter & Search Tools -->
        <section class="room-tools" aria-label="Find and filter rooms">
            <details open>
                <summary>
                    <i class="fas fa-sliders-h"></i> Find & Filter Rooms
                    <span class="tool-subtitle">Search, filter, and explore all staterooms</span>
                </summary>
                <div class="room-tools-grid">
                    <div class="search-container">
                        <label for="searchInput" class="field-label">
                            <i class="fas fa-search"></i> Search Rooms & Guests
                        </label>
                        <div class="search-wrapper">
                            <input id="searchInput" class="field-control" type="search" placeholder="Search by guest name (e.g., 'Bill'), room number, or deck" autocomplete="off" aria-describedby="searchHelp">
                            <span class="search-icon" aria-hidden="true">
                                <i class="fas fa-search"></i>
                            </span>
                        </div>
                        <small id="searchHelp" class="field-help">Type any guest name, room number (6650), or deck level</small>
                    </div>

                    <div class="filter-group">
                        <label for="deckFilter" class="field-label">
                            <i class="fas fa-layer-group"></i> Filter by Deck Level
                        </label>
                        <select id="deckFilter" class="field-control" aria-describedby="deckHelp">
                            <option value="all">All Decks (3, 6, 8)</option>
                            <option value="3">Deck 3 - Lower Deck â€¢ Forward Section</option>
                            <option value="6">Deck 6 - Main Deck â€¢ Midship</option>
                            <option value="8">Deck 8 - Upper Deck â€¢ Aft Section</option>
                        </select>
                        <small id="deckHelp" class="field-help">Deck 3: Most affordable â€¢ Deck 6: Best location â€¢ Deck 8: Premium views</small>
                    </div>

                    <div class="filter-group">
                        <label for="typeFilter" class="field-label">
                            <i class="fas fa-bed"></i> Filter by Room Category
                        </label>
                        <select id="typeFilter" class="field-control" aria-describedby="typeHelp">
                            <option value="all">All Room Types</option>
                            <option value="balcony">Balcony Rooms (Private outdoor space)</option>
                            <option value="ocean">Ocean View (Large scenic window)</option>
                            <option value="interior">Interior Rooms (Most affordable)</option>
                            <option value="suite">Suites (Premium accommodations)</option>
                        </select>
                        <small id="typeHelp" class="field-help">Balcony includes suites, Ocean View has fixed windows</small>
                    </div>
                </div>

                <div class="filter-actions">
                    <button id="clearFilters" class="btn btn-secondary" type="button" aria-label="Reset all filters">
                        <i class="fas fa-filter-circle-xmark"></i> Clear All Filters
                    </button>
                    <span class="filter-count" id="filterCount">No active filters</span>
                </div>
                <div class="filter-chips" id="filterChips"></div>
                <div class="results-row">
                    <p class="results-text" id="resultsText">Showing all 5 staterooms in your party</p>
                    <div class="sr-only" aria-live="polite" id="liveAnnouncement"></div>
                </div>
            </details>
        </section>

        <!-- All Staterooms Grid -->
        <section class="room-grid" id="roomGrid" aria-label="All staterooms in your party">
            <!-- Room 2 -->
            <div class="room-card" data-room="6443" data-deck="6" data-type="interior" data-guests="abel amy" style="--index: 1;">
                <div class="room-header">
                    <div class="room-number">
                        <span>6443</span>
                        <button class="copy-quick" data-copy-room="6443" aria-label="Copy room number 6443">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 6 â€¢ Port Side â€¢ Near Laundry Facilities
                        <span class="location-tooltip">Port is the left side of the ship. Laundry on same deck.</span>
                    </div>
                    <span class="room-tag tag--warning">Interior Stateroom</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Abel (Adult)</li>
                        <li class="adult">Amy (Adult)</li>
                    </ul>
                    
                    <!-- Proximity Information -->
                    <div class="room-proximity">
                        <p class="room-label"><i class="fas fa-walking"></i> Nearby Amenities (Walking Time):</p>
                        <div class="proximity-grid">
                            <div class="proximity-item">
                                <i class="fas fa-tshirt"></i>
                                <span>Laundry: <strong>1 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-shopping-bag"></i>
                                <span>Shopping: <strong>4 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-elevator"></i>
                                <span>Elevators: <strong>2 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-coffee"></i>
                                <span>CafÃ©: <strong>3 min</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> 160 sq ft cozy interior space</li>
                            <li><i class="fas fa-check"></i> Perfect darkness for optimal sleep</li>
                            <li><i class="fas fa-check"></i> Quiet location away from elevators</li>
                            <li><i class="fas fa-check"></i> Two twin beds convertible to king</li>
                            <li><i class="fas fa-check"></i> Convenient laundry room access</li>
                            <li><i class="fas fa-check"></i> Virtual balcony option available</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="6443">
                            <i class="fas fa-copy"></i> Copy #
                        </button>
                        <a href="decks.html?deck=6&room=6443" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Map
                        </a>
                    </div>
                </div>
            </div>

            <!-- Room 3 -->
            <div class="room-card" data-room="8528" data-deck="8" data-type="balcony" data-guests="aimee karin" style="--index: 2;">
                <div class="room-header">
                    <div class="room-number">
                        <span>8528</span>
                        <button class="copy-quick" data-copy-room="8528" aria-label="Copy room number 8528">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 8 â€¢ Midship â€¢ Premium Location
                        <span class="location-tooltip">Midship offers the smoothest ride with minimal motion.</span>
                    </div>
                    <span class="room-tag tag--info">Deluxe Balcony</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Aimee (Adult)</li>
                        <li class="adult">Karin (Adult)</li>
                    </ul>
                    
                    <!-- Proximity Information -->
                    <div class="room-proximity">
                        <p class="room-label"><i class="fas fa-walking"></i> Nearby Amenities (Walking Time):</p>
                        <div class="proximity-grid">
                            <div class="proximity-item">
                                <i class="fas fa-swimming-pool"></i>
                                <span>Main Pool: <strong>2 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-utensils"></i>
                                <span>Specialty Dining: <strong>3 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-elevator"></i>
                                <span>Elevators: <strong>1 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-glass-cheers"></i>
                                <span>Bars: <strong>2 min</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Premium Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> Private balcony with panoramic ocean views</li>
                            <li><i class="fas fa-check"></i> Mid-ship location (minimal ship motion)</li>
                            <li><i class="fas fa-check"></i> 198 sq ft cabin + 42 sq ft balcony</li>
                            <li><i class="fas fa-check"></i> Easy access to central elevators</li>
                            <li><i class="fas fa-check"></i> Close to pool deck & main dining</li>
                            <li><i class="fas fa-check"></i> Enhanced balcony furniture set</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="8528">
                            <i class="fas fa-copy"></i> Copy #
                        </button>
                        <a href="decks.html?deck=8&room=8528" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Map
                        </a>
                    </div>
                </div>
            </div>

            <!-- Room 4 -->
            <div class="room-card" data-room="8612" data-deck="8" data-type="ocean" data-guests="bella tj" style="--index: 3;">
                <div class="room-header">
                    <div class="room-number">
                        <span>8612</span>
                        <button class="copy-quick" data-copy-room="8612" aria-label="Copy room number 8612">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 8 â€¢ Aft â€¢ Quiet Corridor
                        <span class="location-tooltip">Aft offers beautiful wake views and quieter hallways.</span>
                    </div>
                    <span class="room-tag tag--success">Ocean View Stateroom</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Bella (Adult)</li>
                        <li class="adult">TJ (Adult)</li>
                    </ul>
                    
                    <!-- Proximity Information -->
                    <div class="room-proximity">
                        <p class="room-label"><i class="fas fa-walking"></i> Nearby Amenities (Walking Time):</p>
                        <div class="proximity-grid">
                            <div class="proximity-item">
                                <i class="fas fa-utensils"></i>
                                <span>Specialty Dining: <strong>2 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-theater-masks"></i>
                                <span>Theater: <strong>4 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-elevator"></i>
                                <span>Elevators: <strong>3 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-water"></i>
                                <span>Wake Views: <strong>On balcony</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> Large ocean view panoramic window</li>
                            <li><i class="fas fa-check"></i> Quiet aft location with less foot traffic</li>
                            <li><i class="fas fa-check"></i> 179 sq ft with comfortable sitting area</li>
                            <li><i class="fas fa-check"></i> Peaceful evenings with wake views</li>
                            <li><i class="fas fa-check"></i> Close to specialty dining venues</li>
                            <li><i class="fas fa-check"></i> Enhanced natural lighting</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="8612">
                            <i class="fas fa-copy"></i> Copy #
                        </button>
                        <a href="decks.html?deck=8&room=8612" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Map
                        </a>
                    </div>
                </div>
            </div>

            <!-- Room 5 -->
            <div class="room-card" data-room="3622" data-deck="3" data-type="interior" data-guests="phoebe ryan" style="--index: 4;">
                <div class="room-header">
                    <div class="room-number">
                        <span>3622</span>
                        <button class="copy-quick" data-copy-room="3622" aria-label="Copy room number 3622">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 3 â€¢ Forward â€¢ Budget-Friendly
                        <span class="location-tooltip">Forward location offers easy access to theaters and shows.</span>
                    </div>
                    <span class="room-tag tag--warning">Interior Stateroom</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Phoebe (Adult)</li>
                        <li class="adult">Ryan (Adult)</li>
                    </ul>
                    
                    <!-- Proximity Information -->
                    <div class="room-proximity">
                        <p class="room-label"><i class="fas fa-walking"></i> Nearby Amenities (Walking Time):</p>
                        <div class="proximity-grid">
                            <div class="proximity-item">
                                <i class="fas fa-theater-masks"></i>
                                <span>Theater: <strong>2 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-ship"></i>
                                <span>Gangway: <strong>3 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-elevator"></i>
                                <span>Elevators: <strong>1 min</strong></span>
                            </div>
                            <div class="proximity-item">
                                <i class="fas fa-cocktail"></i>
                                <span>Bars: <strong>4 min</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> 160 sq ft efficient interior space</li>
                            <li><i class="fas fa-check"></i> Perfect darkness for deep sleep</li>
                            <li><i class="fas fa-check"></i> Most budget-friendly option</li>
                            <li><i class="fas fa-check"></i> Close to forward elevators & theaters</li>
                            <li><i class="fas fa-check"></i> Virtual balcony available</li>
                            <li><i class="fas fa-check"></i> Easy access to gangway on port days</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="3622">
                            <i class="fas fa-copy"></i> Copy #
                        </button>
                        <a href="decks.html?deck=3&room=3622" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Map
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Empty State -->
        <div class="empty-state is-hidden" id="emptyState">
            <div class="empty-state-content">
                <i class="fas fa-ship fa-3x"></i>
                <h3>Ahoy! No Matching Staterooms Found</h3>
                <p>Your search didn't match any rooms in your party. Try adjusting your search filters or clearing all filters to view all rooms.</p>
                <button class="btn btn-primary mt-3" id="clearEmptyState">
                    <i class="fas fa-filter-circle-xmark"></i> Clear All Filters & Show All Rooms
                </button>
            </div>
        </div>

        <!-- Enhanced Action Buttons -->
        <div class="action-buttons">
            <div class="action-primary">
                <a href="decks.html" class="btn btn-primary btn-icon">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>Interactive Deck Plans</span>
                    <small>Explore full ship layout</small>
                </a>
                <button class="btn btn-primary btn-icon" onclick="showMobileCheckIn()">
                    <i class="fas fa-mobile-alt"></i>
                    <span>Mobile Check-In</span>
                    <small>Open in Royal Caribbean App</small>
                </button>
                <button class="btn btn-primary btn-icon" onclick="setupRoomControls()">
                    <i class="fas fa-sliders-h"></i>
                    <span>Room Controls</span>
                    <small>Lights â€¢ AC â€¢ TV</small>
                </button>
            </div>
            
            <div class="action-secondary">
                <a href="index.html" class="btn btn-secondary">
                    <i class="fas fa-home"></i> Dashboard
                </a>
                <button class="btn btn-secondary" onclick="shareRoomInfo()">
                    <i class="fas fa-share"></i> Share with Party
                </button>
                <button class="btn btn-secondary" onclick="window.print()">
                    <i class="fas fa-print"></i> Print Details
                </button>
                <button class="btn btn-secondary" id="emergencyInfoBtn">
                    <i class="fas fa-life-ring"></i> Emergency Info
                </button>
            </div>
        </div>

        <!-- Important Information -->
        <div class="important-notes">
            <h3><i class="fas fa-info-circle"></i> Essential Stateroom Information</h3>
            <ul>
                <li><strong>Check-in Time:</strong> Staterooms accessible starting at 1:00 PM on embarkation day</li>
                <li><strong>Room Access:</strong> Your SeaPass card is your room key and onboard payment method</li>
                <li><strong>Wi-Fi Setup:</strong> Connect to "Royal-WiFi" and download the Royal Caribbean app</li>
                <li><strong>Muster Station:</strong> F6 (Deck 4) - Complete eMuster before 4:00 PM on Day 1</li>
                <li><strong>Safety Equipment:</strong> Life jackets stored under beds â€¢ Fire exits marked clearly</li>
                <li><strong>Room Service:</strong> Available 24/7 (complimentary continental breakfast)</li>
                <li><strong>Housekeeping:</strong> Morning service & evening turndown â€¢ Use door sign for privacy</li>
                <li><strong>Power Outlets:</strong> 110V (US) & 220V (EU) outlets â€¢ USB ports available</li>
                <li><strong>Laundry Service:</strong> Available for fee â€¢ Self-service on Decks 2, 6, 9</li>
                <li><strong>Guest Services:</strong> Extension 7000 â€¢ Open 24/7 for any room concerns</li>
            </ul>
            
            <div class="nautical-legend">
                <h4><i class="fas fa-compass"></i> Ship Location Guide</h4>
                <div class="legend-items">
                    <div class="legend-item">
                        <span class="legend-dot dot-starboard"></span>
                        <span class="legend-text"><strong>Starboard:</strong> Right side of ship â€¢ Sunset views</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-port"></span>
                        <span class="legend-text"><strong>Port:</strong> Left side of ship â€¢ Sunrise views</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-aft"></span>
                        <span class="legend-text"><strong>Aft:</strong> Rear of ship â€¢ Wake views â€¢ Quieter</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-forward"></span>
                        <span class="legend-text"><strong>Forward:</strong> Front of ship â€¢ Theater access</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-midship"></span>
                        <span class="legend-text"><strong>Midship:</strong> Middle â€¢ Least motion â€¢ Best location</span>
                    </div>
                </div>
            </div>
            
            <div class="pro-tips">
                <h4><i class="fas fa-lightbulb"></i> Pro Travel Tips</h4>
                <ul class="features-list">
                    <li><i class="fas fa-magnet"></i> Walls are metal - bring magnets for organizing papers</li>
                    <li><i class="fas fa-plug"></i> Bring a power strip (non-surge protected)</li>
                    <li><i class="fas fa-suitcase"></i> Store suitcases under beds for more space</li>
                    <li><i class="fas fa-clock"></i> Balcony rooms get morning sun â€¢ Port side for sunrise coffee</li>
                </ul>
            </div>
        </div>
    </main>

    <div id="sharedFooter"></div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav" aria-label="Bottom navigation">
        <a href="index.html" class="mobile-nav-item">
            <span class="mobile-nav-icon"><i class="fas fa-home"></i></span>
            <span class="mobile-nav-text">Dashboard</span>
        </a>
        <a href="operations.html" class="mobile-nav-item">
            <span class="mobile-nav-icon"><i class="fas fa-tasks"></i></span>
            <span class="mobile-nav-text">Checklist</span>
        </a>
        <a href="itinerary.html" class="mobile-nav-item">
            <span class="mobile-nav-icon"><i class="fas fa-route"></i></span>
            <span class="mobile-nav-text">Itinerary</span>
        </a>
        <a href="rooms.html" class="mobile-nav-item active" aria-current="page">
            <span class="mobile-nav-icon"><i class="fas fa-bed"></i></span>
            <span class="mobile-nav-text">Rooms</span>
        </a>
        <a href="decks.html" class="mobile-nav-item">
            <span class="mobile-nav-icon"><i class="fas fa-map"></i></span>
            <span class="mobile-nav-text">Decks</span>
        </a>
        <a href="dining.html" class="mobile-nav-item">
            <span class="mobile-nav-icon"><i class="fas fa-utensils"></i></span>
            <span class="mobile-nav-text">Dining</span>
        </a>
        <a href="tips.html" class="mobile-nav-item">
            <span class="mobile-nav-icon"><i class="fas fa-lightbulb"></i></span>
            <span class="mobile-nav-text">Tips</span>
        </a>
    </nav>

    <!-- Complete Enhanced JavaScript -->
    <script>
        // Complete RCCL Stateroom Experience
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ† Royal Caribbean Stateroom Experience Initialized');
            
            // Constants and Configuration
            const CONFIG = {
                shipName: 'Adventure of the Seas',
                sailingDate: 'Feb 15-22, 2026',
                musterStation: 'F6',
                emergencyExtension: 7000,
                totalRooms: 5,
                totalGuests: 12
            };

            // Initialize Elements
            const elements = {
                roomCards: document.querySelectorAll('.room-card'),
                searchInput: document.getElementById('searchInput'),
                deckFilter: document.getElementById('deckFilter'),
                typeFilter: document.getElementById('typeFilter'),
                clearFilters: document.getElementById('clearFilters'),
                resultsText: document.getElementById('resultsText'),
                filterChips: document.getElementById('filterChips'),
                emptyState: document.getElementById('emptyState'),
                clearEmptyState: document.getElementById('clearEmptyState'),
                liveAnnouncement: document.getElementById('liveAnnouncement'),
                filterCount: document.getElementById('filterCount'),
                emergencyInfoBtn: document.getElementById('emergencyInfoBtn')
            };

            // State Management
            let currentFilters = {
                search: '',
                deck: 'all',
                type: 'all'
            };

            // Initialize Animations
            function initializeAnimations() {
                elements.roomCards.forEach((card, index) => {
                    card.style.setProperty('--index', index);
                    card.style.animationDelay = `${index * 0.1}s`;
                });
            }

            // Debounced Filter Update
            const updateRoomFilters = (() => {
                let timeout;
                return () => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => {
                        performFilterUpdate();
                    }, 300);
                };
            })();

            function performFilterUpdate() {
                currentFilters = {
                    search: elements.searchInput.value.trim().toLowerCase(),
                    deck: elements.deckFilter.value,
                    type: elements.typeFilter.value
                };

                let visibleRooms = 0;
                let totalGuestsVisible = 0;
                const activeFilterCount = calculateActiveFilters();

                // Filter rooms
                elements.roomCards.forEach(card => {
                    const roomData = {
                        number: card.dataset.room || '',
                        deck: card.dataset.deck || '',
                        type: card.dataset.type || '',
                        guests: card.dataset.guests || '',
                        content: card.textContent.toLowerCase()
                    };

                    const isVisible = checkRoomVisibility(roomData, currentFilters);
                    
                    // Update visibility
                    card.classList.toggle('is-hidden', !isVisible);
                    card.setAttribute('aria-hidden', (!isVisible).toString());
                    card.style.pointerEvents = isVisible ? 'all' : 'none';

                    if (isVisible) {
                        visibleRooms++;
                        const guestCount = card.querySelectorAll('.guest-list li').length;
                        totalGuestsVisible += guestCount;
                        
                        // Animate appearance
                        card.style.animation = 'fadeInUp 0.5s ease forwards';
                    }
                });

                // Update UI
                updateResultsDisplay(visibleRooms, totalGuestsVisible, activeFilterCount);
                updateFilterChips();
                toggleEmptyState(visibleRooms === 0);
                announceResults(visibleRooms, activeFilterCount);
                highlightDeckRooms(currentFilters.deck);
            }

            function calculateActiveFilters() {
                let count = 0;
                if (currentFilters.search) count++;
                if (currentFilters.deck !== 'all') count++;
                if (currentFilters.type !== 'all') count++;
                return count;
            }

            function checkRoomVisibility(roomData, filters) {
                const matchesSearch = !filters.search ||
                    roomData.number.includes(filters.search) ||
                    roomData.guests.toLowerCase().includes(filters.search) ||
                    roomData.content.includes(filters.search);

                const matchesDeck = filters.deck === 'all' || roomData.deck === filters.deck;
                const matchesType = filters.type === 'all' || roomData.type === filters.type;

                return matchesSearch && matchesDeck && matchesType;
            }

            function updateResultsDisplay(visibleRooms, totalGuests, activeFilters) {
                if (visibleRooms === elements.roomCards.length) {
                    elements.resultsText.innerHTML = `
                        Showing all <strong>${visibleRooms} staterooms</strong> 
                        for <strong>${CONFIG.totalGuests} guests</strong> 
                        on <em>${CONFIG.shipName}</em>
                    `;
                } else if (visibleRooms === 0) {
                    elements.resultsText.textContent = 'No staterooms match your search criteria';
                } else {
                    elements.resultsText.innerHTML = `
                        Showing <strong>${visibleRooms} of ${elements.roomCards.length} staterooms</strong>
                        â€¢ <strong>${totalGuests} guests</strong>
                        ${activeFilters > 0 ? `â€¢ <span class="filter-indicator">${activeFilters} active filter${activeFilters !== 1 ? 's' : ''}</span>` : ''}
                    `;
                }

                elements.filterCount.textContent = activeFilters > 0 
                    ? `${activeFilters} filter${activeFilters !== 1 ? 's' : ''} active` 
                    : 'No active filters';
            }

            function updateFilterChips() {
                elements.filterChips.innerHTML = '';
                
                // Search chip
                if (currentFilters.search) {
                    const chip = createFilterChip(
                        'search',
                        `Search: "${currentFilters.search}"`,
                        'fas fa-search',
                        () => {
                            elements.searchInput.value = '';
                            updateRoomFilters();
                            elements.searchInput.focus();
                        }
                    );
                    elements.filterChips.appendChild(chip);
                }
                
                // Deck chip
                if (currentFilters.deck !== 'all') {
                    const deckText = elements.deckFilter.options[elements.deckFilter.selectedIndex].text.split(' - ')[0];
                    const chip = createFilterChip(
                        'deck',
                        `Deck: ${deckText}`,
                        'fas fa-layer-group',
                        () => {
                            elements.deckFilter.value = 'all';
                            updateRoomFilters();
                        }
                    );
                    elements.filterChips.appendChild(chip);
                }
                
                // Type chip
                if (currentFilters.type !== 'all') {
                    const typeText = elements.typeFilter.options[elements.typeFilter.selectedIndex].text.split(' (')[0];
                    const chip = createFilterChip(
                        'type',
                        `Type: ${typeText}`,
                        'fas fa-bed',
                        () => {
                            elements.typeFilter.value = 'all';
                            updateRoomFilters();
                        }
                    );
                    elements.filterChips.appendChild(chip);
                }
            }

            function createFilterChip(type, label, iconClass, onClick) {
                const chip = document.createElement('div');
                chip.className = 'filter-chip';
                chip.setAttribute('data-filter-type', type);
                chip.innerHTML = `
                    <i class="${iconClass}"></i>
                    <span>${label}</span>
                    <button type="button" aria-label="Remove ${type} filter" title="Remove filter">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                chip.querySelector('button').addEventListener('click', onClick);
                return chip;
            }

            function toggleEmptyState(show) {
                elements.emptyState.classList.toggle('is-hidden', !show);
            }

            function announceResults(visibleRooms, activeFilters) {
                if (!elements.liveAnnouncement) return;
                
                let message = '';
                if (visibleRooms === 0) {
                    message = 'No staterooms found. Try adjusting your search.';
                } else if (visibleRooms === elements.roomCards.length) {
                    message = `Showing all ${visibleRooms} staterooms.`;
                } else {
                    message = `Found ${visibleRooms} stateroom${visibleRooms !== 1 ? 's' : ''}.`;
                    if (activeFilters > 0) {
                        message += ` ${activeFilters} filter${activeFilters !== 1 ? 's' : ''} active.`;
                    }
                }
                
                elements.liveAnnouncement.textContent = message;
                
                // Clear after announcement
                setTimeout(() => {
                    elements.liveAnnouncement.textContent = '';
                }, 3000);
            }

            function highlightDeckRooms(selectedDeck) {
                if (selectedDeck === 'all') {
                    elements.roomCards.forEach(card => {
                        card.style.borderLeftColor = '';
                    });
                    return;
                }
                
                elements.roomCards.forEach(card => {
                    if (card.dataset.deck === selectedDeck) {
                        card.style.borderLeftColor = 'var(--primary-blue)';
                        card.style.borderLeftWidth = '4px';
                        card.style.borderLeftStyle = 'solid';
                    } else {
                        card.style.borderLeftColor = '';
                        card.style.borderLeftWidth = '';
                        card.style.borderLeftStyle = '';
                    }
                });
            }

            // Enhanced Copy Functionality
            function setupCopyButtons() {
                document.querySelectorAll('[data-copy-room]').forEach(button => {
                    button.addEventListener('click', async (e) => {
                        e.stopPropagation();
                        const roomNumber = e.currentTarget.dataset.copyRoom;
                        await copyRoomNumber(roomNumber, button);
                    });
                });
            }

            async function copyRoomNumber(roomNumber, buttonElement) {
                const originalContent = buttonElement.innerHTML;
                const originalClasses = buttonElement.className;
                
                try {
                    await navigator.clipboard.writeText(roomNumber);
                    
                    // Success state
                    buttonElement.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    buttonElement.className = originalClasses + ' copy-success';
                    
                    // Haptic feedback if available
                    if (navigator.vibrate) navigator.vibrate(50);
                    
                    // Show notification
                    showCopyNotification(`Room ${roomNumber} copied to clipboard!`);
                    
                    // Track in localStorage
                    trackCopyHistory(roomNumber);
                    
                    // Restore button
                    setTimeout(() => {
                        buttonElement.innerHTML = originalContent;
                        buttonElement.className = originalClasses;
                    }, 2000);
                    
                } catch (err) {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = roomNumber;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    
                    buttonElement.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        buttonElement.innerHTML = originalContent;
                    }, 1500);
                }
            }

            function showCopyNotification(message) {
                // Remove existing notification
                const existing = document.querySelector('.copy-notification');
                if (existing) existing.remove();
                
                // Create notification
                const notification = document.createElement('div');
                notification.className = 'copy-notification';
                notification.innerHTML = `
                    <i class="fas fa-check-circle"></i>
                    <span>${message}</span>
                `;
                
                // Add styles
                const style = document.createElement('style');
                style.textContent = `
                    .copy-notification {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: var(--success-gradient);
                        color: white;
                        padding: 1rem 1.5rem;
                        border-radius: var(--radius-md);
                        box-shadow: var(--shadow-xl);
                        display: flex;
                        align-items: center;
                        gap: 0.75rem;
                        z-index: 9999;
                        animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s forwards;
                    }
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
                
                document.body.appendChild(notification);
                
                // Auto-remove
                setTimeout(() => {
                    notification.remove();
                    style.remove();
                }, 3000);
            }

            function trackCopyHistory(roomNumber) {
                let history = JSON.parse(localStorage.getItem('rccl_copy_history') || '[]');
                history = history.filter(r => r !== roomNumber);
                history.unshift({
                    room: roomNumber,
                    timestamp: new Date().toISOString()
                });
                history = history.slice(0, 10);
                localStorage.setItem('rccl_copy_history', JSON.stringify(history));
            }

            // Deck Preview Interactions
            function setupDeckPreview() {
                document.querySelectorAll('.room-marker').forEach(marker => {
                    marker.addEventListener('click', function() {
                        const roomNumber = this.dataset.room;
                        scrollToRoom(roomNumber);
                    });
                });

                document.querySelectorAll('.deck-level').forEach(level => {
                    level.addEventListener('click', function() {
                        const deck = this.dataset.deck;
                        elements.deckFilter.value = deck;
                        updateRoomFilters();
                    });
                });
            }

            function scrollToRoom(roomNumber) {
                const roomCard = document.querySelector(`[data-room="${roomNumber}"]`);
                if (roomCard) {
                    roomCard.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                    
                    // Highlight effect
                    roomCard.style.animation = 'none';
                    setTimeout(() => {
                        roomCard.style.animation = 'pulse-glow 1s 2';
                        setTimeout(() => {
                            roomCard.style.animation = '';
                        }, 2000);
                    }, 10);
                }
            }

            // Emergency Info Modal
            function setupEmergencyInfo() {
                if (elements.emergencyInfoBtn) {
                    elements.emergencyInfoBtn.addEventListener('click', showEmergencyModal);
                }
            }

            function showEmergencyModal() {
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3><i class="fas fa-exclamation-triangle"></i> Emergency Information</h3>
                            <button class="modal-close" aria-label="Close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="emergency-section">
                                <h4><i class="fas fa-first-aid"></i> Muster Station</h4>
                                <p><strong>${CONFIG.musterStation}</strong> (Deck 4 Forward)</p>
                                <p>Complete eMuster before 4:00 PM on Embarkation Day</p>
                            </div>
                            <div class="emergency-section">
                                <h4><i class="fas fa-phone"></i> Emergency Contacts</h4>
                                <p><strong>Medical Emergency:</strong> Extension 7001</p>
                                <p><strong>Security:</strong> Extension 7002</p>
                                <p><strong>Guest Services:</strong> Extension ${CONFIG.emergencyExtension}</p>
                            </div>
                            <div class="emergency-section">
                                <h4><i class="fas fa-info-circle"></i> Important Numbers</h4>
                                <p><strong>Emergency Assembly Signal:</strong> 7 short blasts + 1 long blast</p>
                                <p><strong>Life Jacket Location:</strong> Under your bed</p>
                                <p><strong>Nearest Fire Exit:</strong> Marked in hallway</p>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" onclick="window.print()">
                                <i class="fas fa-print"></i> Print Emergency Info
                            </button>
                            <button class="btn btn-secondary close-modal">Close</button>
                        </div>
                    </div>
                `;
                
                // Add modal styles
                const style = document.createElement('style');
                style.textContent = `
                    .modal-overlay {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.85);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10000;
                        animation: fadeIn 0.3s ease;
                        backdrop-filter: blur(5px);
                    }
                    .modal-content {
                        background: white;
                        border-radius: var(--radius-lg);
                        width: 90%;
                        max-width: 500px;
                        max-height: 90vh;
                        overflow-y: auto;
                        box-shadow: var(--shadow-xl);
                        animation: scaleIn 0.3s ease;
                    }
                    .modal-header {
                        background: var(--primary-gradient);
                        color: white;
                        padding: 1.75rem;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        border-radius: var(--radius-lg) var(--radius-lg) 0 0;
                    }
                    .modal-header h3 {
                        margin: 0;
                        display: flex;
                        align-items: center;
                        gap: 0.75rem;
                    }
                    .modal-close {
                        background: none;
                        border: none;
                        color: white;
                        font-size: 2rem;
                        cursor: pointer;
                        line-height: 1;
                        transition: all var(--transition-fast);
                    }
                    .modal-close:hover {
                        transform: scale(1.2);
                    }
                    .modal-body {
                        padding: 2rem;
                    }
                    .emergency-section {
                        margin-bottom: 2rem;
                        padding-bottom: 1.5rem;
                        border-bottom: 2px solid #dee2e6;
                    }
                    .emergency-section:last-child {
                        border-bottom: none;
                        margin-bottom: 0;
                    }
                    .emergency-section h4 {
                        color: var(--primary-blue);
                        display: flex;
                        align-items: center;
                        gap: 0.75rem;
                        margin-bottom: 1rem;
                        font-size: 1.1rem;
                    }
                    .modal-footer {
                        padding: 1.5rem;
                        background: #f8f9fa;
                        border-top: 2px solid #dee2e6;
                        display: flex;
                        gap: 1rem;
                        justify-content: flex-end;
                    }
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes scaleIn {
                        from { transform: scale(0.9); opacity: 0; }
                        to { transform: scale(1); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
                
                // Close functionality
                modal.querySelector('.modal-close').addEventListener('click', () => {
                    modal.remove();
                    style.remove();
                });
                
                modal.querySelector('.close-modal').addEventListener('click', () => {
                    modal.remove();
                    style.remove();
                });
                
                // Close on background click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                        style.remove();
                    }
                });
                
                // Close on Escape key
                document.addEventListener('keydown', function closeOnEscape(e) {
                    if (e.key === 'Escape') {
                        modal.remove();
                        style.remove();
                        document.removeEventListener('keydown', closeOnEscape);
                    }
                });
                
                document.body.appendChild(modal);
            }

            // Enhanced Action Button Functions
            window.showMobileCheckIn = function() {
                alert("ðŸ“± Opening Royal Caribbean app for mobile check-in...\n\nIn the actual app, you would see:\nâ€¢ Digital SeaPass\nâ€¢ Boarding pass\nâ€¢ Health questionnaire\nâ€¢ Security photo");
            };

            window.setupRoomControls = function() {
                const roomNumber = '6650'; // Default to featured room
                const modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3><i class="fas fa-sliders-h"></i> Room ${roomNumber} Controls</h3>
                            <button class="modal-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="control-group">
                                <label><i class="fas fa-sun"></i> Temperature</label>
                                <div class="slider-container">
                                    <input type="range" min="65" max="78" value="72" class="temp-slider">
                                    <span class="slider-value">72Â°F</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label><i class="fas fa-lightbulb"></i> Lighting Mode</label>
                                <div class="light-controls">
                                    <button class="light-btn active" data-preset="day">Day</button>
                                    <button class="light-btn" data-preset="evening">Evening</button>
                                    <button class="light-btn" data-preset="night">Night</button>
                                    <button class="light-btn" data-preset="off">Off</button>
                                </div>
                            </div>
                            <div class="control-group">
                                <label><i class="fas fa-tv"></i> Entertainment</label>
                                <div class="tv-controls">
                                    <button class="tv-btn active">Cruise Info</button>
                                    <button class="tv-btn">Movies</button>
                                    <button class="tv-btn">Live TV</button>
                                    <button class="tv-btn">Off</button>
                                </div>
                            </div>
                            <div class="control-group">
                                <label><i class="fas fa-bell"></i> Service Requests</label>
                                <div class="service-controls">
                                    <button class="service-btn">Housekeeping</button>
                                    <button class="service-btn">Room Service</button>
                                    <button class="service-btn">Maintenance</button>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary save-settings">Save Settings</button>
                            <button class="btn btn-secondary close-modal">Close</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Add event listeners
                modal.querySelector('.modal-close').addEventListener('click', () => modal.remove());
                modal.querySelector('.close-modal').addEventListener('click', () => modal.remove());
                
                // Temperature slider
                const tempSlider = modal.querySelector('.temp-slider');
                const tempValue = modal.querySelector('.slider-value');
                tempSlider.addEventListener('input', (e) => {
                    tempValue.textContent = `${e.target.value}Â°F`;
                });
                
                // Button controls
                modal.querySelectorAll('.light-btn, .tv-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        this.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                    });
                });
                
                // Save settings
                modal.querySelector('.save-settings').addEventListener('click', () => {
                    const temp = tempSlider.value;
                    const lighting = modal.querySelector('.light-btn.active')?.dataset.preset || 'day';
                    const tv = modal.querySelector('.tv-btn.active')?.textContent || 'Off';
                    
                    alert(`Room settings saved!\n\nâ€¢ Temperature: ${temp}Â°F\nâ€¢ Lighting: ${lighting}\nâ€¢ TV: ${tv}\n\nSettings will sync to your stateroom shortly.`);
                    modal.remove();
                });
            };

            window.shareRoomInfo = function() {
                const shareData = {
                    title: 'My Royal Caribbean Stateroom',
                    text: `My Royal Caribbean stateroom: Room 6650 on Adventure of the Seas.\n\nDeck 6 â€¢ Starboard â€¢ Balcony Suite\nSailing: ${CONFIG.sailingDate}`,
                    url: window.location.href
                };

                if (navigator.share) {
                    navigator.share(shareData)
                        .then(() => console.log('Shared successfully'))
                        .catch(err => console.log('Error sharing:', err));
                } else {
                    // Fallback
                    const shareText = `${shareData.text}\n\n${shareData.url}`;
                    navigator.clipboard.writeText(shareText)
                        .then(() => {
                            alert('Room information copied to clipboard! You can now paste it to share.');
                        })
                        .catch(() => {
                            prompt('Copy this text to share:', shareText);
                        });
                }
            };

            window.generateQRCode = function(roomNumber) {
                alert(`ðŸ“± QR Code generated for Room ${roomNumber}!\n\nIn the Royal Caribbean app, this QR code contains:\nâ€¢ Room number and location\nâ€¢ Emergency contacts\nâ€¢ Direct link to room on deck plans\nâ€¢ Guest services extension\n\nScan with your phone camera to save.`);
            };

            // Tooltip Management
            function setupTooltips() {
                document.querySelectorAll('.location-tooltip').forEach(tooltip => {
                    const parent = tooltip.parentElement;
                    
                    parent.addEventListener('mouseenter', () => {
                        tooltip.style.display = 'block';
                        tooltip.style.animation = 'fadeInUp 0.2s ease';
                    });
                    
                    parent.addEventListener('mouseleave', () => {
                        tooltip.style.display = 'none';
                    });
                    
                    // Accessibility support
                    parent.addEventListener('focus', () => {
                        tooltip.style.display = 'block';
                    });
                    
                    parent.addEventListener('blur', () => {
                        tooltip.style.display = 'none';
                    });
                });
            }

            // Keyboard Shortcuts
            function setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    // Ctrl/Cmd + F to focus search
                    if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                        e.preventDefault();
                        elements.searchInput.focus();
                        elements.searchInput.select();
                    }
                    
                    // Escape to clear filters
                    if (e.key === 'Escape' && document.activeElement !== elements.searchInput) {
                        clearAllFilters();
                    }
                    
                    // Number keys for quick deck filtering
                    if (e.key >= '1' && e.key <= '3' && !document.activeElement.matches('input, select, textarea')) {
                        const deckMap = { '1': '3', '2': '6', '3': '8' };
                        const deck = deckMap[e.key];
                        if (deck) {
                            elements.deckFilter.value = deck;
                            updateRoomFilters();
                            announceResults(elements.roomCards.length, 1);
                        }
                    }
                });
            }

            function clearAllFilters() {
                const hasActiveFilters = currentFilters.search || currentFilters.deck !== 'all' || currentFilters.type !== 'all';
                if (!hasActiveFilters) return;
                
                elements.searchInput.value = '';
                elements.deckFilter.value = 'all';
                elements.typeFilter.value = 'all';
                updateRoomFilters();
                
                // Focus management
                elements.searchInput.focus();
                
                // Success feedback
                if (elements.clearFilters) {
                    elements.clearFilters.innerHTML = '<i class="fas fa-check"></i> Cleared!';
                    setTimeout(() => {
                        elements.clearFilters.innerHTML = '<i class="fas fa-filter-circle-xmark"></i> Clear All Filters';
                    }, 1500);
                }
                
                // Announcement
                if (elements.liveAnnouncement) {
                    elements.liveAnnouncement.textContent = 'All filters cleared. Showing all staterooms.';
                }
            }

            // Initialize Event Listeners
            function initializeEventListeners() {
                // Filter inputs
                elements.searchInput.addEventListener('input', updateRoomFilters);
                elements.deckFilter.addEventListener('change', updateRoomFilters);
                elements.typeFilter.addEventListener('change', updateRoomFilters);
                
                // Clear buttons
                elements.clearFilters?.addEventListener('click', clearAllFilters);
                
                elements.clearEmptyState?.addEventListener('click', () => {
                    clearAllFilters();
                    showCopyNotification('All filters cleared. Showing all staterooms.');
                });
                
                // Print optimization
                document.addEventListener('beforeprint', () => {
                    document.body.classList.add('printing');
                });
                
                document.addEventListener('afterprint', () => {
                    document.body.classList.remove('printing');
                });
            }

            // Initialize Everything
            function initialize() {
                initializeAnimations();
                setupCopyButtons();
                setupDeckPreview();
                setupEmergencyInfo();
                setupTooltips();
                setupKeyboardShortcuts();
                initializeEventListeners();
                
                // Perform initial filter update
                performFilterUpdate();
                
                // Welcome announcement
                setTimeout(() => {
                    if (elements.liveAnnouncement) {
                        elements.liveAnnouncement.textContent = 
                            `Welcome to your stateroom dashboard! You have ${CONFIG.totalRooms} rooms for ${CONFIG.totalGuests} guests on ${CONFIG.shipName}.`;
                    }
                }, 1000);
                
                console.log('ðŸš¢ RCCL Stateroom Experience fully loaded and ready!');
            }

            // Start the experience
            initialize();
        });

        // Global utility functions
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `global-notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#0066b2'};
                color: white;
                padding: 1rem 2rem;
                border-radius: var(--radius-md);
                box-shadow: var(--shadow-xl);
                z-index: 9999;
                animation: slideDown 0.3s ease, slideUp 0.3s ease 2.7s forwards;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Add global notification styles
        const globalStyles = document.createElement('style');
        globalStyles.textContent = `
            @keyframes slideDown {
                from { transform: translate(-50%, -100%); opacity: 0; }
                to { transform: translate(-50%, 0); opacity: 1; }
            }
            @keyframes slideUp {
                to { transform: translate(-50%, -100%); opacity: 0; }
            }
        `;
        document.head.appendChild(globalStyles);
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed:', err);
                    });
            });
        }
    </script>
</body>
</html>
