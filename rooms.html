<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#f5f7fb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.svg">
    <title>Royal Caribbean Staterooms | Adventure of the Seas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="shared-layout.js" defer></script>
</head>
<body class="hero-visible">
    <a href="#main-content" class="skip-to-content">Skip to main content</a>
    <!-- Header -->
    <div id="sharedHeader" data-page="rooms" data-menu-toggle="false"></div>

    <section class="app-hero">
        <div class="app-hero__inner">
            <span class="app-hero__context">Staterooms</span>
            <h1 class="app-hero__title">Where You’ll Stay</h1>
            <p class="app-hero__meta">
                Room assignments, decks, and cabin details
            </p>
        </div>
    </section>

    <main id="main-content" class="container">
        <section class="hero-support hero-support--compact">
            <div class="hero-actions">
                <a class="btn btn-primary" href="decks.html">
                    <i class="fas fa-map"></i> View Deck Plans
                </a>
            </div>
        </section>
        <div class="room-card featured" data-room="6650" data-deck="6" data-type="balcony" data-guests="bill melissa owen declan">
            <div class="room-header">
                <div class="room-number">
                    <span>6650</span>
                    <button class="copy-quick" data-copy-room="6650" aria-label="Copy room number 6650"><i class="fas fa-copy"></i></button>
                </div>
                <div class="room-location">
                    <i class="fas fa-map-marker-alt"></i>
                    Deck 6 • Starboard • Connecting to 6652
                    <span class="location-tooltip">Starboard is the right side of the ship.</span>
                </div>
                <span class="room-tag tag--info">Balcony Suite</span>
                <span class="room-badge room-badge--primary">Your Stateroom</span>
            </div>
            <div class="room-content">
                <p class="room-label"><i class="fas fa-user-friends"></i> Guests (4):</p>
                <ul class="guest-list">
                    <li class="adult">Bill (Adult)</li>
                    <li class="adult">Melissa (Adult)</li>
                    <li class="child">Owen (Child)</li>
                    <li class="child">Declan (Child)</li>
                </ul>
                <div class="room-features">
                    <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                    <ul class="features-list">
                        <li><i class="fas fa-check"></i> 198 sq ft + 46 sq ft private balcony</li>
                        <li><i class="fas fa-check"></i> Connecting door to room 6652</li>
                        <li><i class="fas fa-check"></i> Two twin beds convertible to king</li>
                        <li><i class="fas fa-check"></i> Interactive TV & mini-safe</li>
                        <li><i class="fas fa-check"></i> Private bathroom with shower</li>
                    </ul>
                </div>
                <div class="room-cta">
                    <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="6650">
                        <i class="fas fa-copy"></i> Copy Room #
                    </button>
                    <a href="decks.html" class="btn btn-secondary room-link-btn">
                        <i class="fas fa-map"></i> Deck Plan
                    </a>
                </div>
            </div>
        </div>
        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="card card--compact">
                <div class="stat-number">5</div>
                <div class="stat-label">Total Rooms</div>
            </div>
            <div class="card card--compact">
                <div class="stat-number">10</div>
                <div class="stat-label">Total Guests</div>
            </div>
            <div class="card card--compact">
                <div class="stat-number">3</div>
                <div class="stat-label">Deck Levels</div>
            </div>
            <div class="card card--compact">
                <div class="stat-number">2</div>
                <div class="stat-label">Room Types</div>
            </div>
        </div>

        <section class="room-tools" aria-label="Find your room">
            <details class="room-filters" open>
                <summary>Refine Rooms</summary>
                <div class="room-tools-grid">
                    <div class="search-container">
                        <label for="searchInput" class="field-label">
                            <i class="fas fa-search"></i> Search by guest name or room number
                        </label>
                        <div class="search-wrapper">
                            <input id="searchInput" class="field-control"
                                   type="search"
                                   placeholder="Type guest name (Bill) or room number (6650)"
                                   autocomplete="off"
                                   aria-describedby="searchHelp">
                            <span class="search-icon" aria-hidden="true">
                                <i class="fas fa-search"></i>
                            </span>
                        </div>
                        <small id="searchHelp" class="field-help">Search accepts names or room numbers separately</small>
                    </div>

                    <div class="filter-group">
                        <label for="deckFilter" class="field-label">
                            <i class="fas fa-layer-group"></i> Filter by deck
                        </label>
                        <select id="deckFilter" class="field-control" aria-describedby="deckHelp">
                            <option value="all">All decks (3, 6, 8)</option>
                            <option value="3">Deck 3 - Lower Deck</option>
                            <option value="6">Deck 6 - Main Deck</option>
                            <option value="8">Deck 8 - Upper Deck</option>
                        </select>
                        <small id="deckHelp" class="field-help">Deck 3: Forward, Deck 6: Mid, Deck 8: Aft</small>
                    </div>

                    <div class="filter-group">
                        <label for="typeFilter" class="field-label">
                            <i class="fas fa-bed"></i> Filter by room type
                        </label>
                        <select id="typeFilter" class="field-control" aria-describedby="typeHelp">
                            <option value="all">All room types</option>
                            <option value="balcony">Balcony Room (with private balcony)</option>
                            <option value="ocean">Ocean View (window view)</option>
                            <option value="interior">Interior Room (no window)</option>
                        </select>
                        <small id="typeHelp" class="field-help">Balcony includes suite, ocean view has window</small>
                    </div>

                <div class="filter-actions">
                    <button id="clearFilters" class="btn btn-secondary" type="button" aria-label="Reset all filters">
                        <i class="fas fa-filter-circle-xmark"></i> Clear Filters
                    </button>
                    <span class="filter-count" id="filterCount" aria-live="polite"></span>
                </div>
            </div>
            <div class="filter-chips" id="filterChips"></div>
            <div class="results-row">
                <p class="results-text" id="resultsText">Showing all 5 rooms</p>
            </div>
                <div class="screen-reader-announcement" aria-live="polite" aria-atomic="true">
                    <span id="liveAnnouncement"></span>
                </div>
            </details>
        </section>

        <!-- Room Grid -->
        <section class="room-grid" id="roomGrid"
                 aria-label="List of staterooms"
                 role="region">
            <!-- Room 2 -->
            <div class="room-card" data-room="6443" data-deck="6" data-type="interior" data-guests="abel amy">
                <div class="room-header">
                    <div class="room-number">
                        <span>6443</span>
                        <button class="copy-quick" data-copy-room="6443" aria-label="Copy room number 6443"><i class="fas fa-copy"></i></button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 6 • Port • Near laundry
                        <span class="location-tooltip">Port is the left side of the ship.</span>
                    </div>
                    <span class="room-tag tag--warning">Interior Room</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Abel (Adult)</li>
                        <li class="adult">Amy (Adult)</li>
                    </ul>
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> 160 sq ft interior space</li>
                            <li><i class="fas fa-check"></i> Perfect darkness for sleeping</li>
                            <li><i class="fas fa-check"></i> Quiet location</li>
                            <li><i class="fas fa-check"></i> Two twin beds convertible to king</li>
                            <li><i class="fas fa-check"></i> Convenient laundry access</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="6443">
                            <i class="fas fa-copy"></i> Copy Room #
                        </button>
                        <a href="decks.html" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Deck Plan
                        </a>
                    </div>
                </div>
            </div>

            <!-- Room 3 -->
            <div class="room-card" data-room="8528" data-deck="8" data-type="balcony" data-guests="aimee karin">
                <div class="room-header">
                    <div class="room-number">
                        <span>8528</span>
                        <button class="copy-quick" data-copy-room="8528" aria-label="Copy room number 8528"><i class="fas fa-copy"></i></button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 8 • Midship
                        <span class="location-tooltip">Midship is the middle of the ship with less motion.</span>
                    </div>
                    <span class="room-tag tag--info">Balcony Room</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Aimee (Adult)</li>
                        <li class="adult">Karin (Adult)</li>
                    </ul>
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> Private balcony with ocean views</li>
                            <li><i class="fas fa-check"></i> Mid-ship location (less motion)</li>
                            <li><i class="fas fa-check"></i> 198 sq ft + balcony</li>
                            <li><i class="fas fa-check"></i> Easy access to elevators</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="8528">
                            <i class="fas fa-copy"></i> Copy Room #
                        </button>
                        <a href="decks.html" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Deck Plan
                        </a>
                    </div>
                </div>
            </div>

            <!-- Room 4 -->
            <div class="room-card" data-room="8612" data-deck="8" data-type="ocean" data-guests="bella tj">
                <div class="room-header">
                    <div class="room-number">
                        <span>8612</span>
                        <button class="copy-quick" data-copy-room="8612" aria-label="Copy room number 8612"><i class="fas fa-copy"></i></button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 8 • Aft • Quiet corridor
                        <span class="location-tooltip">Aft is the rear of the ship.</span>
                    </div>
                    <span class="room-tag tag--success">Ocean View</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Bella (Adult)</li>
                        <li class="adult">TJ (Adult)</li>
                    </ul>
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> Large ocean view window</li>
                            <li><i class="fas fa-check"></i> Quiet aft location</li>
                            <li><i class="fas fa-check"></i> 179 sq ft with sitting area</li>
                            <li><i class="fas fa-check"></i> Peaceful evenings</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="8612">
                            <i class="fas fa-copy"></i> Copy Room #
                        </button>
                        <a href="decks.html" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Deck Plan
                        </a>
                    </div>
                </div>
            </div>

            <!-- Room 5 -->
            <div class="room-card" data-room="3622" data-deck="3" data-type="interior" data-guests="phoebe ryan">
                <div class="room-header">
                    <div class="room-number">
                        <span>3622</span>
                        <button class="copy-quick" data-copy-room="3622" aria-label="Copy room number 3622"><i class="fas fa-copy"></i></button>
                    </div>
                    <div class="room-location">
                        <i class="fas fa-map-marker-alt"></i>
                        Deck 3 • Forward
                        <span class="location-tooltip">Forward is the front of the ship.</span>
                    </div>
                    <span class="room-tag tag--warning">Interior Room</span>
                </div>
                <div class="room-content">
                    <p class="room-label"><i class="fas fa-user-friends"></i> Guests (2):</p>
                    <ul class="guest-list">
                        <li class="adult">Phoebe (Adult)</li>
                        <li class="adult">Ryan (Adult)</li>
                    </ul>
                    <div class="room-features">
                        <p class="room-label"><i class="fas fa-list-check"></i> Room Features:</p>
                        <ul class="features-list">
                            <li><i class="fas fa-check"></i> 160 sq ft interior space</li>
                            <li><i class="fas fa-check"></i> Perfect darkness for sleeping</li>
                            <li><i class="fas fa-check"></i> Budget-friendly option</li>
                            <li><i class="fas fa-check"></i> Close to forward elevators</li>
                        </ul>
                    </div>
                    <div class="room-cta">
                        <button class="btn btn-secondary room-link-btn" type="button" data-copy-room="3622">
                            <i class="fas fa-copy"></i> Copy Room #
                        </button>
                        <a href="decks.html" class="btn btn-secondary room-link-btn">
                            <i class="fas fa-map"></i> Deck Plan
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <div class="empty-state is-hidden" id="emptyState">
            <div class="empty-state-content">
                <i class="fas fa-ship fa-3x"></i>
                <h3>No matching rooms found</h3>
                <p>Try clearing your filters or searching by a different name.</p>
                <button class="btn btn-primary mt-3" id="clearEmptyState"><i class="fas fa-filter-circle-xmark"></i> Clear All Filters</button>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <a href="decks.html" class="btn btn-primary">
                <i class="fas fa-map"></i> View Deck Plans
            </a>
            <a href="index.html" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Dashboard
            </a>
        </div>

        <!-- Important Notes -->
        <div class="important-notes">
            <h3><i class="fas fa-info-circle"></i> Important Stateroom Information</h3>
            <ul>
                <li><strong>Check-in Time:</strong> Rooms are accessible starting at 1:00 PM on embarkation day</li>
                <li><strong>Room Access:</strong> Your SeaPass card opens your stateroom door</li>
                <li><strong>Wi-Fi:</strong> Connect to ship's Wi-Fi and download the Royal Caribbean app</li>
                <li><strong>Muster Station:</strong> F6 (Deck 4) - Complete eMuster before 4:00 PM on Day 1</li>
                <li><strong>Safety:</strong> Life jackets are located under the bed in each room</li>
                <li><strong>Room Service:</strong> Available 24/7 (nominal fee applies for some items)</li>
                <li><strong>Housekeeping:</strong> Twice daily service (morning & evening turn-down)</li>
                <li><strong>Questions:</strong> Contact Guest Services (Ext. 7000) for any room issues</li>
            </ul>
            <div class="nautical-legend">
                <h4><i class="fas fa-anchor"></i> Location Guide</h4>
                <div class="legend-items">
                    <div class="legend-item">
                        <span class="legend-dot dot-starboard"></span>
                        <span class="legend-text">Starboard: Right side of ship</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-port"></span>
                        <span class="legend-text">Port: Left side of ship</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-aft"></span>
                        <span class="legend-text">Aft: Rear of ship</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-forward"></span>
                        <span class="legend-text">Forward: Front of ship</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-dot dot-midship"></span>
                        <span class="legend-text">Midship: Middle of ship (less motion)</span>
                    </div>
                </div>
            </div>
        </div>
    </main>
        <!-- Mobile Navigation -->
        <footer class="app-footer" role="contentinfo">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3 class="footer-title">The Royal Way Hub</h3>
                        <p class="footer-text">Adventure of the Seas</p>
                        <p class="footer-text">© 2026 Royal Caribbean International</p>
                    </div>
                    <div class="footer-section">
                        <h4 class="footer-subtitle">Quick Links</h4>
                        <a href="index.html" class="footer-link">Dashboard</a>
                        <a href="operations.html" class="footer-link">Checklist</a>
                        <a href="itinerary.html" class="footer-link">Itinerary</a>
                    </div>
                    <div class="footer-section">
                        <h4 class="footer-subtitle">Support</h4>
                        <a href="tel:+1-800-398-9819" class="footer-link">Customer Support</a>
                        <a href="faq.html" class="footer-link">FAQ</a>
                        <a href="contact.html" class="footer-link">Contact Us</a>
                    </div>
                </div>
            </div>

        <nav class="mobile-nav">
            <a href="index.html" class="mobile-nav-item">
                <div class="mobile-nav-icon"><i class="fas fa-home"></i></div>
                <span class="mobile-nav-text">Dashboard</span>
            </a>
            <a href="operations.html" class="mobile-nav-item">
                <div class="mobile-nav-icon"><i class="fas fa-tasks"></i></div>
                <span class="mobile-nav-text">Checklist</span>
            </a>
            <a href="itinerary.html" class="mobile-nav-item">
                <div class="mobile-nav-icon"><i class="fas fa-route"></i></div>
                <span class="mobile-nav-text">Itinerary</span>
            </a>
            <a href="rooms.html" class="mobile-nav-item active">
                <div class="mobile-nav-icon"><i class="fas fa-bed"></i></div>
                <span class="mobile-nav-text">Rooms</span>
            </a>
            <a href="decks.html" class="mobile-nav-item">
                <div class="mobile-nav-icon"><i class="fas fa-map"></i></div>
                <span class="mobile-nav-text">Decks</span>
            </a>
            <a href="dining.html" class="mobile-nav-item">
                <div class="mobile-nav-icon"><i class="fas fa-utensils"></i></div>
                <span class="mobile-nav-text">Dining</span>
            </a>
            <a href="tips.html" class="mobile-nav-item">
                <div class="mobile-nav-icon"><i class="fas fa-lightbulb"></i></div>
                <span class="mobile-nav-text">Tips</span>
            </a>
        </nav>
        </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const elements = {
                roomCards: document.querySelectorAll('.room-card'),
                searchInput: document.getElementById('searchInput'),
                deckFilter: document.getElementById('deckFilter'),
                typeFilter: document.getElementById('typeFilter'),
                clearFilters: document.getElementById('clearFilters'),
                resultsText: document.getElementById('resultsText'),
                filterChips: document.getElementById('filterChips'),
                emptyState: document.getElementById('emptyState'),
                liveAnnouncement: document.getElementById('liveAnnouncement'),
                filterCount: document.getElementById('filterCount')
            };
            const emptyStateBtn = document.getElementById('clearEmptyState');

            // Debounce function
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            // Update filters with debounce
            const updateRoomFilters = debounce(() => {
                const searchQuery = elements.searchInput.value.trim().toLowerCase();
                const selectedDeck = elements.deckFilter.value;
                const selectedType = elements.typeFilter.value;
                let visibleRooms = 0;

                const activeFilters = [
                    searchQuery ? 'search' : null,
                    selectedDeck !== 'all' ? 'deck' : null,
                    selectedType !== 'all' ? 'type' : null
                ].filter(Boolean).length;

                elements.roomCards.forEach((card) => {
                    const roomNumber = card.dataset.room || '';
                    const roomDeck = card.dataset.deck || '';
                    const roomType = card.dataset.type || '';
                    const roomGuests = card.dataset.guests || '';

                    const matchesSearch = !searchQuery ||
                        roomNumber.includes(searchQuery) ||
                        roomGuests.toLowerCase().includes(searchQuery);

                    const matchesDeck = selectedDeck === 'all' || roomDeck === selectedDeck;
                    const matchesType = selectedType === 'all' || roomType === selectedType;

                    // Show/hide rooms
                    const visible = matchesSearch && matchesDeck && matchesType;
                    card.classList.toggle('is-hidden', !visible);
                    card.setAttribute('aria-hidden', !visible);

                    if (visible) {
                        visibleRooms += 1;
                        card.style.order = card.classList.contains('featured') ? '-1' : '0';
                    }
                });

                // Update UI
                elements.resultsText.textContent = `Showing ${visibleRooms} of ${elements.roomCards.length} rooms`;
                elements.filterCount.textContent = activeFilters > 0 ? `${activeFilters} filter${activeFilters !== 1 ? 's' : ''} active` : '';
                
                // Show/hide empty state
                const isEmpty = visibleRooms === 0;
                elements.emptyState.classList.toggle('is-hidden', !isEmpty);
                updateFilterChips(searchQuery, selectedDeck, selectedType);

                if (elements.liveAnnouncement && isEmpty) {
                    elements.liveAnnouncement.textContent =
                        visibleRooms === 0
                            ? 'No rooms match your filters. Try adjusting your search.'
                            : `Found ${visibleRooms} room${visibleRooms !== 1 ? 's' : ''}.`;
                }
            }, 300);

            // Filter chips functionality
            function updateFilterChips(searchQuery, selectedDeck, selectedType) {
                elements.filterChips.innerHTML = '';
                
                // Search chip
                if (searchQuery) {
                    const chip = createFilterChip('search', `Search: "${searchQuery}"`, () => {
                        elements.searchInput.value = '';
                        updateRoomFilters();
                    });
                    elements.filterChips.appendChild(chip);
                }
                
                // Deck chip
                if (selectedDeck !== 'all') {
                    const deckName = elements.deckFilter.options[elements.deckFilter.selectedIndex].text;
                    const chip = createFilterChip('deck', deckName.split(' - ')[0], () => {
                        elements.deckFilter.value = 'all';
                        updateRoomFilters();
                    });
                    elements.filterChips.appendChild(chip);
                }
                
                // Type chip
                if (selectedType !== 'all') {
                    const typeName = elements.typeFilter.options[elements.typeFilter.selectedIndex].text;
                    const chip = createFilterChip('type', typeName.split(' (')[0], () => {
                        elements.typeFilter.value = 'all';
                        updateRoomFilters();
                    });
                    elements.filterChips.appendChild(chip);
                }
            }

            function createFilterChip(type, label, onRemove) {
                const chip = document.createElement('div');
                chip.className = 'filter-chip';
                chip.innerHTML = `
                    <span>${label}</span>
                    <button type="button" aria-label="Remove ${type} filter">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                chip.querySelector('button').addEventListener('click', onRemove);
                return chip;
            }

            // Enhanced copy function
            function setupCopyButtons() {
                // Setup copy buttons in CTA
                document.querySelectorAll('.room-link-btn[data-copy-room]').forEach((button) => {
                    button.addEventListener('click', async () => {
                        handleCopyAction(button.dataset.copyRoom, button);
                    });
                });
                
                // Setup quick copy buttons
                document.querySelectorAll('.copy-quick').forEach((button) => {
                    button.addEventListener('click', async (e) => {
                        e.stopPropagation();
                        const roomNumber = e.currentTarget.dataset.copyRoom;
                        handleCopyAction(roomNumber, e.currentTarget);
                    });
                });
            }

            function handleCopyAction(roomNumber, buttonElement) {
                const originalContent = buttonElement.innerHTML;
                const originalText = buttonElement.textContent || buttonElement.querySelector('span')?.textContent || '';

                try {
                    navigator.clipboard.writeText(roomNumber).then(() => {
                        // Visual feedback
                        buttonElement.innerHTML = '<i class="fas fa-check"></i>';
                        buttonElement.classList.add('copy-success');
                        
                        // Announce to screen readers
                        const announcement = document.createElement('div');
                        announcement.setAttribute('aria-live', 'polite');
                        announcement.className = 'sr-only';
                        announcement.textContent = `Room number ${roomNumber} copied to clipboard`;
                        document.body.appendChild(announcement);
                        
                        setTimeout(() => {
                            buttonElement.innerHTML = originalContent || originalText;
                            buttonElement.classList.remove('copy-success');
                            document.body.removeChild(announcement);
                        }, 1500);
                    });
                } catch (error) {
                    const textArea = document.createElement('textarea');
                    textArea.value = roomNumber;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);

                    buttonElement.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        buttonElement.innerHTML = originalContent || originalText;
                    }, 1200);
                }
            }

            // Empty state clear button
            if (emptyStateBtn) {
                emptyStateBtn.addEventListener('click', () => {
                    elements.searchInput.value = '';
                    elements.deckFilter.value = 'all';
                    elements.typeFilter.value = 'all';
                    updateRoomFilters();
                    
                    // Focus management
                    elements.searchInput.focus();
                    
                    // Announce to screen readers
                    if (elements.liveAnnouncement) {
                        elements.liveAnnouncement.textContent = 'All filters have been cleared.';
                    }
                    
                    // Visual feedback
                    emptyStateBtn.innerHTML = '<i class="fas fa-check"></i> Cleared!';
                    setTimeout(() => { emptyStateBtn.innerHTML = '<i class="fas fa-filter-circle-xmark"></i> Clear All Filters'; }, 1500);
                });
            }

            elements.clearFilters.addEventListener('click', () => {
                const hasActiveFilters = elements.searchInput.value ||
                    elements.deckFilter.value !== 'all' ||
                    elements.typeFilter.value !== 'all';

                if (hasActiveFilters) {
                    elements.searchInput.value = '';
                    elements.deckFilter.value = 'all';
                    elements.typeFilter.value = 'all';
                    updateRoomFilters();
                    
                    // Focus management
                    elements.searchInput.focus();
                    elements.clearFilters.blur();

                    if (elements.liveAnnouncement) {
                        elements.liveAnnouncement.textContent = 'All filters have been reset.';
                    }
                }
            });

            function initializeAnimations() {
                const skeleton = document.getElementById('roomSkeleton');
                if (skeleton) {
                    skeleton.style.display = 'grid';
                }
                
                elements.roomCards.forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'none';

                    setTimeout(() => {
                        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease, box-shadow 0.3s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                        
                        // Hide skeleton after all cards load
                        if (index === elements.roomCards.length - 1 && skeleton) {
                            setTimeout(() => { skeleton.style.display = 'none'; }, 300);
                        }
                    }, index * 100);
                });
            }

            // Event listeners
            ['input', 'change'].forEach(event => {
                elements.searchInput.addEventListener(event, updateRoomFilters);
                elements.deckFilter.addEventListener(event, updateRoomFilters);
                elements.typeFilter.addEventListener(event, updateRoomFilters);
            });

            // Initialize everything
            initializeAnimations();
            setupCopyButtons();
            updateRoomFilters();
        });
    </script>
    <script src="service-worker-registration.js" defer></script>
</body>
</html>
