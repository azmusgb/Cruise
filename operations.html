<!DOCTYPE html>
<html lang="en" data-theme="light" data-theme-mode="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0079d4">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="manifest" href="manifest.json?v=2">
  <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
  <link rel="icon" type="image/svg+xml" href="icons/icon-192.svg">
  <title>Pre-Cruise Checklist | Adventure of the Seas</title>
  <meta name="description" content="Light, clear pre-cruise checklist for Adventure of the Seas. Complete online check-in, documents, luggage tags, and travel prep.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/base.css?v=3">
  <link rel="stylesheet" href="css/utilities.css?v=3">
  <link rel="stylesheet" href="css/components.css?v=3">

  <link rel="stylesheet" href="css/mobile-first.css?v=3">
  <script src="js/shared-layout.js?v=9" defer></script>
  <style>
    .operations-page .search-status-loading {
      opacity: 0.72;
    }
    .operations-page .task-complete-btn {
      margin-top: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--royal-border);
      background: #fff;
      color: var(--royal-navy);
      font-weight: 700;
      font-size: 0.82rem;
      cursor: pointer;
      align-self: flex-start;
    }
    .operations-page .deck-card.is-complete {
      border-color: rgba(47, 125, 98, 0.5) !important;
      box-shadow: 0 10px 22px rgba(47, 125, 98, 0.16) !important;
    }
    .operations-page .deck-card.is-complete .deck-card__cta {
      opacity: 0.72;
    }
    .term-help {
      border-bottom: 1px dotted rgba(17, 56, 95, 0.35);
      cursor: help;
      text-decoration: none;
    }
    .operations-page .ops-section {
      margin: 22px auto 0;
      padding: 0 20px;
      max-width: 1200px;
    }
    .operations-page .ops-heading {
      margin: 0 0 8px;
      color: var(--royal-navy);
      font-size: 1.28rem;
    }
    .operations-page .ops-subtitle {
      margin: 0 0 14px;
      color: var(--royal-ink);
      opacity: 0.88;
    }
    .operations-page .ops-timeline {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 10px;
    }
    .operations-page .ops-timeline__item {
      background: #fff;
      border: 1px solid var(--royal-border);
      border-radius: 12px;
      padding: 12px;
      box-shadow: var(--shadow-light);
    }
    .operations-page .ops-timeline__time {
      display: inline-block;
      font-size: 0.76rem;
      font-weight: 800;
      color: var(--royal-navy);
      margin-bottom: 4px;
    }
    .operations-page .ops-timeline__event {
      margin: 0;
      color: var(--royal-ink);
      font-weight: 600;
      font-size: 0.92rem;
    }
    .operations-page .ops-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
    }
    .operations-page .ops-card {
      background: #fff;
      border: 1px solid var(--royal-border);
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--shadow-light);
    }
    .operations-page .ops-card h3 {
      margin: 0 0 8px;
      font-size: 1rem;
      color: var(--royal-navy);
    }
    .operations-page .ops-owner {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin: 0 0 10px;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid var(--royal-border);
      background: var(--royal-foam);
      color: var(--royal-navy);
      font-size: 0.76rem;
      font-weight: 700;
    }
    .operations-page .ops-list {
      margin: 0;
      padding-left: 18px;
      display: grid;
      gap: 6px;
      color: var(--royal-ink);
    }
    .operations-page .ops-list li {
      font-size: 0.9rem;
    }
    .operations-page .ops-step-toggle {
      margin-top: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--royal-border);
      background: #fff;
      color: var(--royal-navy);
      font-weight: 700;
      font-size: 0.82rem;
      cursor: pointer;
    }
    .operations-page .ops-card.is-complete {
      border-color: rgba(47, 125, 98, 0.5);
      box-shadow: 0 10px 22px rgba(47, 125, 98, 0.16);
    }
    .operations-page .ops-card.is-complete .ops-step-toggle {
      opacity: 0.8;
    }
    @media (max-width: 768px) {
      .operations-page .ops-section {
        padding: 0 16px;
      }
    }
  </style>
</head>
<body class="decks-shell page-shell operations-page">
  <a href="#main" class="skip-link">Skip to main content</a>
  <div id="sharedHeader" data-page="operations"></div>

  <main id="main" aria-label="Pre-cruise checklist">
    <section class="deck-hero">
      <div class="container">
        <div class="deck-hero__eyebrow">Adventure of the Seas Â· Feb 14â€“20, 2026</div>
        <h1 class="deck-hero__title">Pre-Cruise Checklist</h1>
        <p class="deck-hero__subtitle">Complete every embarkation task with clear ownership, source, and completion proof.</p>
        <div class="deck-hero__highlights" aria-label="Checklist highlights">
          <span class="deck-hero__tag"><i class="fas fa-passport" aria-hidden="true"></i> Docs and check-in readiness</span>
          <span class="deck-hero__tag"><i class="fas fa-users" aria-hidden="true"></i> Owner-based task tracking</span>
          <span class="deck-hero__tag"><i class="fas fa-shield-heart" aria-hidden="true"></i> Must-do safety confirmations</span>
        </div>

        <div class="page-spine" aria-label="Checklist briefing">
          <div class="page-spine__item">
            <span class="page-spine__label">Documents</span>
            <span class="page-spine__meta">Passports, IDs, and check-in uploads</span>
          </div>
          <div class="page-spine__item">
            <span class="page-spine__label">Arrival logistics</span>
            <span class="page-spine__meta">Boarding time, tags, and embarkation flow</span>
          </div>
          <div class="page-spine__item">
            <span class="page-spine__label">Payments & safety</span>
            <span class="page-spine__meta">Card file, insurance, and risk coverage</span>
          </div>
        </div>
        <div class="deck-hero__actions">
          <a class="btn btn--primary" href="#tasks">Jump to tasks</a>
          <a class="btn btn--secondary" href="itinerary.html">View itinerary</a>
        </div>
      </div>
    </section>

    <section class="main-navigation" aria-label="Quick navigation">
      <div class="container main-navigation__inner">
        <div class="main-navigation__search" role="search">
          <i class="fas fa-search" aria-hidden="true"></i>
          <input id="operationsSearchInput" type="search" placeholder="Search tasks, docs, or deadlines" aria-label="Search checklist" />
          <span class="main-navigation__hint">Press / to focus</span>
        </div>
        <div class="main-navigation__filters" aria-label="Shortcuts">
          <a class="pill-btn" href="#tasks">All tasks</a>
          <a class="pill-btn" href="#critical-timeline">Critical timeline</a>
          <a class="pill-btn" href="#golden-hour">Golden hour</a>
          <a class="pill-btn" href="#docs">Travel docs</a>
          <a class="pill-btn" href="#arrival">Arrival & tags</a>
          <a class="pill-btn" href="#contingencies">Contingencies</a>
          <a class="pill-btn" href="#roles">Roles</a>
          <a class="pill-btn" href="tips.html">Packing tips</a>
        </div>
        <p id="operationsSearchStatus" style="width:100%; margin:4px 0 0; font-weight:600; color:var(--royal-navy);">Showing 5 of 5 tasks</p>
      </div>
    </section>

    <section class="deck-directory container" aria-label="Checklist categories">
      <article class="category-card" id="docs">
        <div class="category-card__heading">ðŸ§¾ Travel Documents</div>
        <div class="deck-pills">
          <div class="deck-pill"><span class="deck-pill__number">1</span><span class="deck-pill__text">Upload passports/IDs</span></div>
          <div class="deck-pill"><span class="deck-pill__number">2</span><span class="deck-pill__text">Guest photos</span></div>
        </div>
      </article>
      <article class="category-card" id="arrival">
        <div class="category-card__heading">ðŸ§³ Arrival & Tags</div>
        <div class="deck-pills">
          <div class="deck-pill"><span class="deck-pill__number">3</span><span class="deck-pill__text">Select boarding time</span></div>
          <div class="deck-pill"><span class="deck-pill__number">4</span><span class="deck-pill__text">Download luggage tags</span></div>
        </div>
      </article>
      <article class="category-card" id="payments">
        <div class="category-card__heading">ðŸ’³ Payments & Safety</div>
        <div class="deck-pills">
          <div class="deck-pill"><span class="deck-pill__number">5</span><span class="deck-pill__text">Card on file</span></div>
          <div class="deck-pill"><span class="deck-pill__number">6</span><span class="deck-pill__text">Travel insurance</span></div>
        </div>
      </article>
    </section>

    <section id="critical-timeline" class="ops-section" aria-label="Critical timeline strip">
      <h2 class="ops-heading">Critical Timeline</h2>
      <p class="ops-subtitle">High-risk windows for embarkation and port operations.</p>
      <div class="ops-timeline" role="list">
        <article class="ops-timeline__item" role="listitem">
          <span class="ops-timeline__time">Day 1 Â· 12:00 PM</span>
          <p class="ops-timeline__event">Check-in opens at Port Canaveral</p>
        </article>
        <article class="ops-timeline__item" role="listitem">
          <span class="ops-timeline__time">Day 1 Â· 2:00 PM</span>
          <p class="ops-timeline__event">All aboard deadline</p>
        </article>
        <article class="ops-timeline__item" role="listitem">
          <span class="ops-timeline__time">Day 3 Â· 11:00 AM</span>
          <p class="ops-timeline__event">Grand Cayman tender start</p>
        </article>
        <article class="ops-timeline__item" role="listitem">
          <span class="ops-timeline__time">Day 6 Â· 7:30 AM</span>
          <p class="ops-timeline__event">CocoCay gangway opens</p>
        </article>
      </div>
    </section>

    <section id="golden-hour" class="ops-section" aria-label="Golden hour embarkation protocol">
      <h2 class="ops-heading">Golden Hour Embarkation Protocol</h2>
      <p class="ops-subtitle">Owner-based handoffs from arrival through sail-away.</p>
      <div class="ops-grid" role="list">
        <article class="ops-card" role="listitem" data-step-id="arrive-port">
          <h3>10:30 AM - Arrive Port Zone</h3>
          <p class="ops-owner"><i class="fas fa-user-check" aria-hidden="true"></i>Owner: Transport Lead</p>
          <ol class="ops-list">
            <li>Confirm terminal and drop-off lane from cruise documents.</li>
            <li>Open app documents and verify every guest has a pass.</li>
            <li>Photo-confirm all checked baggage tags before handoff.</li>
          </ol>
          <button type="button" class="ops-step-toggle" aria-pressed="false">Mark complete</button>
        </article>
        <article class="ops-card" role="listitem" data-step-id="security-flow">
          <h3>11:00 AM - Security & Check-In</h3>
          <p class="ops-owner"><i class="fas fa-user-check" aria-hidden="true"></i>Owner: Document Lead</p>
          <ol class="ops-list">
            <li>Move room-by-room and verify IDs before entering queue.</li>
            <li>Maintain one regroup point past security checkpoint.</li>
            <li>Escalate any scan issue immediately with guest services.</li>
          </ol>
          <button type="button" class="ops-step-toggle" aria-pressed="false">Mark complete</button>
        </article>
        <article class="ops-card" role="listitem" data-step-id="muster-first">
          <h3>12:00 PM - Board & Muster First</h3>
          <p class="ops-owner"><i class="fas fa-user-check" aria-hidden="true"></i>Owner: Safety Lead</p>
          <ol class="ops-list">
            <li>Drop carry-on essentials in staterooms only if ready.</li>
            <li>Complete muster by assigned station, by room, not as one group.</li>
            <li>Confirm each cabin reports done status in family chat.</li>
          </ol>
          <button type="button" class="ops-step-toggle" aria-pressed="false">Mark complete</button>
        </article>
        <article class="ops-card" role="listitem" data-step-id="sail-away-brief">
          <h3>1:00 PM - Sail-Away Brief</h3>
          <p class="ops-owner"><i class="fas fa-user-check" aria-hidden="true"></i>Owner: Trip Lead</p>
          <ol class="ops-list">
            <li>Confirm day plan, kids check-ins, and emergency regroup locations.</li>
            <li>Call out first dining and evening activity windows.</li>
            <li>Verify all cabins have keys and onboard messaging enabled.</li>
          </ol>
          <button type="button" class="ops-step-toggle" aria-pressed="false">Mark complete</button>
        </article>
      </div>
    </section>

    <section class="deck-grid container" aria-label="Pre-cruise tasks" id="tasks">
      <div class="deck-grid__header">
        <div>
          <h2 class="deck-grid__title">Finish These Before You Sail</h2>
          <p class="deck-grid__subtitle">Clear, 5-step checklist with the most important items first.</p>
        </div>
        <div class="deck-grid__counts">
          <div class="count-chip"><span id="operationsRemainingCount">5</span> remaining</div>
          <div class="count-chip"><span id="operationsTotalCount">5</span> total</div>
        </div>
      </div>
      <div class="deck-cards" role="list">
        <article class="deck-card" role="listitem" id="task-online-checkin">
          <div class="deck-visual">
            <span class="deck-number">1</span>
            <img src="deck-plans/deck-12.png" alt="Online check-in" />
          </div>
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Online check-in</h3>
              <p class="deck-subtitle"><abbr class="term-help" title="Royal Caribbean digital boarding pass and check-in flow">SetSail</abbr> passes, boarding time, guest info</p>
            </div>
            <div class="deck-highlights">
              <span>Phase: Do now</span>
              <span>Due: Dec 31</span>
              <span>15 min</span>
              <span>All guests</span>
              <span>Owner: Trip lead</span>
              <span>Source: Royal app check-in</span>
              <span>Evidence: SetSail pass downloaded</span>
            </div>
            <a class="deck-card__cta" href="itinerary.html">Finish check-in</a>
          </div>
        </article>

        <article class="deck-card" role="listitem" id="task-passports-photos">
          <div class="deck-visual">
            <span class="deck-number">2</span>
            <img src="deck-plans/deck-12.png" alt="Passports and photos" />
          </div>
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Passports & photos</h3>
              <p class="deck-subtitle">Upload IDs and guest photos for faster boarding</p>
            </div>
            <div class="deck-highlights">
              <span>Phase: Do now</span>
              <span>All travelers</span>
              <span>Photo guidelines</span>
              <span>Verify expiration</span>
              <span>Owner: Each adult traveler</span>
              <span>Source: Royal document upload</span>
              <span>Evidence: Upload accepted state</span>
            </div>
            <a class="deck-card__cta" href="tips.html#carryon">Upload now</a>
          </div>
        </article>

        <article class="deck-card" role="listitem" id="task-luggage-tags">
          <div class="deck-visual">
            <span class="deck-number">3</span>
            <img src="deck-plans/deck-12.png" alt="Luggage tags" />
          </div>
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Luggage tags</h3>
              <p class="deck-subtitle">Download and print tags for every bag</p>
            </div>
            <div class="deck-highlights">
              <span>Phase: This week</span>
              <span>PDF tags</span>
              <span>Per stateroom</span>
              <span>Instructions included</span>
              <span>Owner: Stateroom lead</span>
              <span>Source: Guest account docs</span>
              <span>Evidence: Printed tags photo</span>
            </div>
            <a class="deck-card__cta" href="offline.html">Get tags</a>
          </div>
        </article>

        <article class="deck-card" role="listitem" id="task-payment-insurance">
          <div class="deck-visual">
            <span class="deck-number">4</span>
            <img src="deck-plans/deck-12.png" alt="Payment and insurance" />
          </div>
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Payment & insurance</h3>
              <p class="deck-subtitle">Card on file, travel insurance, medical notes</p>
            </div>
            <div class="deck-highlights">
              <span>Phase: This week</span>
              <span>Card verified</span>
              <span>Insurance optional</span>
              <span>Health info</span>
              <span>Owner: Payment card holder</span>
              <span>Source: Account profile</span>
              <span>Evidence: Confirmation email</span>
            </div>
            <a class="deck-card__cta" href="contacts.html#onboard">Update details</a>
          </div>
        </article>

        <article class="deck-card" role="listitem" id="task-day-of-arrival">
          <div class="deck-visual">
            <span class="deck-number">5</span>
            <img src="deck-plans/deck-12.png" alt="Day-of arrival" />
          </div>
          <div class="deck-info">
            <div class="deck-info__heading">
              <h3>Day-of arrival</h3>
              <p class="deck-subtitle">Port parking, rideshare, and boarding window</p>
            </div>
            <div class="deck-highlights">
              <span>Phase: Nice to have</span>
              <span>Arrival time</span>
              <span>Parking vs rideshare</span>
              <span>Terminal map</span>
              <span>Target departure baseline: 4:00 PM</span>
              <span>Terminal must be verified in cruise docs (T1/T5/T6)</span>
              <span>Owner: Transportation planner</span>
              <span>Source: Port logistics info</span>
              <span>Evidence: Saved route + ETA</span>
            </div>
            <a class="deck-card__cta" href="decks.html">Plan arrival</a>
          </div>
        </article>
      </div>
      <p id="operationsSearchEmpty" style="margin-top:12px; padding:12px 14px; border:1px dashed var(--royal-border); border-radius:12px; background:#fff; color:var(--royal-ink);" hidden>No checklist tasks match that search yet.</p>
    </section>

    <section id="contingencies" class="ops-section" aria-label="Contingency decision trees">
      <h2 class="ops-heading">Contingency Decision Trees</h2>
      <p class="ops-subtitle">Fast escalation paths for medical and weather disruptions.</p>
      <div class="ops-grid" role="list">
        <article class="ops-card" role="listitem">
          <h3>Medical Incident Flow</h3>
          <ol class="ops-list">
            <li>Assess severity: life-threatening vs non-urgent.</li>
            <li>Life-threatening: call ship emergency line immediately, then notify trip lead.</li>
            <li>Non-urgent: route guest to medical center and log location/time in family chat.</li>
            <li>Trip lead updates room leads and confirms medication retrieval if needed.</li>
          </ol>
        </article>
        <article class="ops-card" role="listitem">
          <h3>Weather / Port Change Flow</h3>
          <ol class="ops-list">
            <li>Monitor app + captain updates for itinerary adjustments.</li>
            <li>If port is delayed/canceled: shift to sea-day backup plan within 15 minutes.</li>
            <li>Rebook affected excursions first, then dining and activity windows.</li>
            <li>Send one consolidated family update with next checkpoint time.</li>
          </ol>
        </article>
      </div>
    </section>

    <section id="roles" class="ops-section" aria-label="Role based operations model">
      <h2 class="ops-heading">Role-Based Operations Model</h2>
      <p class="ops-subtitle">Assign clear owners so no critical task is orphaned.</p>
      <div class="ops-grid" role="list">
        <article class="ops-card" role="listitem">
          <h3>Trip Lead</h3>
          <ul class="ops-list">
            <li>Owns daily priorities, regroup times, and final go/no-go decisions.</li>
            <li>Maintains status board for documents, muster, and transport.</li>
          </ul>
        </article>
        <article class="ops-card" role="listitem">
          <h3>Document Lead</h3>
          <ul class="ops-list">
            <li>Validates IDs, SetSail passes, and upload completion.</li>
            <li>Escalates document mismatches before port arrival.</li>
          </ul>
        </article>
        <article class="ops-card" role="listitem">
          <h3>Logistics Lead</h3>
          <ul class="ops-list">
            <li>Controls terminal arrival flow, baggage tags, and transportation timing.</li>
            <li>Publishes backup route and terminal contingency plan.</li>
          </ul>
        </article>
        <article class="ops-card" role="listitem">
          <h3>Safety Lead</h3>
          <ul class="ops-list">
            <li>Tracks muster completion by room and emergency regroup points.</li>
            <li>Coordinates medical or weather contingency execution onboard.</li>
          </ul>
        </article>
      </div>
    </section>
  </main>

  <div id="sharedFooter"></div>
  <div id="sharedBottomNav" data-page="operations"></div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const input = document.getElementById('operationsSearchInput');
      const status = document.getElementById('operationsSearchStatus');
      const empty = document.getElementById('operationsSearchEmpty');
      const cards = Array.from(document.querySelectorAll('#tasks .deck-card'));
      const total = cards.length;
      if (!input || !status || !empty || total === 0) return;

      const STORAGE_KEY = 'operations-completed-v1';
      const PLAYBOOK_STORAGE_KEY = 'operations-golden-hour-completed-v1';
      const SEARCH_DELAY_MS = 120;
      let searchTimer;
      const remainingCountEl = document.getElementById('operationsRemainingCount');
      const totalCountEl = document.getElementById('operationsTotalCount');

      function showToast(message) {
        status.textContent = message;
        window.setTimeout(update, 900);
      }

      function getCardId(card, index) {
        return card.id || `task-${index + 1}`;
      }

      function readCompletionSet() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          const parsed = raw ? JSON.parse(raw) : [];
          return new Set(Array.isArray(parsed) ? parsed : []);
        } catch (_e) {
          return new Set();
        }
      }

      function writeCompletionSet(set) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(Array.from(set)));
      }

      function readPlaybookSet() {
        try {
          const raw = localStorage.getItem(PLAYBOOK_STORAGE_KEY);
          const parsed = raw ? JSON.parse(raw) : [];
          return new Set(Array.isArray(parsed) ? parsed : []);
        } catch (_e) {
          return new Set();
        }
      }

      function writePlaybookSet(set) {
        localStorage.setItem(PLAYBOOK_STORAGE_KEY, JSON.stringify(Array.from(set)));
      }

      function applyCompletionState(card, done) {
        card.classList.toggle('is-complete', done);
        const btn = card.querySelector('.task-complete-btn');
        if (!btn) return;
        btn.textContent = done ? 'Completed' : 'Mark complete';
        btn.setAttribute('aria-pressed', String(done));
      }

      function update() {
        const q = input.value.toLowerCase().trim();
        let shown = 0;
        status.classList.add('search-status-loading');
        status.textContent = 'Filtering checklist...';
        clearTimeout(searchTimer);
        searchTimer = window.setTimeout(() => {
          cards.forEach((card) => {
            const match = !q || card.textContent.toLowerCase().includes(q);
            card.hidden = !match;
            card.style.display = match ? 'flex' : 'none';
            if (match) shown += 1;
          });
          status.textContent = `Showing ${shown} of ${total} tasks`;
          status.classList.remove('search-status-loading');
          empty.hidden = shown !== 0;
        }, SEARCH_DELAY_MS);
      }

      function updateTaskCounts() {
        const done = cards.filter((card) => card.classList.contains('is-complete')).length;
        const remaining = Math.max(total - done, 0);
        if (remainingCountEl) remainingCountEl.textContent = String(remaining);
        if (totalCountEl) totalCountEl.textContent = String(total);
      }

      const completed = readCompletionSet();
      cards.forEach((card, index) => {
        const id = getCardId(card, index);
        card.dataset.taskId = id;
        const info = card.querySelector('.deck-info');
        if (!info) return;

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'task-complete-btn';
        btn.textContent = 'Mark complete';
        btn.setAttribute('aria-pressed', 'false');
        info.appendChild(btn);

        applyCompletionState(card, completed.has(id));
        btn.addEventListener('click', () => {
          const done = !card.classList.contains('is-complete');
          applyCompletionState(card, done);
          if (done) {
            completed.add(id);
            showToast('Task marked complete');
          } else {
            completed.delete(id);
            showToast('Task marked incomplete');
          }
          writeCompletionSet(completed);
          updateTaskCounts();
        });
      });

      const playbookSet = readPlaybookSet();
      const playbookCards = Array.from(document.querySelectorAll('[data-step-id]'));
      playbookCards.forEach((card) => {
        const stepId = card.getAttribute('data-step-id');
        const btn = card.querySelector('.ops-step-toggle');
        if (!stepId || !btn) return;

        const applyPlaybookState = (done) => {
          card.classList.toggle('is-complete', done);
          btn.textContent = done ? 'Completed' : 'Mark complete';
          btn.setAttribute('aria-pressed', String(done));
        };

        applyPlaybookState(playbookSet.has(stepId));
        btn.addEventListener('click', () => {
          const done = !card.classList.contains('is-complete');
          applyPlaybookState(done);
          if (done) {
            playbookSet.add(stepId);
            showToast('Golden Hour step marked complete');
          } else {
            playbookSet.delete(stepId);
            showToast('Golden Hour step marked incomplete');
          }
          writePlaybookSet(playbookSet);
        });
      });

      input.addEventListener('input', update);
      document.addEventListener('keydown', function (e) {
        if (e.key === '/' && e.target !== input) {
          e.preventDefault();
          input.focus();
        }
      });
      updateTaskCounts();
      update();
    });
  </script>
</body>
</html>
